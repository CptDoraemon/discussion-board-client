{"version":3,"sources":["redux/actions/login-status.ts","redux/state.ts","redux/reducers/login-status.ts","redux/actions/snackbar.ts","redux/reducers/snakbar.ts","redux/reducers/root-reducers.ts","redux/configure-store.ts","theme.tsx","utils/use-full-height.tsx","components/login/commons/login-common.tsx","components/commons/form-button.tsx","utils/use-input-field.tsx","utils/validators.ts","requests/urls.ts","utils/use-redirect-back.tsx","requests/use-login.tsx","components/commons/error-message.tsx","components/login/login.tsx","requests/use-register.tsx","components/login/register.tsx","components/commons/theme-button.tsx","requests/use-logout.tsx","components/header/logged-in-user-panel.tsx","components/header/anonymous-user-panel.tsx","components/commons/logo.tsx","components/header/header.tsx","containers/header-container.tsx","utils/use-redirect-to-login.tsx","requests/use-fetch-with-token-verification.tsx","requests/use-get-post-list.tsx","utils/get-time-string.tsx","requests/use-like.tsx","components/commons/like-buttons.tsx","components/commons/tag-chip.tsx","components/post-list/post.tsx","components/post-list/post-list.tsx","containers/post-list-container.tsx","components/commons/generic-button.tsx","components/side-bar/side-bar.tsx","containers/side-bar-container.tsx","components/main-page/main-page.tsx","components/snackbar/snackbar.tsx","containers/snackbar-container.tsx","components/footer/footer-column.tsx","components/footer/footer.tsx","utils/protected-router.tsx","requests/use-post-submission.tsx","components/post-editor/use-editor.tsx","utils/use-set-title.ts","requests/use-get-post-detail.tsx","requests/use-get-tag-list.tsx","components/post-editor/post-editor.tsx","utils/use-reload.tsx","requests/use-comment-submission.tsx","components/post-detail/comment-input.tsx","components/post-detail/item-info.tsx","components/post-detail/sub-comment-item.tsx","components/post-detail/comment-item.tsx","components/post-detail/comment-list.tsx","components/post-detail/inserted-html-style.tsx","requests/use-delete.tsx","components/commons/delete-button.tsx","components/commons/edit-button.tsx","components/post-detail/post-detail.tsx","utils/router-scroll-restoration.tsx","components/account-setting/section-wrapper.tsx","components/account-setting/update-avatar/get-cropped-image.ts","components/account-setting/update-avatar/update-avatar.tsx","requests/use-update-avatar.tsx","components/account-setting/update-avatar/use-resize-image.tsx","components/account-setting/account-setting.tsx","containers/account-setting-container.tsx","inner-app.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["LoginStatusActionTypes","defaultState","loginStatus","isLogin","username","token","access","refresh","snackbar","open","message","updateLoginStatus","newStatus","type","UPDATE_LOGIN_STATUS","SnackbarActionTypes","state","action","LOGOUT","REFRESH_TOKEN","Object","assign","newAccessToken","openSnackbar","OPEN","CLOSE","rootReducers","combineReducers","loggerMiddleware","createLogger","theme","createMuiTheme","palette","primary","main","contrastText","secondary","text","background","default","typography","responsiveFontSizes","useFullHeight","ref","useState","height","setHeight","useEffect","current","getBoundingClientRect","useStyles","makeStyles","root","width","margin","spacing","display","flexDirection","alignItems","justifyContent","image","objectFit","breakpoints","down","content","padding","textField","fontWeight","link","color","LoginCommon","children","imageUrl","classes","containerRef","useRef","Paper","elevation","className","src","process","alt","style","title","button","backgroundColor","textTransform","borderBottom","borderRadius","opacity","FormButton","disabled","form","variant","disableElevation","useInputField","defaultValue","validator","value","setValue","error","setError","errorMessage","setErrorMessage","e","target","reference","validatorResult","isValid","usernameValidator","length","emailValidator","indexOf","passwordValidator","confirmPasswordValidator","postTitleValidator","commentValidator","execValidators","validators","validationResults","map","_","i","base","postBase","urls","login","accountBase","register","verifySession","updateAvatar","getPostList","getPostDetail","id","createPost","editPost","deletePost","tagList","createComment","commentBase","like","userActionsBase","blacklist","useRedirectBack","history","useHistory","location","useLocation","from","pathname","replace","useLogin","loading","setLoading","dispatch","useDispatch","goBack","email","password","fetch","method","headers","body","JSON","stringify","then","res","json","status","data","catch","ErrorMessage","Typography","component","Box","CircularProgress","Login","setEmail","emailError","emailErrorMessage","validateEmail","setPassword","passwordError","passwordErrorMessage","validatePassword","onSubmit","preventDefault","Grid","container","item","xs","textAlign","justify","TextField","label","name","onChange","helperText","Divider","to","useRegister","confirmPassword","Register","setUsername","usernameError","usernameErrorMessage","validateUsername","setConfirmPassword","confirmPasswordError","confirmPasswordErrorMessage","validateConfirmPassword","validationCheck1","validationCheck2","md","letterSpacing","ThemeButton","url","onClick","Link","useLogout","clientSideLogout","LoggedInUserPanel","logout","size","AnonymousUserPanel","fontFamily","join","fontSize","up","Logo","headerDimension","position","zIndex","appBar","left","top","placeholder","Header","HeaderContainer","connect","useRedirectToLogin","push","useFetchWithTokenVerification","useStore","getState","refreshToken","redirectToLogin","getAccessHeader","redirect","options","a","undefined","noAuthenticationHandler","Promise","resolve","reject","refreshRes","refreshJson","console","log","messages","useGetPostList","fetchWithTokenVerification","setData","fetchPostList","months","getTimeString","ISOString","date","Date","hour","getHours","minute","getMinutes","getDate","getMonth","getFullYear","useLike","updatedData","setUpdatedData","likeButtons","marginLeft","buttonText","lineHeight","grey","LikeButtons","likes","dislikes","isLiked","likeLoading","likedByUser","dislikedByUser","IconButton","aria-label","green","red","inheritColor","chipRoot","fade","transitions","create","chipLabelSmall","caption","chipLabelNormal","TagChip","Chip","toUpperCase","clickable","paper","minHeight","avatar","light","author","actionArea","actionItem","Post","Avatar","owner","avatar_url","charAt","tag","is_liked","comments","created","PostList","Array","fill","my","key","overflow","Skeleton","animation","PostListContainer","maxWidth","GenericClickButton","Button","GenericLinkButton","rowWrapper","SideBar","SideBarContainer","right","MainPage","createStyles","Snackbar","closeSnackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","SnackbarContent","SnackbarContainer","userStyles","listStyleType","header","FooterColumn","href","rel","column1","copyright","Footer","PrivateRoute","rest","render","removeUnusedObjectURL","objectURLArray","filter","getForm","FormData","append","promiseArray","getBlobFromObjectURL","all","blobs","forEach","blob","urlComponents","split","filename","usePostSubmission","submitted","setSubmitted","updatePostID","imageUploadHandler","editor","input","document","createElement","setAttribute","click","onchange","files","loadImage","canvas","toBlob","objectURL","URL","createObjectURL","range","getSelection","insertEmbed","index","orientation","useEditor","ID","quill","setQuill","Image","Quill","import","sanitize","quillInstance","modules","toolbar","getModule","addHandler","delta","clipboard","convert","setContents","useSetTitle","useGetPostDetail","postID","useGetTagList","getTagList","marginBottom","PostEditorForm","updatePost","getObjectURLArray","setContent","titleChangeHandler","titleError","titleErrorMessage","validateTitle","setTag","submit","FormControl","InputLabel","htmlFor","Input","aria-describedby","FormHelperText","mb","Select","displayEmpty","arr","MenuItem","innerHTML","PostEditor","useParams","needData","setNeedData","postDetailError","postDetailData","fetchPostDetail","tagListError","parseInt","showEditor","useReload","useCommentSubmission","reload","parentPost","parentComment","CommentInput","comment","commentChangeHandler","commentError","commentErrorMessage","validateComment","postInfo","avatarSmall","postInfoItem","ItemInfo","avatarUrl","small","SubCommentItem","commentButton","subCommentPanel","border","CommentItem","isCommentPanelOpen","setIsCommentPanelOpen","startIcon","prev","sub_comments","Fade","in","timeout","loginToLeaveMessage","CommentList","itemData","useInsertedHTMLStyle","whiteSpace","wordWrap","backgroundPosition","backgroundRepeat","backgroundSize","transition","maxHeight","useDelete","warning","confirmButton","DeleteButton","dialog","setDialog","closeDialog","Tooltip","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","textColor","success","EditButton","center","PostDetail","insertedHTMLClasses","HTMLStringContainerRef","is_owner","dangerouslySetInnerHTML","__html","comments_data","RouterScrollRestoration","window","scrollTo","sectionTitle","SectionWrapper","getCroppedImg","Stage","crop","scale","fileName","x","y","ctx","getContext","drawImage","useUpdateAvatar","file","useResizeImage","setWidth","resize","containerWidth","getWidthHeight","naturalWidth","naturalHeight","finalWidth","finalHeight","onload","imageNaturalWidth","imageNaturalHeight","Math","min","round","row","backNextButtons","centering","FinishStage","restart","ConfirmStage","back","next","upload","useMemo","imgWidth","imgHeight","GoNext","CropStage","setImage","setCrop","cropperWrapperRef","cropperSize","setCropperSize","goNext","croppedSrc","aspect","unit","justifySelf","newCrop","ruleOfThirds","onImageError","onImageLoaded","UploadStage","inputRef","handleFiles","img","toDataURL","addEventListener","removeEventListener","accept","UpdateAvatar","UPLOAD","stage","setStage","imageSrc","_setImageSrc","croppedImageBlob","_setCroppedImageBlob","moveToUploadStage","moveToCropStage","CROP","cropped","CONFIRM","FINISH","AccountSetting","AccountSettingContainer","widthWrapper","InnerAppContainer","basename","path","exact","store","createStore","applyMiddleware","App","ThemeProvider","CssBaseline","Boolean","hostname","match","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9143bc2a.chunk.js","sourcesContent":["import {State, defaultState} from \"../state\";\n\nexport enum LoginStatusActionTypes {\n    'UPDATE_LOGIN_STATUS'='UPDATE_LOGIN_STATUS',\n    'LOGOUT'='LOGOUT',\n    'REFRESH_TOKEN'='REFRESH_TOKEN'\n}\n\n// export type LoginStatusAction =\n//     {\n//         type: typeof LoginStatusActionTypes.LOGOUT,\n//         newStatus: State['loginStatus']\n//     } |\n//     {\n//         type: typeof LoginStatusActionTypes.UPDATE_LOGIN_STATUS,\n//         newStatus: State['loginStatus']\n//     } |\n//     {\n//         type: typeof LoginStatusActionTypes.REFRESH_TOKEN,\n//         newStatus: State['loginStatus']\n//     }\n\nexport type LoginStatusAction = ReturnType<typeof logout> | ReturnType<typeof updateLoginStatus> | ReturnType<typeof refreshToken>\n\nexport function logout() {\n    return {\n        type: LoginStatusActionTypes.LOGOUT as typeof LoginStatusActionTypes.LOGOUT,\n        newStatus: defaultState.loginStatus\n    }\n}\n\nexport function updateLoginStatus(newStatus: State['loginStatus']) {\n    return {\n        type: LoginStatusActionTypes.UPDATE_LOGIN_STATUS as typeof LoginStatusActionTypes.UPDATE_LOGIN_STATUS,\n        newStatus\n    }\n}\n\nexport function refreshToken(newAccessToken: State['loginStatus']['token']['access']) {\n    return {\n        type: LoginStatusActionTypes.REFRESH_TOKEN as typeof LoginStatusActionTypes.REFRESH_TOKEN,\n        newAccessToken\n    }\n}","export interface State {\n    loginStatus: {\n        isLogin: boolean,\n        username: string,\n        token: {\n            access: string,\n            refresh: string\n        }\n    },\n    snackbar: {\n        open: boolean,\n        message: string\n    }\n}\n\nexport const defaultState: State = {\n    loginStatus: {\n        isLogin: false,\n        username: '',\n        token: {\n            access: '',\n            refresh: ''\n        }\n    },\n    snackbar: {\n        open: false,\n        message: ''\n    }\n};","import {defaultState, State} from \"../state\";\nimport {LoginStatusAction, LoginStatusActionTypes} from \"../actions/login-status\";\n\n\nfunction loginStatus(\n    state = defaultState.loginStatus,\n    action: LoginStatusAction\n): State['loginStatus'] {\n    switch (action.type) {\n        case LoginStatusActionTypes.UPDATE_LOGIN_STATUS:\n            return action.newStatus;\n        case LoginStatusActionTypes.LOGOUT:\n            return action.newStatus;\n        case LoginStatusActionTypes.REFRESH_TOKEN:\n            const newStatus = Object.assign({}, state);\n            newStatus.token.access = action.newAccessToken;\n            return newStatus;\n        default:\n            return state\n    }\n}\n\nexport default loginStatus;","export enum SnackbarActionTypes {\n    'CLOSE'='CLOSE',\n    'OPEN'='OPEN',\n}\n\nexport type SnackbarAction = ReturnType<typeof openSnackbar> | ReturnType<typeof closeSnackbar>\n\nexport function openSnackbar(message: string) {\n    return {\n        type: SnackbarActionTypes.OPEN as typeof SnackbarActionTypes.OPEN,\n        message\n    }\n}\n\nexport function closeSnackbar() {\n    return {\n        type: SnackbarActionTypes.CLOSE as typeof SnackbarActionTypes.CLOSE,\n    }\n}\n","import {defaultState, State} from \"../state\";\nimport {SnackbarAction, SnackbarActionTypes} from \"../actions/snackbar\";\n\n\nfunction snackbar (\n    state = defaultState.snackbar,\n    action: SnackbarAction\n): State['snackbar'] {\n    switch (action.type) {\n        case SnackbarActionTypes.OPEN:\n            return {\n                open: true,\n                message: action.message\n            };\n        case SnackbarActionTypes.CLOSE:\n            return defaultState.snackbar;\n        default:\n            return state\n    }\n}\n\nexport default snackbar;","import {combineReducers} from \"redux\";\nimport loginStatus from \"./login-status\";\nimport snackbar from \"./snakbar\";\n\nconst rootReducers = combineReducers({\n    loginStatus,\n    snackbar\n});\n\nexport default rootReducers;","import { createStore, applyMiddleware } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport rootReducers from \"./reducers/root-reducers\";\nimport {defaultState} from \"./state\";\n// import rootReducers from \"./reducers/root-reducers\";\n\nimport { createLogger } from 'redux-logger'\nconst loggerMiddleware = createLogger();\n\n\nexport default function configureStore() {\n    return createStore(\n        rootReducers,\n        defaultState,\n        // applyMiddleware(thunkMiddleware)\n        // applyMiddleware(thunkMiddleware, loggerMiddleware)\n        applyMiddleware(loggerMiddleware)\n    )\n}","import {createMuiTheme, responsiveFontSizes} from \"@material-ui/core/styles\";\n\nlet theme = createMuiTheme({\n    palette: {\n        primary: {\n            main: '#41b3a3',\n            contrastText: '#fff',\n        },\n        secondary: {\n            main: '#e8a87c',\n            contrastText: '#fff',\n        },\n        text: {\n            primary: '#4a5568'\n        },\n        background: {\n            default: 'rgb(241, 242, 245)'\n        }\n    },\n    typography: {\n        \"fontFamily\": \"system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji\",\n        \"fontSize\": 14,\n        \"fontWeightLight\": 300,\n        \"fontWeightRegular\": 400,\n        \"fontWeightMedium\": 500\n    }\n});\ntheme = responsiveFontSizes(theme);\n\nexport default theme;","import React, {useEffect, useState} from \"react\";\n\nconst useFullHeight = (ref: React.RefObject<HTMLDivElement>) => {\n    const [height, setHeight] = useState(0);\n\n    useEffect(() => {\n        if (!ref.current) return;\n        setHeight(ref.current.getBoundingClientRect().height)\n    }, [ref]);\n\n    return height\n};\n\nexport default useFullHeight","import React, {useRef} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Paper} from \"@material-ui/core\";\nimport useFullHeight from \"../../../utils/use-full-height\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        margin: theme.spacing(2, 0),\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center'\n    },\n    image: {\n        width: '40%',\n        height: '100%',\n        '& img': {\n            width: '100%',\n            height: '100%',\n            objectFit: 'cover'\n        },\n        [theme.breakpoints.down('sm')]: {\n            display:'none'\n        }\n    },\n    content: {\n        width: '60%',\n        padding: theme.spacing(10, 5),\n        [theme.breakpoints.down('sm')]: {\n            width: '100%'\n        }\n    },\n    textField: {\n        width: '100%',\n        fontWeight: 700\n    },\n    link: {\n        fontWeight: 700,\n        '& a:link': {\n            color: theme.palette.primary.main\n        },\n        '& a:visited': {\n            color: theme.palette.primary.main\n        },\n        '& a:hover': {\n            color: theme.palette.secondary.main\n        }\n    }\n}));\n\ninterface LoginCommonProps {\n    imageUrl: string\n}\n\nconst LoginCommon: React.FC<LoginCommonProps> = ({children, imageUrl}) => {\n    const classes = useStyles();\n\n    const containerRef = useRef<HTMLDivElement>(null);\n    const height = useFullHeight(containerRef);\n\n    return (\n        <Paper elevation={0} className={classes.root} ref={containerRef}>\n            <div className={classes.image}>\n                <img\n                    src={process.env.PUBLIC_URL + imageUrl}\n                    alt={'login background'}\n                    style={{height: `${height}px`}}\n                    title={'login background'}\n                />\n            </div>\n            <div className={classes.content}>\n                { children }\n            </div>\n        </Paper>\n    )\n};\n\nexport default LoginCommon","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Button as MuiButton} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        width: '100%',\n        backgroundColor: theme.palette.primary.main,\n        color: '#fff',\n        fontWeight: 700,\n        textTransform: 'none',\n        borderBottom: '2px solid rgba(0,0,0,0.1)',\n        borderRadius: '5px',\n        '&:hover': {\n            backgroundColor: theme.palette.secondary.main\n        },\n        '&:disabled': {\n            backgroundColor: theme.palette.secondary.main,\n            opacity: 0.7\n        }\n    }\n}));\n\ninterface ButtonProps {\n    text: string,\n    disabled: boolean,\n    form: string\n}\n\nconst FormButton: React.FC<ButtonProps> = ({text, disabled, form}) => {\n    const classes = useStyles();\n\n    return (\n        <MuiButton variant=\"contained\" classes={{root: classes.button}} disableElevation type={'submit'} form={form} disabled={disabled}>\n            { text }\n        </MuiButton>\n    )\n};\n\nexport default FormButton\n","import React, {ChangeEvent, useEffect, useState} from \"react\";\nimport {Validator} from \"./validators\";\n\ntype ChangeHandler = (e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void\n\nconst useInputField = (\n    defaultValue: string,\n    validator: Validator\n) => {\n    const [value, setValue] = useState(defaultValue);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const validate = (reference?: string) => {\n        const validatorResult = reference ? validator(value, reference) : validator(value);\n        setError(!validatorResult.isValid);\n        setErrorMessage(validatorResult.message);\n\n        return validatorResult.isValid as boolean\n    };\n\n    const changeHandler: ChangeHandler = (e) => {\n        if (error) setError(false);\n        setValue(e.target.value)\n    };\n\n    return [value, changeHandler, error, errorMessage, validate] as [string, ChangeHandler, boolean, string, typeof validate]\n};\n\nexport default useInputField","export type Validator = (value: string, reference?: string) => {isValid: boolean, message: string}\n\nconst usernameValidator: Validator = (value) => {\n    let isValid = true;\n    let message = '';\n\n    if (value.length >= 30) {\n        isValid = true;\n        message = 'Username length must be less than 30 characters';\n    } else if (value.length === 0) {\n        isValid = true;\n        message = 'Username cannot be empty';\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst emailValidator: Validator = (value) => {\n    let isValid = true;\n    let message = '';\n\n    if (value.indexOf('@') === -1) {\n        isValid = false;\n        message = 'Invalid Email format'\n    } else if (value.indexOf('.') === -1) {\n        isValid = false;\n        message = 'Invalid Email format'\n    } else if (value.length === 0) {\n        isValid = false;\n        message = 'Email cannot be empty';\n    } else if (value.length >= 60) {\n        isValid = false;\n        message = 'Email too long';\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst passwordValidator: Validator = (value) => {\n    let isValid = true;\n    let message = '';\n\n    if (value.length === 0) {\n        isValid = false;\n        message = 'Email cannot be empty';\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst confirmPasswordValidator: Validator = (value, reference) => {\n    let isValid = true;\n    let message = '';\n\n    if (value !== reference) {\n        message = 'Not same as the password';\n        isValid = false;\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst postTitleValidator: Validator = (value) => {\n    let isValid = true;\n    let message = '';\n\n    if (value.length === 0) {\n        message = 'Title cannot be empty';\n        isValid = false;\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst commentValidator: Validator = (value) => {\n    let isValid = true;\n    let message = '';\n\n    if (value.length === 0) {\n        message = 'Comment cannot be empty';\n        isValid = false;\n    } else if (value.length < 5) {\n        message = 'Comment needs to be at least 5 characters';\n        isValid = false;\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst execValidators = (validators: (()=>boolean)[]) => {\n    const validationResults = validators.map(_ => _());\n    for (let i=0; i<validationResults.length; i++) {\n        if (!validationResults[i]) {\n            return false\n        }\n    }\n\n    return true\n};\n\nexport {\n    usernameValidator,\n    emailValidator,\n    passwordValidator,\n    confirmPasswordValidator,\n    execValidators,\n    postTitleValidator,\n    commentValidator\n}","const base = 'https://django-api-xiaoxihome.herokuapp.com/api/discussion_board/';\n// const base = 'http://127.0.0.1:8000/api/discussion_board/';\n\nconst accountBase = base + 'account/';\nconst login = accountBase + 'login/';\nconst register = accountBase + 'register/';\nconst verifySession = accountBase + 'verify_session/';\nconst refresh = accountBase + 'refresh/';\nconst updateAvatar = accountBase + 'update_avatar/';\n\nconst postBase = base + 'post/';\nconst getPostList = postBase + 'all/';\nconst getPostDetail = (id: number) => `${postBase}${id}/`;\nconst createPost = postBase + 'create/';\nconst editPost = (id: number) => `${postBase}edit/${id}/`;\nconst deletePost = (id: number) => `${postBase}delete/${id}/`;\nconst tagList = postBase + 'tag-list/';\n\nconst commentBase = base + 'comment/';\nconst createComment = commentBase + 'create/';\n\nconst userActionsBase = base + 'user_actions/';\nconst like = userActionsBase + 'like/';\n\nconst urls = {\n    login,\n    register,\n    verifySession,\n    refresh,\n    updateAvatar,\n    getPostList,\n    getPostDetail,\n    createPost,\n    editPost,\n    deletePost,\n    tagList,\n    createComment,\n    like\n};\n\nexport default urls","import {useHistory, useLocation} from \"react-router-dom\";\n\n// redirect to \"/\" in these cases:\nconst blacklist: string[] = [\n    \"/login\",\n    \"/register\"\n];\n\nconst useRedirectBack = () => {\n    let history = useHistory();\n    let location = useLocation<any>();\n\n    const goBack = () => {\n        let from = \"/\";\n\n        if (location.state && location.state.from) {\n            if (typeof location.state.from === \"string\") {\n                if (blacklist.indexOf(location.state.from) === -1) {\n                    from = location.state.from\n                }\n            } else {\n                // from is object\n                if (location.state.from.pathname) {\n                    if (blacklist.indexOf(location.state.from.pathname) === -1) {\n                        from = Object.assign({}, location.state.from)\n                    }\n                }\n            }\n        }\n\n        history.replace(from);\n    };\n\n    return goBack\n};\n\nexport default useRedirectBack","import {useState} from \"react\";\nimport urls from \"./urls\";\nimport { useDispatch } from 'react-redux'\nimport { updateLoginStatus } from \"../redux/actions/login-status\";\nimport { openSnackbar } from \"../redux/actions/snackbar\";\nimport useRedirectBack from \"../utils/use-redirect-back\";\n\nconst useLogin = () => {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n    const dispatch = useDispatch();\n    const goBack = useRedirectBack();\n\n    const login = (\n        email: string,\n        password: string\n    ) => {\n        if (loading) return;\n\n        // reset states\n        setError(false);\n        setErrorMessage('');\n\n        // start fetching\n        setLoading(true);\n        fetch(urls.login, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                email,\n                password\n            })\n        })\n            .then((res) => res.json())\n            .then(json => {\n                setLoading(false);\n\n                if (json.status === 'success') {\n                    const username = json.data.username;\n                    dispatch(updateLoginStatus({\n                        isLogin: true,\n                        username: username,\n                        token: {\n                            access: json.data.access,\n                            refresh: json.data.refresh\n                        }\n                    }));\n                    goBack();\n                    dispatch(openSnackbar(`Welcome back ${username}`))\n                } else {\n                    setError(true);\n                    if (json.status === 'error') {\n                        setErrorMessage(json.message)\n                    } else {\n                        setErrorMessage('Server unavailable, please try again later.')\n                    }\n                }\n            })\n            .catch(e => {\n                setLoading(false);\n\n                setError(true);\n                setErrorMessage('Server unavailable, please try again later.')\n            });\n    };\n\n    return [loading, error, errorMessage, login] as [boolean, boolean, string, typeof login]\n\n};\n\nexport default useLogin","import {Box, CircularProgress, Typography} from \"@material-ui/core\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n    errorMessage: {\n        fontWeight: 700,\n        color: theme.palette.error.main\n    }\n}));\n\ninterface ErrorMessageProps {\n    loading: boolean,\n    error: boolean,\n    errorMessage: string\n\n}\n\nconst ErrorMessage:React.FC<ErrorMessageProps> = ({loading, errorMessage, error}) => {\n    const classes = useStyles();\n\n    return (\n        <Typography variant={'body1'} component={'div'}>\n            <Box className={classes.errorMessage} height={40}>\n                {   loading ?\n                        <CircularProgress color=\"primary\" /> :\n                        error && errorMessage ?\n                            errorMessage :\n                            ' '\n                }\n            </Box>\n        </Typography>\n    )\n};\n\nexport default ErrorMessage","import React, {FormEvent} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport LoginCommon from \"./commons/login-common\";\nimport {Box, Divider, Grid, TextField, Typography} from \"@material-ui/core\";\nimport FormButton from \"../commons/form-button\";\nimport {Link} from \"react-router-dom\";\nimport useInputField from \"../../utils/use-input-field\";\nimport {emailValidator, execValidators, passwordValidator} from \"../../utils/validators\";\nimport useLogin from \"../../requests/use-login\";\nimport ErrorMessage from \"../commons/error-message\";\n\nconst useStyles = makeStyles((theme) => ({\n    textField: {\n        width: '100%',\n        fontWeight: 700\n    },\n    link: {\n        fontWeight: 700,\n        '& a:link': {\n            color: theme.palette.primary.main\n        },\n        '& a:visited': {\n            color: theme.palette.primary.main\n        },\n        '& a:hover': {\n            color: theme.palette.secondary.main\n        }\n    }\n}));\n\ninterface LoginProps {\n\n}\n\nconst Login: React.FC<LoginProps> = () => {\n    const classes = useStyles();\n    const [email, setEmail, emailError, emailErrorMessage, validateEmail] = useInputField('', emailValidator);\n    const [password, setPassword, passwordError, passwordErrorMessage, validatePassword] = useInputField('', passwordValidator);\n\n    const [loading, error, errorMessage, login] = useLogin();\n\n    const submitHandler = (e: FormEvent) => {\n        e.preventDefault();\n\n        if (execValidators([validateEmail, validatePassword])) {\n            login(email, password)\n        }\n    };\n\n    return (\n        <LoginCommon imageUrl={'/images/login_bg.jpg'}>\n            <form onSubmit={submitHandler} id={'login-form'}>\n                <Grid container spacing={2}>\n                    <Grid item xs={12}>\n                        <Typography variant={'h5'} component={'h1'} color={\"textPrimary\"}>\n                            <Box textAlign={'center'} fontWeight={700}>\n                                Log In\n                            </Box>\n                        </Typography>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={emailError}\n                                label=\"Email\"\n                                name=\"email\"\n                                value={email}\n                                onChange={setEmail}\n                                variant=\"outlined\"\n                                helperText={emailError ? emailErrorMessage: ' '}\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={passwordError}\n                                type=\"password\"\n                                label=\"Password\"\n                                name=\"password\"\n                                value={password}\n                                onChange={setPassword}\n                                variant=\"outlined\"\n                                helperText={passwordError ? passwordErrorMessage : ' '}\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <FormButton text={'Log me in!'} form={'login-form'} disabled={loading}/>\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <ErrorMessage loading={loading} error={error} errorMessage={errorMessage}/>\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Divider />\n                    </Grid>\n\n                    <Grid item xs={12} className={classes.link}>\n                        <Grid container justify={'center'}>\n                            <Link to={'/register'}>\n                                Need an account?\n                            </Link>\n                        </Grid>\n                    </Grid>\n\n                </Grid>\n            </form>\n        </LoginCommon>\n    )\n\n};\n\nexport default Login","import {useState} from \"react\";\nimport urls from \"./urls\";\nimport { useDispatch } from 'react-redux'\nimport { updateLoginStatus } from \"../redux/actions/login-status\";\nimport {openSnackbar} from \"../redux/actions/snackbar\";\nimport useRedirectBack from \"../utils/use-redirect-back\";\n\nconst useRegister = () => {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n    const dispatch = useDispatch();\n    const goBack = useRedirectBack();\n\n    const register = (\n        username: string,\n        email: string,\n        password: string,\n        confirmPassword: string\n    ) => {\n        if (loading) return;\n\n        // reset states\n        setError(false);\n        setErrorMessage('');\n\n        // start fetching\n        setLoading(true);\n        fetch(urls.register, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                username,\n                email,\n                password,\n                'confirm_password': confirmPassword\n            })\n        })\n            .then((res) => res.json())\n            .then(json => {\n                setLoading(false);\n\n                if (json.status === 'success') {\n                    dispatch(updateLoginStatus({\n                        isLogin: true,\n                        username: json.data.username,\n                        token: {\n                            access: json.data.access,\n                            refresh: json.data.refresh\n                        }\n                    }));\n\n                    goBack();\n                    dispatch(openSnackbar(`Welcome ${username}!`))\n                } else {\n                    setError(true);\n                    if (json.status === 'error') {\n                        setErrorMessage(json.message)\n                    } else {\n                        setErrorMessage('Server unavailable, please try again later.')\n                    }\n                }\n            })\n            .catch(e => {\n                setLoading(false);\n\n                setError(true);\n                setErrorMessage('Server unavailable, please try again later.')\n            });\n    };\n\n    return [loading, error, errorMessage, register] as [boolean, boolean, string, typeof register]\n\n};\n\nexport default useRegister","import React, {FormEvent} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Divider, Grid, TextField, Typography} from \"@material-ui/core\";\nimport FormButton from \"../commons/form-button\";\nimport {Link} from \"react-router-dom\";\nimport LoginCommon from \"./commons/login-common\";\nimport useInputField from \"../../utils/use-input-field\";\nimport {\n    confirmPasswordValidator,\n    emailValidator,\n    execValidators,\n    passwordValidator,\n    usernameValidator\n} from \"../../utils/validators\";\nimport ErrorMessage from \"../commons/error-message\";\nimport useRegister from \"../../requests/use-register\";\n\nconst useStyles = makeStyles((theme) => ({\n    textField: {\n        width: '100%',\n        fontWeight: 700\n    },\n    link: {\n        fontWeight: 700,\n        '& a:link': {\n            color: theme.palette.primary.main\n        },\n        '& a:visited': {\n            color: theme.palette.primary.main\n        },\n        '& a:hover': {\n            color: theme.palette.secondary.main\n        }\n    }\n}));\n\ninterface RegisterProps {\n\n}\n\nconst Register: React.FC<RegisterProps> = () => {\n    const classes = useStyles();\n\n    const [username, setUsername, usernameError, usernameErrorMessage, validateUsername] = useInputField('', usernameValidator);\n    const [email, setEmail, emailError, emailErrorMessage, validateEmail] = useInputField('', emailValidator);\n    const [password, setPassword, passwordError, passwordErrorMessage, validatePassword] = useInputField('', passwordValidator);\n    const [confirmPassword, setConfirmPassword, confirmPasswordError, confirmPasswordErrorMessage, validateConfirmPassword] = useInputField('', confirmPasswordValidator);\n\n    const [loading, error, errorMessage, register] = useRegister();\n\n    const submitHandler = (e: FormEvent) => {\n        e.preventDefault();\n        const validationCheck1 = execValidators([validateUsername, validateEmail, validatePassword]);\n        const validationCheck2 =  validateConfirmPassword(password);\n        if (validationCheck1 && validationCheck2) {\n            register(username, email, password, confirmPassword)\n        }\n    };\n\n    const formID = 'register-form';\n\n    return (\n        <LoginCommon imageUrl={'/images/register_bg.jpg'}>\n            <form onSubmit={submitHandler} id={formID}>\n                <Grid container spacing={2}>\n                    <Grid item xs={12}>\n                        <Typography variant={'h5'} component={'h1'} color={\"textPrimary\"}>\n                            <Box textAlign={'center'} fontWeight={700}>\n                                Join Us\n                            </Box>\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={usernameError}\n                                label=\"Username\"\n                                name=\"username\"\n                                value={username}\n                                onChange={setUsername}\n                                helperText={usernameError ? usernameErrorMessage: ' '}\n                                variant=\"outlined\"\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={emailError}\n                                label=\"Email\"\n                                name=\"email\"\n                                value={email}\n                                onChange={setEmail}\n                                helperText={emailError ? emailErrorMessage: ' '}\n                                variant=\"outlined\"\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={passwordError}\n                                label=\"Password\"\n                                name=\"password\"\n                                type=\"password\"\n                                value={password}\n                                onChange={setPassword}\n                                helperText={passwordError ? passwordErrorMessage: ' '}\n                                variant=\"outlined\"\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={confirmPasswordError}\n                                label=\"Confirm Password\"\n                                name=\"confirm-password\"\n                                type=\"password\"\n                                value={confirmPassword}\n                                onChange={setConfirmPassword}\n                                helperText={confirmPasswordError ? confirmPasswordErrorMessage: ' '}\n                                variant=\"outlined\"\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <FormButton text={'I\\'m in!'} form={formID} disabled={false}/>\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <ErrorMessage loading={loading} error={error} errorMessage={errorMessage}/>\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Divider />\n                    </Grid>\n                    <Grid item xs={12} className={classes.link}>\n                        <Grid container justify={'center'}>\n                            <Link to={'/login'}>\n                                Already have an account?\n                            </Link>\n                        </Grid>\n                    </Grid>\n\n                </Grid>\n            </form>\n        </LoginCommon>\n    )\n};\n\nexport default Register","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Button as MuiButton} from \"@material-ui/core\";\nimport {Link, useLocation} from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        backgroundColor: 'rgba(255,255,255,0.3)',\n        color: '#fff',\n        fontWeight: 700,\n        textTransform: 'capitalize',\n        letterSpacing: 'inherit',\n        borderBottom: '2px solid rgba(0,0,0,0.1)',\n        borderRadius: '5px',\n        // margin: '0 4px',\n        padding: '4px 10px',\n        '&:hover': {\n            backgroundColor: theme.palette.secondary.main\n        }\n    }\n}));\n\ninterface ButtonProps {\n    text: string,\n    url?: string,\n    onClick?: () => void\n}\n\nconst ThemeButton: React.FC<ButtonProps> = ({text, url, onClick}) => {\n    const classes = useStyles();\n    const location = useLocation();\n\n    if (url) {\n        const to = {\n            pathname: url,\n            state: {\n                from: location.pathname\n            }\n        };\n        return (\n            <MuiButton variant=\"contained\" classes={{root: classes.button}} disableElevation component={Link} to={to}>\n                { text }\n            </MuiButton>\n        )\n    } else {\n        return (\n            <MuiButton variant=\"contained\" classes={{root: classes.button}} disableElevation onClick={onClick}>\n                { text }\n            </MuiButton>\n        )\n    }\n};\n\nexport default ThemeButton\n","import {useState} from \"react\";\nimport { useDispatch } from 'react-redux'\nimport {logout as logoutAction} from \"../redux/actions/login-status\";\nimport {openSnackbar} from \"../redux/actions/snackbar\";\nimport useRedirectBack from \"../utils/use-redirect-back\";\n\nconst useLogout = () => {\n    const [loading, setLoading] = useState(false);\n    // const [error, setError] = useState(false);\n    // const [errorMessage, setErrorMessage] = useState('');\n    const dispatch = useDispatch();\n    const goBack = useRedirectBack();\n\n    const clientSideLogout = () => {\n        dispatch(logoutAction());\n        goBack();\n\n        dispatch(openSnackbar('Logout succeeded'))\n    };\n\n    const logout = () => {\n        clientSideLogout()\n    };\n\n    return [loading, logout] as [typeof loading, typeof logout]\n\n};\n\nexport default useLogout","import ThemeButton from \"../commons/theme-button\";\nimport React from \"react\";\nimport {Box, CircularProgress, Grid, Typography} from \"@material-ui/core\";\nimport useLogout from \"../../requests/use-logout\";\n\ninterface LoggedInUserPanelProps {\n    username: string\n}\n\nconst LoggedInUserPanel: React.FC<LoggedInUserPanelProps> = ({username}) => {\n    const [loading, logout] = useLogout();\n\n    return (\n        <Grid container alignItems={\"center\"} justify={\"center\"} spacing={1}>\n            <Grid item>\n                <Typography component={'div'}>\n                    <Box>\n                        { username }\n                    </Box>\n                </Typography>\n            </Grid>\n            <Grid item>\n                {\n                    loading ?\n                        <CircularProgress color=\"secondary\" size={'1rem'}/> :\n                        <ThemeButton text={'Logout'} onClick={logout}/>\n                }\n            </Grid>\n        </Grid>\n    )\n};\n\nexport default LoggedInUserPanel","import ThemeButton from \"../commons/theme-button\";\nimport React from \"react\";\nimport {Grid} from \"@material-ui/core\";\n\nconst AnonymousUserPanel: React.FC = () => {\n    return (\n        <Grid container alignItems={\"center\"} justify={\"center\"} spacing={1}>\n            <Grid item>\n                <ThemeButton text={'Join'} url={'/register'}/>\n            </Grid>\n            <Grid item>\n                <ThemeButton text={'Login'} url={'/login'}/>\n            </Grid>\n        </Grid>\n    )\n};\n\nexport default AnonymousUserPanel","import {Box, Typography} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\nimport React from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        fontFamily: [\n            'Oleo Script Swash Caps',\n            'sans-serif',\n        ].join(','),\n        fontWeight: 700,\n        fontSize: '1.5rem',\n        [theme.breakpoints.up('md')]: {\n            fontSize: '1.75rem',\n        },\n        fontStyle: \"normal\",\n        color: \"#fff\",\n        whiteSpace: 'nowrap'\n    }\n}));\n\nconst Logo: React.FC = () => {\n    const classes = useStyles();\n\n    return (\n        <Typography variant={'h1'} component={'h1'} className={classes.root}>\n            <Box fontWeight={700} textAlign={\"center\"}>\n                <Link to={'/'}>\n                    Blog | XiaoxiHome\n                </Link>\n            </Box>\n        </Typography>\n    )\n};\n\nexport default Logo","import React, {useContext} from 'react';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Grid, Typography} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\nimport LoggedInUserPanel from \"./logged-in-user-panel\";\nimport AnonymousUserPanel from \"./anonymous-user-panel\";\nimport Logo from \"../commons/logo\";\n\ninterface HeaderProps {\n    isLogin: boolean,\n    username: string,\n}\n\nconst useStyles = makeStyles((theme) => ({\n    headerDimension: {\n        width: '100%',\n        height: '80px',\n    },\n    root: {\n        backgroundColor: theme.palette.primary.main,\n        position: 'fixed',\n        zIndex: theme.zIndex.appBar,\n        left: 0,\n        top: 0,\n        color: theme.palette.primary.contrastText,\n        padding: theme.spacing(0, 1)\n    },\n    placeholder: {\n        position: 'relative',\n    },\n    button: {\n        backgroundColor: 'rgba(255,255,255,0.5)',\n        color: '#fff',\n        fontWeight: 700,\n        textTransform: 'capitalize',\n        '&:hover': {\n            backgroundColor: theme.palette.secondary.main\n        }\n    }\n}));\n\n\nconst Header: React.FC<HeaderProps> = ({isLogin, username}) => {\n    const classes = useStyles();\n\n    return (\n        <header className={`${classes.placeholder} ${classes.headerDimension}`}>\n            <Grid container alignItems={\"center\"} justify={\"center\"} className={`${classes.root} ${classes.headerDimension}`}>\n                <Grid item xs={6} md={4}>\n                    <Logo/>\n                </Grid>\n                <Grid item xs={1} md={4}>\n\n                </Grid>\n                <Grid item xs={5} md={4}>\n                    {\n                        isLogin ?\n                            <LoggedInUserPanel username={username}/> :\n                            <AnonymousUserPanel />\n                    }\n                </Grid>\n            </Grid>\n        </header>\n    )\n};\n\n\n\nexport default Header;\n","import {connect} from \"react-redux\";\nimport Header from \"../components/header/header\";\nimport {State} from \"../redux/state\";\n\nfunction mapStateToProps(state: State) {\n    return {\n        isLogin: state.loginStatus.isLogin,\n        username: state.loginStatus.username\n    }\n}\n\nconst HeaderContainer = connect(\n    mapStateToProps\n)(Header);\n\nexport default HeaderContainer;\n","import {useHistory, useLocation} from \"react-router-dom\";\n\nconst useRedirectToLogin = () => {\n    const history = useHistory();\n    const location = useLocation();\n\n    const redirectToLogin = () => {\n        history.push({\n            pathname: \"/login\",\n            state: {\n                from: location.pathname\n            }\n        });\n    };\n\n    return redirectToLogin\n};\n\nexport default useRedirectToLogin","import urls from \"./urls\";\nimport {useDispatch, useStore} from 'react-redux'\nimport { refreshToken as refreshTokenAction } from '../redux/actions/login-status'\nimport {State} from \"../redux/state\";\nimport useRedirectToLogin from \"../utils/use-redirect-to-login\";\n\n/**\n * enhanced fetch with JWT token verification, and token refreshing when needed\n * return a promise of actual fetch if token is valid or refreshed successfully\n * if specified by @param redirect, redirect to login page if token is invalid or expired\n * no need to pass Authorization Header in @param options\n */\nconst useFetchWithTokenVerification = () => {\n    const state = useStore<State>().getState();\n    const isLogin = state.loginStatus.isLogin;\n    const refreshToken = state.loginStatus.token.refresh;\n    const dispatch = useDispatch();\n    const redirectToLogin = useRedirectToLogin();\n\n    const getAccessHeader = (token?: string) => ({\n        'Authorization': `Bearer ${token || state.loginStatus.token.access}`\n    });\n\n    const fetchWithTokenVerification = async (redirect: boolean, url: RequestInfo, options: RequestInit): Promise<Response> => {\n        try {\n            // delete Authorization header in options in case it is provided\n            if (options.headers !== undefined) {\n                const headers = options.headers as Record<string, string>;\n                if (headers['Authorization']) {\n                    delete headers['Authorization'];\n                    options.headers = {...headers}\n                }\n            }\n\n            const noAuthenticationHandler = (): Promise<Response> => {\n                // don't worry about unsolved promise memory leak\n                // https://stackoverflow.com/questions/20068467/does-never-resolved-promise-cause-memory-leak\n                if (redirect) {\n                    return new Promise((resolve, reject) => {\n                        redirectToLogin();\n                    });\n                } else {\n                    return fetch(url, {\n                        ...options\n                    })\n                }\n            };\n\n            // not login\n            if (!isLogin) {\n                return noAuthenticationHandler();\n            }\n\n            // verify if access token still valid\n            const res = await fetch(urls.verifySession, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    ...getAccessHeader()\n                }\n            });\n            const json = await res.json();\n            if (json.status === 'success') {\n                // access token still valid\n                options.headers = {\n                    ...options.headers,\n                    ...getAccessHeader()\n                };\n                return fetch(url, {...options})\n            }\n\n            // access token not valid\n            // try refresh\n            const refreshRes = await fetch(urls.refresh, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    refresh: refreshToken\n                })\n            });\n            const refreshJson = await refreshRes.json();\n            if (refreshJson.status === 'success') {\n                // refresh successful\n                dispatch(refreshTokenAction(refreshJson.data.access));\n                options.headers = {\n                    ...options.headers,\n                    ...getAccessHeader(refreshJson.data.access)\n                };\n                return fetch(url, {...options})\n            }\n\n            // refresh failed\n            return noAuthenticationHandler();\n        } catch (e) {\n            console.log(e);\n            return new Promise((resolve, reject) => {\n                reject(e.messages);\n            });\n        }\n    };\n\n    return fetchWithTokenVerification\n};\n\nexport default useFetchWithTokenVerification;","import {useEffect, useState} from \"react\";\nimport urls from \"./urls\";\nimport {PostData} from \"../components/post-list/post\";\nimport {useStore} from \"react-redux\";\nimport {State} from \"../redux/state\";\nimport useFetchWithTokenVerification from \"./use-fetch-with-token-verification\";\n\nconst useGetPostList = () => {\n    const isLogin = useStore<State>().getState().loginStatus.isLogin;\n    const fetchWithTokenVerification = useFetchWithTokenVerification();\n\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [data, setData] = useState<PostData[] | null>(null);\n\n    useEffect(() => {\n        fetchPostList()\n    }, [isLogin]);\n\n    const fetchPostList = async (\n    ) => {\n        try {\n            if (loading) return;\n\n            // reset states\n            setError(false);\n\n            // start fetching\n            setLoading(true);\n            const res = await fetchWithTokenVerification(false, urls.getPostList, {\n                method: 'GET'\n            });\n            const json = await res.json();\n            setLoading(false);\n\n            if (json.status === 'success') {\n                setData(json.data)\n            } else {\n                console.log(json);\n                setError(true);\n            }\n        } catch (e) {\n            setLoading(false);\n            console.log(e);\n            setError(true);\n        }\n    };\n\n    return [loading, error, data] as [typeof loading, typeof error, typeof data]\n\n};\n\nexport default useGetPostList","const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\nconst getTimeString = (ISOString: string) => {\n    const date = new Date(ISOString);\n    const hour = date.getHours() < 10 ? `0${date.getHours()}` : date.getHours();\n    const minute = date.getMinutes() < 10 ? `0${date.getMinutes()}` : date.getMinutes();\n    return `${date.getDate()} ${months[date.getMonth()]}, ${date.getFullYear()} - ${hour}:${minute}`\n};\n\nexport default getTimeString","import {useState} from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport urls from \"./urls\";\nimport {openSnackbar} from \"../redux/actions/snackbar\";\nimport {PostData} from \"../components/post-list/post\";\nimport useFetchWithTokenVerification from \"./use-fetch-with-token-verification\";\n\ntype Type = 'post' | 'comment';\ntype Action = 1 | 0 | -1;\n\nconst useLike = (type: Type, id: string) => {\n    const fetchWithTokenVerification = useFetchWithTokenVerification();\n\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [updatedData, setUpdatedData] = useState<PostData | null>(null);\n    const dispatch = useDispatch();\n\n    const like = async (\n        action: Action\n    ) => {\n        try {\n            if (loading) return;\n\n            // reset states\n            setError(false);\n            setLoading(true);\n\n            //\n            const res = await fetchWithTokenVerification(true, urls.like, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    \"target_type\": type,\n                    \"target_id\": id,\n                    action\n                })\n            });\n            const json = await res.json();\n            setLoading(false);\n            if (json.status === 'success') {\n                setUpdatedData(json.data)\n            } else {\n                dispatch(openSnackbar(json.message));\n                setError(true)\n            }\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            setError(true);\n            dispatch(openSnackbar('Server is not available please try again later'));\n        }\n    };\n\n    return [loading, error, updatedData, like] as [typeof loading, typeof error, typeof updatedData, typeof like]\n};\n\nexport default useLike","import IconButton from \"@material-ui/core/IconButton\";\nimport ThumbUpRoundedIcon from \"@material-ui/icons/ThumbUpRounded\";\nimport green from \"@material-ui/core/colors/green\";\nimport ThumbDownRoundedIcon from \"@material-ui/icons/ThumbDownRounded\";\nimport red from \"@material-ui/core/colors/red\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport useLike from \"../../requests/use-like\";\n\nconst useStyles = makeStyles((theme) => ({\n    likeButtons: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginLeft: '-14px'\n    },\n    buttonText: {\n        lineHeight: 1,\n        color: theme.palette.grey[\"500\"],\n        fontSize: '0.875rem',\n        fontWeight: 700,\n    },\n    button: {\n        color: theme.palette.grey[\"400\"],\n        fontSize: '1.25rem'\n    },\n}));\n\ninterface LikeButtonsProps {\n    type: 'post' | 'comment',\n    id: string\n    likes: number,\n    dislikes: number,\n    isLiked: 0 | 1 | -1 | undefined\n}\n\nconst LikeButtons: React.FC<LikeButtonsProps> = ({type, id, likes, dislikes, isLiked}) => {\n    const classes = useStyles();\n\n    const [likeLoading, likeError, updatedData, like] = useLike(type, id);\n    if (updatedData !== null) {\n        likes = updatedData.likes;\n        dislikes = updatedData.dislikes;\n        if (updatedData['is_liked'] !== undefined) {\n            isLiked = updatedData['is_liked']\n        }\n    }\n\n    const likedByUser = isLiked === 1;\n    const dislikedByUser = isLiked === -1;\n\n    const likeToggler = () => {\n        likedByUser ? like(0) : like(1);\n    };\n\n    const dislikeToggler = () => {\n        dislikedByUser ? like(0) : like(-1);\n    };\n\n    return (\n        <div className={classes.likeButtons}>\n            <IconButton aria-label={`like ${type}`} disabled={likeLoading} onClick={likeToggler}>\n                <ThumbUpRoundedIcon className={classes.button} style={likedByUser ? {color: green[300]} : {}}/>\n            </IconButton>\n            <div className={classes.buttonText}>\n                { likes }\n            </div>\n            <IconButton aria-label={`dislike ${type}`} disabled={likeLoading} onClick={dislikeToggler}>\n                <ThumbDownRoundedIcon className={classes.button} style={dislikedByUser ? {color: red[300]} : {}}/>\n            </IconButton>\n            <div className={classes.buttonText}>\n                { dislikes }\n            </div>\n        </div>\n    )\n};\n\nexport default LikeButtons","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Chip from \"@material-ui/core/Chip\";\nimport {Box} from \"@material-ui/core\";\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport {Link} from \"react-router-dom\";\n\ninterface TagChipProps {\n    text: string\n    size: 'small' | 'normal'\n}\n\nconst useStyles = makeStyles((theme) => ({\n    inheritColor: {\n        color: theme.palette.primary.contrastText,\n    },\n    chipRoot: {\n        borderRadius: 2,\n        height: 'auto',\n        backgroundColor: fade(theme.palette.primary.main, 0.5),\n        transitions: theme.transitions.create('background-color'),\n        '&:hover': {\n            backgroundColor: theme.palette.primary.main,\n        },\n        '&:focus': {\n            backgroundColor: theme.palette.primary.main,\n        }\n    },\n    chipLabelSmall: {\n        padding: '0 5px',\n        fontSize: theme.typography.caption.fontSize\n    },\n    chipLabelNormal: {\n        padding: '2px 15px',\n        fontSize: theme.typography.caption.fontSize,\n        fontWeight: 700\n    },\n}));\n\nconst TagChip: React.FC<TagChipProps> = ({text, size}) => {\n    const classes = useStyles();\n\n    return (\n        <Box className={classes.inheritColor}>\n            <Chip\n                label={text.toUpperCase()}\n                component={Link}\n                to={'/'}\n                clickable\n                classes={{\n                    clickable: classes.chipRoot,\n                    label: size === 'small' ? classes.chipLabelSmall : classes.chipLabelNormal\n                }}\n            />\n        </Box>\n    )\n};\n\nexport default TagChip","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Paper, Typography} from \"@material-ui/core\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport {Link} from \"react-router-dom\";\nimport getTimeString from \"../../utils/get-time-string\";\nimport LikeButtons from \"../commons/like-buttons\";\nimport TagChip from \"../commons/tag-chip\";\n\nexport interface PostData {\n    id: string\n    title: string,\n    content: string,\n    likes: number,\n    dislikes: number,\n    created: string,\n    comments: number\n    owner: {\n        email: string,\n        username: string,\n        avatar_url: string\n    },\n    tag: string,\n    \"is_liked\"?: 0 | 1 | -1\n}\n\ninterface PostProps {\n    isLogin: boolean,\n    data: PostData\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: theme.spacing(1, 0)\n    },\n    paper: {\n        width: '100%',\n        minHeight: '100px',\n        padding: theme.spacing(2),\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-start'\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.primary.light\n    },\n    content: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'flex-start',\n        justifyContent: 'center',\n    },\n    title: {\n        margin: theme.spacing(0, 2),\n        '& h2': {\n            fontSize: '1.25rem',\n            fontWeight: 700,\n            color: theme.palette.text.primary,\n            margin: theme.spacing(0),\n            lineHeight: 1.2\n        },\n        '& h2:hover': {\n            color: theme.palette.primary.main,\n        }\n    },\n    author: {\n        margin: theme.spacing(0, 2),\n    },\n    actionArea: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        color: theme.palette.grey[\"500\"],\n        fontSize: '0.875rem',\n        fontWeight: 700,\n        [theme.breakpoints.down('md')]: {\n            flexDirection: 'column',\n            alignItems: 'flex-start',\n            justifyContent: 'center',\n        }\n    },\n    actionItem: {\n        margin: theme.spacing(0, 2)\n    }\n}));\n\nconst Post: React.FC<PostProps> = ({isLogin, data}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <Paper className={classes.paper} elevation={0}>\n                <Avatar variant=\"rounded\" className={classes.avatar} src={data.owner.avatar_url}>\n                    { data.owner.username.charAt(0) }\n                </Avatar>\n                <div className={classes.content}>\n                    <div className={classes.title}>\n                        <Link to={`/post/${data.id}`}>\n                            <h2>\n                                { data.title }\n                            </h2>\n                        </Link>\n                    </div>\n                    <div className={classes.author}>\n                        <Typography variant={'caption'} component={'div'}>\n                            <Box>\n                                { data.owner.username }\n                            </Box>\n                        </Typography>\n                    </div>\n                    <div className={classes.author}>\n                        <TagChip text={data.tag} size={'small'}/>\n                    </div>\n                    <div className={classes.actionArea}>\n                        <div className={classes.actionItem}>\n                            <LikeButtons type={'post'} id={data.id} likes={data.likes} dislikes={data.dislikes} isLiked={data.is_liked}/>\n                        </div>\n                        <div className={classes.actionItem}>\n                            { `${data.comments} ${data.comments > 1 ? 'comments' : 'comment'}` }\n                        </div>\n                        <div className={classes.actionItem}>\n                            { getTimeString(data.created) }\n                        </div>\n                    </div>\n                </div>\n            </Paper>\n        </div>\n    )\n};\n\nexport default Post","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport useGetPostList from \"../../requests/use-get-post-list\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport {Box, Typography} from \"@material-ui/core\";\nimport Post from \"./post\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        // padding: theme.spacing(0, 2)\n    }\n}));\n\ninterface PostListProps {\n    isLogin: boolean\n}\n\nconst PostList: React.FC<PostListProps> = ({isLogin}) => {\n    const classes = useStyles();\n\n    const [loading, error, data] = useGetPostList();\n\n    let content;\n    if (loading) {\n        content = (new Array(10)).fill(0).map((_, i) => {\n                return (\n                    <Box width='100%' my={1} borderRadius={'5px'} key={i} overflow={'hidden'}>\n                        <Skeleton variant=\"rect\" animation=\"wave\" width={'100%'} height={150}/>\n                    </Box>\n                )\n            })\n    } else if (error) {\n        content = (\n            <Typography variant={'body1'} component={'h2'}>\n                <Box fontWeight={700} color={'primary.main'} textAlign={'center'}>\n                    Server is unavailable now, please try again later\n                </Box>\n            </Typography>\n        )\n    } else {\n        content = data?.map((_, i) => {\n            return (\n                <Post key={i} isLogin={isLogin} data={_}/>\n            )\n        })\n    }\n\n    return (\n        <div className={classes.root}>\n            { content }\n        </div>\n    )\n};\n\nexport default PostList","import {connect} from \"react-redux\";\nimport {State} from \"../redux/state\";\nimport PostList from \"../components/post-list/post-list\";\n\nfunction mapStateToProps(state: State) {\n    return {\n        isLogin: state.loginStatus.isLogin\n    }\n}\n\n// function mapDispatchToProps(dispatch: Dispatch) {\n//     return {\n//         closeSnackbar: () => dispatch(closeSnackbar())\n//     }\n// }\n\nconst PostListContainer = connect(\n    mapStateToProps\n)(PostList);\n\nexport default PostListContainer;\n","import {Button} from \"@material-ui/core\";\nimport React from \"react\";\nimport {Link} from \"react-router-dom\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        backgroundColor: theme.palette.primary.light,\n        maxWidth: '100%',\n        color: '#fff',\n        fontWeight: 700,\n        textTransform: 'capitalize',\n        letterSpacing: 'inherit',\n        borderBottom: '2px solid rgba(0,0,0,0.1)',\n        borderRadius: '5px',\n        padding: '4px 10px',\n        '& span': {\n            color: '#fff',\n        },\n        '&:hover': {\n            backgroundColor: theme.palette.secondary.main\n        }\n    }\n}));\n\ninterface BaseButtonProps {\n    width: string,\n    text: string\n}\n\ninterface GenericClickButtonProps extends BaseButtonProps {\n    onClick: any,\n    disabled?: boolean\n}\n\nconst GenericClickButton: React.FC<GenericClickButtonProps> = ({width, text, onClick, disabled}) => {\n    const classes = useStyles();\n\n    return (\n            <Button variant=\"contained\" classes={{root: classes.button}} disableElevation onClick={onClick} style={{width: width}} disabled={disabled}>\n                { text }\n            </Button>\n    )\n};\n\ninterface GenericLinkButtonProps extends BaseButtonProps {\n    link: string\n}\n\nconst GenericLinkButton: React.FC<GenericLinkButtonProps> = ({width, text, link}) => {\n    const classes = useStyles();\n\n    return (\n        <Button variant=\"contained\" classes={{root: classes.button}} disableElevation component={Link} to={link} style={{width: width}}>\n            { text }\n        </Button>\n    )\n};\n\nexport {GenericClickButton, GenericLinkButton};","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport {GenericLinkButton} from \"../commons/generic-button\";\n\ninterface SideBarProps {\n    isLogin: boolean\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: 'calc(100% - 16px)',\n        minHeight: '100px',\n        margin: '8px',\n        padding: '24px 0',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        [theme.breakpoints.down('md')]: {\n            width: '100%',\n            margin: '8px 0',\n        }\n    },\n    rowWrapper: {\n        width: '80%',\n        margin: '8px 0'\n    }\n}));\n\nconst SideBar: React.FC<SideBarProps> = ({isLogin}) => {\n    const classes = useStyles();\n\n    return (\n        <Paper className={classes.root} elevation={0}>\n            <div className={classes.rowWrapper}>\n                <GenericLinkButton link={'/edit-post'} width={'100%'} text={'Create Post'}/>\n            </div>\n            {\n                isLogin &&\n                <div className={classes.rowWrapper}>\n                    <GenericLinkButton link={'/account-setting'} width={'100%'} text={'Account Settings'}/>\n                </div>\n            }\n        </Paper>\n    )\n};\n\nexport default SideBar","import {connect} from \"react-redux\";\nimport {State} from \"../redux/state\";\nimport SideBar from \"../components/side-bar/side-bar\";\n\nfunction mapStateToProps(state: State) {\n    return {\n        isLogin: state.loginStatus.isLogin\n    }\n}\n\nconst SideBarContainer = connect(\n    mapStateToProps\n)(SideBar);\n\nexport default SideBarContainer;\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport PostListContainer from \"../../containers/post-list-container\";\nimport SideBarContainer from \"../../containers/side-bar-container\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: theme.spacing(2, 0),\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n        justifyContent: 'center',\n        [theme.breakpoints.down('md')]: {\n            flexDirection: 'column',\n            margin: 0,\n        }\n    },\n    left: {\n        width: \"75%\",\n        [theme.breakpoints.down('md')]: {\n            width: \"100%\",\n        }\n    },\n    right: {\n        width: \"25%\",\n        [theme.breakpoints.down('md')]: {\n            width: \"100%\",\n        }\n    }\n}));\n\ninterface MainPageProps {\n\n}\n\nconst MainPage: React.FC<MainPageProps> = () => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.left}>\n                <PostListContainer />\n            </div>\n            <div className={classes.right}>\n                <SideBarContainer />\n            </div>\n        </div>\n    )\n};\n\nexport default MainPage","import React from \"react\";\nimport {\n    Box,\n    createStyles,\n    IconButton,\n    Snackbar as MuiSnackbar,\n    SnackbarContent,\n} from \"@material-ui/core\";\nimport Close from '@material-ui/icons/Close';\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n\n    },\n    content: {\n        backgroundColor: theme.palette.primary.main,\n    },\n}));\n\ninterface SnackbarProps {\n    open: boolean,\n    closeSnackbar: () => void,\n    message: string\n}\n\nconst Snackbar: React.FC<SnackbarProps> = ({open, closeSnackbar, message}) => {\n    const classes = useStyles();\n\n    return (\n        <MuiSnackbar\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n            }}\n            open={open}\n            autoHideDuration={5000}\n            onClose={closeSnackbar}\n            className={classes.root}\n        >\n            <SnackbarContent\n                className={classes.content}\n                message={\n                    <Typography variant={'body1'} component={'div'}>\n                        <Box fontWeight={700}>\n                            { message }\n                        </Box>\n                    </Typography>\n                }\n                action={[\n                    <IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={closeSnackbar}>\n                        <Close/>\n                    </IconButton>\n                ]}\n            />\n        </MuiSnackbar>\n    )\n};\n\nexport default Snackbar;","import {connect} from \"react-redux\";\nimport Snackbar from \"../components/snackbar/snackbar\";\nimport {State} from \"../redux/state\";\nimport {Dispatch} from \"redux\";\nimport {closeSnackbar} from \"../redux/actions/snackbar\";\n\nfunction mapStateToProps(state: State) {\n    return {\n        open: state.snackbar.open,\n        message: state.snackbar.message\n    }\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        closeSnackbar: () => dispatch(closeSnackbar())\n    }\n}\n\nconst SnackbarContainer = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Snackbar);\n\nexport default SnackbarContainer;\n","import React from \"react\";\nimport {Box, Grid, Paper, Typography} from \"@material-ui/core\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Logo from \"../commons/logo\";\nimport {Link} from \"react-router-dom\";\n\ntype FooterColumnData = {\n    title: string,\n    url: string\n}[]\n\ninterface FooterColumnProps {\n    data: FooterColumnData\n}\n\nconst userStyles = makeStyles((theme) => ({\n    root: {\n        listStyleType: 'none',\n        margin: 0,\n        padding: 0\n    },\n    header: {\n        fontSize: '1.25rem',\n        margin: '8px 0',\n        letterSpacing: '0',\n        fontWeight: 700\n    },\n    content: {\n        fontSize: '0.875rem',\n        padding: '2px',\n        '&:hover': {\n            color: theme.palette.secondary.main\n        }\n    }\n}));\n\nconst FooterColumn: React.FC<FooterColumnProps> = ({data}) => {\n    const classes = userStyles();\n\n    return (\n        <ul className={classes.root}>\n            {\n                data.map((item, i) => {\n                    if (i === 0) {\n                        return (\n                            <li key={i}>\n                                <div className={classes.header}>\n                                    { item.title }\n                                </div>\n                            </li>\n                        )\n                    } else {\n                        return (\n                            <li key={i}>\n                                <a href={item.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                                    <div className={classes.content}>\n                                        { item.title }\n                                    </div>\n                                </a>\n                            </li>\n                            )\n                    }\n                })\n            }\n        </ul>\n    )\n};\n\nexport default FooterColumn","import React from \"react\";\nimport {Grid, Paper} from \"@material-ui/core\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Logo from \"../commons/logo\";\nimport FooterColumn from \"./footer-column\";\n\nconst column1 = [\n    {\n        title: 'Learn More',\n        url: ''\n    },\n    {\n        title: 'API Endpoints',\n        url: 'https://www.google.ca/'\n    },\n    {\n        title: 'GitHub',\n        url: 'https://github.com/CptDoraemon/discussion-board-client'\n    },\n    {\n        title: 'XiaoxiHome',\n        url: 'https://www.xiaoxihome.com/'\n    },\n];\n\nconst userStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        margin: '40px 0 8px 0'\n    },\n    paper: {\n        width: '100%',\n        backgroundColor: '#4a5568',\n        color: '#a0aec0',\n        padding: theme.spacing(5)\n    },\n    copyright: {\n        width: '100%',\n        margin: theme.spacing(5, 0, 0, 0),\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        fontSize: '0.8rem'\n    }\n}));\n\nconst Footer: React.FC = () => {\n    const classes = userStyles();\n\n    return (\n        <footer className={classes.root}>\n            <Paper className={classes.paper}>\n                <Grid container spacing={5}>\n                    <Grid item>\n                        <Logo/>\n                    </Grid>\n                    <Grid item>\n                        <FooterColumn data={column1} />\n                    </Grid>\n                </Grid>\n                <div className={classes.copyright}>\n                    <div>\n                         2020 XiaoxiHome.com\n                    </div>\n                </div>\n            </Paper>\n        </footer>\n    )\n};\n\nexport default Footer","import {\n    Route,\n    Redirect\n} from \"react-router-dom\";\nimport React from \"react\";\n\ninterface PrivateRouteProps {\n    isLogin: boolean,\n    path: string\n}\n\nconst PrivateRoute: React.FC<PrivateRouteProps> = ({ children, isLogin, ...rest}) => {\n    return (\n        <Route\n            {...rest}\n            render={({ location }) =>\n                isLogin ? (\n                    children\n                ) : (\n                    <Redirect\n                        to={{\n                            pathname: \"/login\",\n                            state: { from: location }\n                        }}\n                    />\n                )\n            }\n        />\n    );\n};\n\nexport default PrivateRoute","import {useState} from \"react\";\nimport urls from \"./urls\";\nimport useFetchWithTokenVerification from \"./use-fetch-with-token-verification\";\n\nconst usePostSubmission = () => {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n    const [submitted, setSubmitted] = useState(false);\n    const fetchWithTokenVerification = useFetchWithTokenVerification();\n\n    const submit = async (\n        title: string,\n        tag: string,\n        content: string,\n        objectURLArray: string[],\n        updatePostID?: number\n    ) => {\n        try {\n            if (loading || submitted) return;\n\n            // reset states\n            setError(false);\n            setErrorMessage(' ');\n            setLoading(true);\n\n            //\n            objectURLArray = removeUnusedObjectURL(content, objectURLArray);\n\n            //\n            const form = await getForm(title, tag, content, objectURLArray);\n            const url = updatePostID === undefined ? urls.createPost : urls.editPost(updatePostID);\n            const res = await fetchWithTokenVerification(true, url, {\n                method: 'POST',\n                body: form\n            });\n            const json = await res.json();\n            setLoading(false);\n            if (json.status === 'success') {\n                setSubmitted(true)\n            } else {\n                setErrorMessage(json.message);\n                setError(true)\n            }\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            setErrorMessage('Server is not available please try again later');\n            setError(true)\n        }\n    };\n\n    return [loading, error, errorMessage, submit, submitted] as [typeof loading, typeof error, typeof errorMessage, typeof submit, typeof submitted]\n};\n\nconst removeUnusedObjectURL = (content: string, objectURLArray: string[]) => {\n    // some images may be deleted while editing\n    return objectURLArray.filter(url => content.indexOf(url) !== -1)\n};\n\ninterface NamedBlob {\n    blob: Blob,\n    name: string\n}\n\nconst getForm = (title: string, tag: string, content: string, objectURLArray: string[]) => {\n    return new Promise<FormData>((resolve, reject) => {\n        const form = new FormData();\n        form.append('title', title);\n        form.append('tag', tag);\n\n        const promiseArray = objectURLArray.map((url) => getBlobFromObjectURL(url));\n\n        Promise.all<NamedBlob>(promiseArray)\n            .then(blobs => {\n                blobs.forEach((blob, i) => {\n                    // blob name has format of:\n                    // blob:http://localhost:3000/f4d49560-de4e-420b-bcdf-64bfa833a555\n                    // use the pathname as the filename (eg: f4d49560-de4e-420b-bcdf-64bfa833a555)\n                    // replace the url in content with the new filename\n                    const urlComponents = blob.name.split('/');\n                    let filename = urlComponents[urlComponents.length - 1].length === 0 ?\n                        urlComponents[urlComponents.length - 2] :\n                        urlComponents[urlComponents.length - 1];\n\n                    content = content.replace(blob.name, filename);\n                    // file ext is .jpg because it was loaded with js, drawn in canvas ans exported as jpg\n                    form.append(`file${i}`, blob.blob, blob.name + '.jpg')\n                });\n                form.append('content', content);\n                resolve(form);\n            })\n    })\n};\n\nconst getBlobFromObjectURL = (url: string) => {\n    return new Promise<NamedBlob>((resolve, reject) => {\n        fetch(url)\n            .then(res => res.blob())\n            .then(blob => resolve({\n                blob,\n                name: url\n            }))\n            .catch((e) => reject(e))\n    })\n};\n\nexport default usePostSubmission","import {useEffect, useState} from \"react\";\nimport Quill from \"quill\";\nimport loadImage from \"blueimp-load-image\";\n\nconst objectURLArray: string[] = [];\n\nconst useEditor = (ID: string) => {\n    const [quill, setQuill] = useState<Quill | null>(null);\n\n    useEffect(() => {\n        // override methods to support objectURL\n        const Image = Quill.import('formats/image');\n        const Link = Quill.import('formats/link');\n        Image.sanitize = function(url: string) {\n            return Link.sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n        };\n        //\n        const quillInstance = new Quill(`#${ID}`, {\n            modules: {\n                toolbar: [\n                    [{header: [1, 2, false]}],\n                    ['bold', 'italic', 'underline'],\n                    ['image', 'code-block']\n                ]\n            },\n            placeholder: 'Compose an epic...',\n            theme: 'snow'  // or 'bubble'\n        });\n        quillInstance.getModule('toolbar').addHandler('image', () => imageUploadHandler(quillInstance));\n\n        setQuill(quillInstance)\n    }, [ID]);\n\n    const getObjectURLArray = () => {\n        return objectURLArray\n    };\n\n    const setContent = (content: string) => {\n        if (!quill) return;\n        const delta = quill.clipboard.convert(content);\n        quill.setContents(delta)\n    };\n\n    return [quill, getObjectURLArray, setContent] as [typeof quill, typeof getObjectURLArray, typeof setContent]\n};\n\nconst imageUploadHandler = (editor: Quill) => {\n    const input = document.createElement('input');\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', 'image/*');\n    input.click();\n    input.onchange = () => {\n        if (!input.files) return;\n        const image = input.files[0];\n        loadImage(\n            image,\n             (canvas) => {\n                // @ts-ignore\n                canvas.toBlob((blob) => {\n                    const objectURL = URL.createObjectURL(blob);\n\n                    const range = editor.getSelection();\n                    if (range) {\n                        editor.insertEmbed(range.index, 'image', `${objectURL}`);\n                        objectURLArray.push(objectURL)\n                    }\n                }, 'image/jpeg');\n            },\n            {\n                orientation: true,\n                canvas: true\n            }\n        );\n    }\n};\n\nexport default useEditor;","import {useEffect} from \"react\";\n\nconst defaultTitle = 'Blog | XiaoxiHome';\n\nfunction useSetTitle(title?: string) {\n\n    useEffect(() => {\n        document.title = title || defaultTitle;\n\n        return () => {\n            document.title = defaultTitle;\n        }\n    }, [title]);\n}\n\nexport default useSetTitle;","import {useState} from \"react\";\nimport urls from \"./urls\";\nimport {PostDetailData} from \"../components/post-detail/post-detail\";\nimport useSetTitle from \"../utils/use-set-title\";\nimport useFetchWithTokenVerification from \"./use-fetch-with-token-verification\";\n\nconst useGetPostDetail = () => {\n    const fetchWithTokenVerification = useFetchWithTokenVerification();\n\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [data, setData] = useState<PostDetailData | null>(null);\n\n    useSetTitle(data?.title);\n\n    const fetchPostDetail = async (\n        postID: number\n    ) => {\n        try {\n            if (loading) return;\n\n            // reset states\n            setError(false);\n\n            // start fetching\n            setLoading(true);\n            const res = await fetchWithTokenVerification(false, urls.getPostDetail(postID), {\n                method: 'GET',\n            });\n            const json = await res.json();\n            setLoading(false);\n\n            if (json.status === 'success') {\n                console.log(json.data);\n                setData(json.data)\n            } else {\n                console.log(json);\n                setError(true);\n            }\n        } catch (e) {\n            setLoading(false);\n            console.log(e);\n            setError(true);\n        }\n    };\n\n    return [loading, error, data, fetchPostDetail] as [typeof loading, typeof error, typeof data, typeof fetchPostDetail]\n\n};\n\nexport default useGetPostDetail","import {useEffect, useState} from \"react\";\nimport urls from \"./urls\";\n\nconst useGetTagList = () => {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [data, setData] = useState<string[][] | null>(null);\n\n    useEffect(() => {\n        getTagList()\n    }, []);\n\n    const getTagList = async (\n    ) => {\n        try {\n            if (loading) return;\n\n            // reset states\n            setError(false);\n\n            // start fetching\n            setLoading(true);\n            const res = await fetch(urls.tagList);\n            const json = await res.json();\n            setLoading(false);\n\n            if (json.status === 'success') {\n                setData(json.data)\n            } else {\n                console.log(json);\n                setError(true);\n            }\n        } catch (e) {\n            setLoading(false);\n            console.log(e);\n            setError(true);\n        }\n    };\n\n    return [loading, error, data] as [typeof loading, typeof error, typeof data]\n\n};\n\nexport default useGetTagList","import React, {ChangeEvent, FormEvent, useEffect, useState} from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport 'quill/dist/quill.snow.css';\nimport {FormControl, FormHelperText, Input, InputLabel, Paper} from \"@material-ui/core\";\nimport useInputField from \"../../utils/use-input-field\";\nimport {postTitleValidator} from \"../../utils/validators\";\nimport {GenericClickButton} from \"../commons/generic-button\";\nimport usePostSubmission from \"../../requests/use-post-submission\";\nimport ErrorMessage from \"../commons/error-message\";\nimport useEditor from \"./use-editor\";\nimport useGetPostDetail from \"../../requests/use-get-post-detail\";\nimport Box from \"@material-ui/core/Box\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport useGetTagList from \"../../requests/use-get-tag-list\";\n\nconst ID = 'editor';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        padding: theme.spacing(2)\n    },\n    editor: {\n        width: '100%',\n        minHeight: '300px',\n        marginBottom: '16px',\n    },\n    title: {\n        width: '100%',\n    }\n}));\n\nconst PostEditor: React.FC = () => {\n    const classes = useStyles();\n    const {postID} = useParams();\n    const [needData, setNeedData] = useState(true);\n    const [postDetailLoading, postDetailError, postDetailData, fetchPostDetail] = useGetPostDetail();\n    const [tagListLoading, tagListError, tagList] = useGetTagList();\n\n    useEffect(() => {\n        if (postID === undefined) {\n            setNeedData(false)\n        } else {\n            fetchPostDetail(parseInt(postID))\n        }\n    }, []);\n\n    const showEditor = (!needData || postDetailData !== null) && tagList !== null;\n\n    return (\n        <Paper className={classes.root} elevation={0}>\n            {\n                !showEditor &&\n                    <Box width={\"100%\"} height={500} display={\"flex\"} flexDirection={\"column\"} alignItems={\"center\"} justifyContent={\"center\"}>\n                        {\n                            postDetailError || tagListError ?\n                                \"Cannot retrieve post data at the moment\" :\n                                <CircularProgress color=\"primary\" />\n                        }\n                    </Box>\n            }\n            {\n                !needData && showEditor &&\n                    <PostEditorForm tagList={tagList || []}/>\n            }\n            {\n                postDetailData !== null && showEditor &&\n                    <PostEditorForm\n                        tagList={tagList || []}\n                        updatePost={{\n                            title: postDetailData.title,\n                            content: postDetailData.content,\n                            postID: parseInt(postDetailData.id)\n                        }}\n                    />\n            }\n        </Paper>\n    )\n};\n\ninterface PostEditorFormProps {\n    updatePost?: {\n        title: string,\n        content: string,\n        postID: number\n    },\n    tagList: string[][]\n}\n\nconst PostEditorForm: React.FC<PostEditorFormProps> = ({updatePost, tagList}) => {\n    // create new post if updatePost === undefined\n    // else update existing post\n    const classes = useStyles();\n\n    const [editor, getObjectURLArray, setContent] = useEditor(ID);\n    const [title, titleChangeHandler, titleError, titleErrorMessage, validateTitle] = useInputField(updatePost === undefined ? \"\" : updatePost.title, postTitleValidator);\n    const [tag, setTag] = useState<string>(tagList[0][0]);\n    const [loading, error, errorMessage, submit, submitted] = usePostSubmission();\n\n    useEffect(() => {\n        if (!editor || updatePost === undefined) return;\n        setContent(updatePost.content)\n    }, [editor, updatePost]);\n\n    const submitHandler = (e: FormEvent) => {\n        e.preventDefault();\n        if (!validateTitle()) return;\n\n        if (!editor) return;\n        if (updatePost === undefined) {\n            submit(title, tag, editor.root.innerHTML, getObjectURLArray())\n        } else {\n            submit(title, tag, editor.root.innerHTML, getObjectURLArray(), updatePost.postID)\n        }\n    };\n\n    const tagChangeHandler = (e: any) => {\n        console.log(e.target.value);\n        setTag(e.target.value)\n    };\n\n    return (\n        <form>\n            <FormControl className={classes.title}>\n                <InputLabel htmlFor=\"post-editor-title\">Title</InputLabel>\n                <Input\n                    id=\"post-editor-title\"\n                    aria-describedby=\"post-editor-title-helper-text\"\n                    value={title}\n                    onChange={titleChangeHandler}\n                />\n                <FormHelperText id=\"post-editor-title-helper-text\" error={titleError}>{titleError && titleErrorMessage ? titleErrorMessage : ' '}</FormHelperText>\n            </FormControl>\n\n            <Box mb={2}>\n                <FormControl>\n                    <Select\n                        value={tag}\n                        onChange={tagChangeHandler}\n                        displayEmpty\n                    >\n                        {\n                            tagList.map(arr => <MenuItem value={arr[0]} key={arr[0]}>{arr[1]}</MenuItem>)\n                        }\n                    </Select>\n                </FormControl>\n            </Box>\n\n            <div id={ID} className={classes.editor}/>\n            <GenericClickButton onClick={submitHandler} width={'250px'} text={submitted ? 'Submitted' : 'Submit'} disabled={submitted || loading}/>\n            <ErrorMessage loading={loading} error={error} errorMessage={errorMessage}/>\n        </form>\n    )\n};\n\nexport default PostEditor","import {useHistory, useLocation} from \"react-router-dom\";\n\nconst useReload = () => {\n    const history = useHistory();\n    const location = useLocation();\n\n    const reload = () => {\n        history.replace('/');\n        history.replace(location)\n    };\n\n    return reload\n};\n\nexport default useReload","import {useState} from \"react\";\nimport urls from \"./urls\";\nimport useReload from \"../utils/use-reload\";\nimport useFetchWithTokenVerification from \"./use-fetch-with-token-verification\";\n\nconst useCommentSubmission = () => {\n    const fetchWithTokenVerification = useFetchWithTokenVerification();\n\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n    const reload = useReload();\n\n    const submit = async (\n        content: string,\n        parentPost: string,\n        parentComment: string | null\n    ) => {\n        try {\n            if (loading) return;\n\n            // reset states\n            setError(false);\n            setErrorMessage(' ');\n            setLoading(true);\n\n            //\n            const res = await fetchWithTokenVerification(true, urls.createComment, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    'content': content,\n                    'parent_post': parentPost,\n                    'parent_comment': parentComment\n                })\n            });\n            const json = await res.json();\n            setLoading(false);\n            if (json.status === 'success') {\n                reload()\n            } else {\n                console.log(json);\n                setErrorMessage(json.message);\n                setError(true)\n            }\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            setErrorMessage('Server is not available please try again later');\n            setError(true)\n        }\n    };\n\n    return [loading, error, errorMessage, submit] as [typeof loading, typeof error, typeof errorMessage, typeof submit]\n};\n\nexport default useCommentSubmission","import {TextField} from \"@material-ui/core\";\nimport {GenericClickButton} from \"../commons/generic-button\";\nimport ErrorMessage from \"../commons/error-message\";\nimport React, {FormEvent} from \"react\";\nimport useInputField from \"../../utils/use-input-field\";\nimport {commentValidator} from \"../../utils/validators\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport useCommentSubmission from \"../../requests/use-comment-submission\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        margin: '16px 0'\n    },\n    input: {\n        width: '100%',\n    }\n}));\n\ninterface CommentInputProps {\n    parentPost: string,\n    parentComment: string | null\n}\n\nconst CommentInput: React.FC<CommentInputProps> = ({parentPost, parentComment}) => {\n    const classes = useStyles();\n    const [comment, commentChangeHandler, commentError, commentErrorMessage, validateComment] = useInputField('', commentValidator);\n    const [loading, error, errorMessage, submit] = useCommentSubmission();\n\n    const submitHandler = (e: FormEvent) => {\n        e.preventDefault();\n\n        if (!validateComment()) return;\n        submit(comment, parentPost, parentComment)\n    };\n\n    return (\n        <form className={classes.root}>\n            <TextField\n                id=\"comment-input\"\n                label=\"Leave comment\"\n                name=\"comment\"\n                value={comment}\n                onChange={commentChangeHandler}\n                error={commentError}\n                helperText={commentError && commentErrorMessage ? commentErrorMessage : ' '}\n                variant=\"outlined\"\n                className={classes.input}\n            />\n\n            <GenericClickButton onClick={submitHandler} width={'250px'} text={'Submit'} disabled={loading}/>\n            {\n                error && errorMessage &&\n                <ErrorMessage loading={loading} error={error} errorMessage={errorMessage}/>\n            }\n        </form>\n    )\n};\n\nexport default CommentInput","import Avatar from \"@material-ui/core/Avatar\";\nimport getTimeString from \"../../utils/get-time-string\";\nimport LikeButtons from \"../commons/like-buttons\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport DeleteButton from \"../commons/delete-button\";\nimport EditButton from \"../commons/edit-button\";\nimport {Box} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    postInfo: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        color: theme.palette.grey[500],\n        fontWeight: 700,\n        [theme.breakpoints.down('md')]: {\n            flexDirection: 'column',\n            alignItems: 'flex-start',\n            justifyContent: 'center',\n        }\n    },\n    avatar: {\n        backgroundColor: theme.palette.primary.main\n    },\n    avatarSmall: {\n        width: '1.2rem',\n        height: '1.2rem',\n        fontSize: '0.8rem'\n    },\n    username: {\n        color: theme.palette.text.primary\n    },\n    postInfoItem: {\n        margin: theme.spacing(0, 2),\n        [theme.breakpoints.down('md')]: {\n            margin: '4px 0',\n        }\n    }\n}));\n\ninterface ItemInfoProps {\n    type: 'comment' | 'post',\n    username: string,\n    avatarUrl: string\n    created: string,\n    id: string,\n    likes: number,\n    dislikes: number,\n    isLiked: -1 | 0 | 1 | undefined,\n    small?: boolean\n}\n\nconst ItemInfo: React.FC<ItemInfoProps> = ({type, username, avatarUrl, created, id, likes, dislikes, isLiked, small}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.postInfo}>\n            <div className={classes.postInfoItem}>\n                <Avatar\n                    variant=\"rounded\"\n                    className={small ? `${classes.avatar} ${classes.avatarSmall}` : classes.avatar}\n                    src={avatarUrl}\n                >\n                    { username.charAt(0) }\n                </Avatar>\n            </div>\n            <div className={`${classes.postInfoItem} ${classes.username}`}>\n                { username }\n            </div>\n            <div className={classes.postInfoItem}>\n                { getTimeString(created) }\n            </div>\n            <div className={classes.postInfoItem}>\n                <LikeButtons type={type} id={id} likes={likes} dislikes={dislikes} isLiked={isLiked}/>\n            </div>\n        </div>\n    )\n};\n\nexport default ItemInfo","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport ItemInfo from \"./item-info\";\nimport {SubCommentData} from \"./comment-item\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        // margin: theme.spacing(2, 0),\n        width: '100%',\n    },\n    content: {\n        margin: '32px'\n    },\n}));\n\ninterface SubCommentItemProps {\n    data: SubCommentData\n}\n\nconst SubCommentItem: React.FC<SubCommentItemProps> = ({data}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <ItemInfo\n                type={'comment'}\n                username={data.owner.username}\n                avatarUrl={data.owner.avatar_url}\n                created={data.created}\n                id={data.id}\n                likes={data.likes}\n                dislikes={data.dislikes}\n                isLiked={data.is_liked}\n                small\n            />\n            <div className={classes.content}>\n                { data.content }\n            </div>\n        </div>\n    )\n\n};\n\nexport default SubCommentItem","import React, {useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Divider, Fade, Paper} from \"@material-ui/core\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ItemInfo from \"./item-info\";\nimport ChatIcon from '@material-ui/icons/Chat';\nimport Button from \"@material-ui/core/Button\";\nimport SubCommentItem from \"./sub-comment-item\";\nimport CommentInput from \"./comment-input\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: '20px 0',\n        width: '100%',\n        padding: theme.spacing(2)\n    },\n    content: {\n        margin: '32px'\n    },\n    commentButton: {\n        margin: '0 32px',\n        color: theme.palette.grey[500],\n    },\n    subCommentPanel: {\n        width: 'calc(100% - 32px)',\n        margin: '8px 0 8px 32px',\n        border: `1px solid ${theme.palette.grey[400]}`,\n        borderRadius: '5px',\n        padding: theme.spacing(2)\n    }\n}));\n\ninterface CommentBaseData {\n    id: string,\n    owner: {\n        username: string,\n        email: string,\n        avatar_url: string\n    }\n    likes: number,\n    dislikes: number,\n    content: string,\n    created: string,\n    is_liked: 0 | 1 | -1 | undefined,\n    is_owner?: boolean\n}\n\nexport interface CommentData extends CommentBaseData {\n    sub_comments: CommentBaseData[]\n}\n\nexport interface SubCommentData extends CommentBaseData {}\n\n\ninterface CommentItemProps {\n    data: CommentData,\n    postID: string,\n    isLogin: boolean\n}\n\nconst CommentItem: React.FC<CommentItemProps> = ({data, postID, isLogin}) => {\n    const classes = useStyles();\n\n    const [isCommentPanelOpen, setIsCommentPanelOpen] = useState(false);\n\n    return (\n        <Paper className={classes.root} elevation={0}>\n            <ItemInfo\n                type={'comment'}\n                username={data.owner.username}\n                avatarUrl={data.owner.avatar_url}\n                created={data.created}\n                id={data.id}\n                likes={data.likes}\n                dislikes={data.dislikes}\n                isLiked={data.is_liked}\n                small\n            />\n            <div className={classes.content}>\n                { data.content }\n            </div>\n            <Button\n                variant=\"outlined\"\n                className={classes.commentButton}\n                disableElevation\n                startIcon={<ChatIcon />}\n                onClick={() => setIsCommentPanelOpen(prev => !prev)}\n                size={'small'}\n            >\n                { data.sub_comments.length }\n            </Button>\n\n            {\n                isCommentPanelOpen &&\n                <Fade in={isCommentPanelOpen} timeout={1000}>\n                    <div className={classes.subCommentPanel}>\n                        { !data.sub_comments.length && <Box textAlign={'center'}>No comment yet</Box> }\n                        { data.sub_comments.map((item, i) => <SubCommentItem data={item} key={i}/>) }\n                        { isLogin && <CommentInput parentPost={postID} parentComment={data.id}/> }\n                    </div>\n                </Fade>\n            }\n        </Paper>\n    )\n\n};\n\nexport default CommentItem","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Divider, Paper} from \"@material-ui/core\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CommentInput from \"./comment-input\";\nimport CommentItem, {CommentData} from \"./comment-item\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: '60px 0',\n        width: '100%',\n    },\n    paper: {\n        width: '100%',\n        padding: theme.spacing(4)\n    },\n    loginToLeaveMessage: {\n        width: '100%',\n        height: '200px',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        fontWeight: 700,\n        color: theme.palette.grey[600]\n    }\n}));\n\ninterface CommentListProps {\n    isLogin: boolean,\n    comments: number,\n    postID: string,\n    data: CommentData[]\n}\n\nconst CommentList: React.FC<CommentListProps> = ({isLogin, comments, postID, data}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <Paper className={classes.paper} elevation={0}>\n                <Typography variant={'body1'} component={'div'}>\n                    <Box fontWeight={700}>\n                        { `${comments} ${comments > 1 ? 'comments' : 'comment'}` }\n                    </Box>\n                </Typography>\n                <Divider />\n            </Paper>\n\n                {\n                    data.map((itemData, i) => <CommentItem data={itemData} postID={postID} key={i} isLogin={isLogin}/>)\n                }\n\n            <Paper className={classes.paper} elevation={0}>\n                {\n                    isLogin ?\n                        <CommentInput parentPost={postID} parentComment={null}/> :\n                        <div className={classes.loginToLeaveMessage}>\n                            Login to leave a comment\n                        </div>\n                }\n            </Paper>\n        </div>\n    )\n\n};\n\nexport default CommentList","import {makeStyles} from \"@material-ui/core/styles\";\n\nconst useInsertedHTMLStyle = makeStyles((theme) => ({\n    root: {\n        display: 'column',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: theme.palette.text.primary,\n        whiteSpace: 'normal',\n        '& pre': {\n            whiteSpace: 'pre-wrap',\n            wordWrap: 'break-word'\n        },\n        '& a': {\n            wordWrap: 'break-word',\n            background: `linear-gradient(to bottom, ${theme.palette.primary.light} 0%, ${theme.palette.primary.light} 100%)`,\n            backgroundPosition: '0 100%',\n            backgroundRepeat: 'repeat-x',\n            backgroundSize: '4px 4px',\n            transition: theme.transitions.create(['background-size', 'color']),\n        },\n        '& a:hover': {\n            backgroundSize: '4px 100%',\n            color: theme.palette.primary.contrastText,\n        },\n        '& img': {\n            maxWidth: '100%',\n            maxHeight: '600px',\n            display: 'block',\n            margin: '4px auto'\n        },\n        '& p': {\n\n        }\n        // '& h1': {\n        //     fontSize: '3rem',\n        //     fontWeight: 700\n        // },\n        // '& h2': {\n        //     fontSize: '2.5rem',\n        //     fontWeight: 700\n        // },\n        // '& h3': {\n        //     fontSize: '2rem',\n        //     fontWeight: 700\n        // },\n        // '& h4': {\n        //     fontSize: '1.5rem',\n        //     fontWeight: 700\n        // },\n        // '& h5': {\n        //     fontSize: '1.5rem',\n        //     fontWeight: 700\n        // },\n        // '& p, span': {\n        //     fontSize: '1.25rem',\n        //     lineHeight: 1.5,\n        // }\n    }\n}));\n\nexport default useInsertedHTMLStyle","import {useState} from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport urls from \"./urls\";\nimport {openSnackbar} from \"../redux/actions/snackbar\";\nimport useFetchWithTokenVerification from \"./use-fetch-with-token-verification\";\nimport {useHistory} from \"react-router-dom\";\n\nconst useDelete = () => {\n    const fetchWithTokenVerification = useFetchWithTokenVerification();\n\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const dispatch = useDispatch();\n    let history = useHistory();\n\n    const deletePost = async (\n        id: number\n    ) => {\n        try {\n            if (loading) return;\n\n            // reset states\n            setError(false);\n            setLoading(true);\n\n            //\n            const res = await fetchWithTokenVerification(true, urls.deletePost(id), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            const json = await res.json();\n            setLoading(false);\n            if (json.status === 'success') {\n                history.replace('/');\n                dispatch(openSnackbar('Post deleted'));\n            } else {\n                dispatch(openSnackbar(json.message));\n                setError(true)\n            }\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            setError(true);\n            dispatch(openSnackbar('Server is not available please try again later'));\n        }\n    };\n\n    return [loading, error, deletePost] as [typeof loading, typeof error, typeof deletePost]\n};\n\nexport default useDelete","import IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport React, {useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Tooltip} from \"@material-ui/core\";\nimport useDelete from \"../../requests/use-delete\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        color: theme.palette.warning.light,\n        fontSize: '1.25rem',\n        \"&:hover\": {\n            color: theme.palette.warning.main\n        },\n        \"&:focus\": {\n            color: theme.palette.warning.main\n        }\n    },\n    confirmButton: {\n        color: theme.palette.warning.main\n    }\n}));\n\ninterface DeleteButtonProps {\n    id: number\n}\n\nconst DeleteButton: React.FC<DeleteButtonProps> = ({id}) => {\n    const classes = useStyles();\n    const [loading, error, deletePost] = useDelete();\n    const [dialog, setDialog] = useState(false);\n\n    const openDialog = () => {\n        setDialog(true)\n    };\n\n    const closeDialog = () => {\n        setDialog(false)\n    };\n\n    const doDeletePost = () => {\n        deletePost(id)\n    };\n\n    return (\n        <>\n            <Tooltip title=\"Delete\" aria-label=\"delete\">\n                <IconButton\n                    aria-label={`delete`}\n                    className={classes.button}\n                    disabled={loading}\n                    onClick={openDialog}\n                >\n                    <DeleteIcon/>\n                </IconButton>\n            </Tooltip>\n            <Dialog\n                open={dialog}\n                onClose={closeDialog}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogTitle id=\"alert-dialog-title\">Are you sure to delete this post?</DialogTitle>\n                <DialogContent>\n                    <DialogContentText id=\"alert-dialog-description\">\n                        It will not be possible to recover this post once deleted.\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={closeDialog} color=\"primary\">\n                        Forget it\n                    </Button>\n                    <Button onClick={doDeletePost} autoFocus disabled={loading} className={classes.confirmButton}>\n                        I'm sure\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    )\n};\n\nexport default DeleteButton","import IconButton from \"@material-ui/core/IconButton\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Tooltip} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\nimport Box from \"@material-ui/core/Box\";\n\nconst useStyles = makeStyles((theme) => ({\n    textColor: {\n        color: theme.palette.success.light,\n    },\n    button: {\n        fontSize: '1.25rem',\n        \"&:hover\": {\n            color: theme.palette.success.main\n        },\n        \"&:focus\": {\n            color: theme.palette.success.main\n        }\n    },\n}));\n\ninterface EditButtonProps {\n    id: number\n}\n\nconst EditButton: React.FC<EditButtonProps> = ({id}) => {\n    const classes = useStyles();\n\n    return (\n        <Tooltip title=\"Edit\" aria-label=\"edit\">\n            <Box className={classes.textColor}>\n                <IconButton\n                    aria-label={`edit`}\n                    component={Link}\n                    to={`/edit-post/${id}`}\n                    classes={{\n                        root: classes.button\n                    }}\n                >\n                    <EditIcon/>\n                </IconButton>\n            </Box>\n        </Tooltip>\n    )\n};\n\nexport default EditButton","import React, {useEffect, useRef} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Paper} from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\nimport useGetPostDetail from \"../../requests/use-get-post-detail\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport CommentList from \"./comment-list\";\nimport ItemInfo from \"./item-info\";\nimport {CommentData} from \"./comment-item\";\nimport Box from \"@material-ui/core/Box\";\nimport useInsertedHTMLStyle from \"./inserted-html-style\";\nimport DeleteButton from \"../commons/delete-button\";\nimport EditButton from \"../commons/edit-button\";\nimport TagChip from \"../commons/tag-chip\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n    },\n    paper: {\n        width: '100%',\n        padding: theme.spacing(4)\n    },\n    loading: {\n        width: '100%',\n        height: '500px'\n    },\n    center: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center'\n    }\n}));\n\nexport interface PostDetailData {\n    id: string,\n    owner: {\n        email: string,\n        username: string,\n        avatar_url: string\n    }\n    likes: number,\n    dislikes: number,\n    comments: number,\n    comments_data: CommentData[]\n    title: string,\n    content: string,\n    created: string,\n    tag: string,\n    is_liked: 0 | 1 | -1 | undefined,\n    is_owner?: boolean\n}\n\ninterface PostDetailProps {\n    isLogin: boolean\n}\n\nconst PostDetail: React.FC<PostDetailProps> = ({isLogin}) => {\n    const classes = useStyles();\n    const insertedHTMLClasses = useInsertedHTMLStyle();\n    const HTMLStringContainerRef = useRef<HTMLDivElement>(null);\n\n    const { postID } = useParams();\n    const [loading, error, data, fetchPostDetail] = useGetPostDetail();\n    useEffect(() => {\n        fetchPostDetail(parseInt(postID || '1'))\n    }, []);\n\n    let content;\n    if (loading) {\n        content = (\n            <div className={classes.loading}>\n                <Skeleton variant=\"rect\" width={'100%'} height={60} />\n                { (new Array(10)).fill(0).map((_, i) => <Skeleton variant=\"text\" width={'100%'} key={i}/>)}\n            </div>\n        )\n    } else if (error) {\n        content = (\n            <Box className={classes.center} height={500}>\n                <h1>Server error</h1>\n            </Box>\n        )\n    } else if (data) {\n        content = (\n            <>\n                <Paper className={classes.paper} elevation={0}>\n                    <Box width={'100%'}>\n                        <TagChip text={data.tag} size={'normal'}/>\n                    </Box>\n                    <h1> {data.title} </h1>\n                    <ItemInfo\n                        type={'post'}\n                        username={data.owner.username}\n                        avatarUrl={data.owner.avatar_url}\n                        created={data.created}\n                        id={data.id}\n                        likes={data.likes}\n                        dislikes={data.dislikes}\n                        isLiked={data.is_liked}\n                    />\n                    <Box className={classes.center} my={2}>\n                        {\n                            data.is_owner &&\n                                <>\n                                    <DeleteButton id={parseInt(data.id)}/>\n                                    <EditButton id={parseInt(data.id)}/>\n                                </>\n                        }\n                    </Box>\n                    <Box width={'100%'} height={'40px'}> </Box>\n                    <div dangerouslySetInnerHTML={{__html: data.content}} className={insertedHTMLClasses.root} ref={HTMLStringContainerRef}/>\n                </Paper>\n                <CommentList comments={data.comments} isLogin={isLogin} postID={data.id} data={data.comments_data}/>\n            </>\n        )\n    }\n\n    return (\n        <div className={classes.root}>\n            { content }\n        </div>\n    )\n\n};\n\nexport default PostDetail","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function RouterScrollRestoration() {\n    const { pathname } = useLocation();\n\n    useEffect(() => {\n        window.scrollTo(0, 0);\n    }, [pathname]);\n\n    return null;\n}","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Paper, Typography} from \"@material-ui/core\";\n\ninterface SectionTitleProps {\n    sectionTitle: string\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        minHeight: '100px',\n    },\n    sectionTitle: {\n        width: '100%',\n        padding: theme.spacing(1, 2),\n        backgroundColor: theme.palette.primary.light,\n        fontWeight: 700,\n        color: '#fff'\n    },\n    content: {\n        width: '100%',\n        padding: theme.spacing(2),\n    }\n}));\n\nconst SectionWrapper: React.FC<SectionTitleProps> = ({children, sectionTitle}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <Typography variant={'body1'} component={'h3'}>\n                <Box className={classes.sectionTitle}>\n                    { sectionTitle }\n                </Box>\n            </Typography>\n            <div className={classes.content}>\n                { children }\n            </div>\n        </div>\n    )\n};\n\nexport default SectionWrapper","import {Crop} from \"react-image-crop\";\n// import EXIF from \"exif-js/exif\";\n\nconst SIZE = 800;\n\nfunction getCroppedImg(image: HTMLImageElement, crop: Crop, scale: number, fileName: string) {\n    const [x, y, width, height] = [crop.x, crop.y, crop.width, crop.height].map(_ => _ === undefined ? 1 : _);\n\n    const canvas = document.createElement('canvas');\n    canvas.width = SIZE;\n    canvas.height = SIZE;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return null;\n\n    // As Base64 string\n    // const base64Image = canvas.toDataURL('image/jpeg');\n\n    // As a blob\n    return new Promise<Blob>(async (resolve, reject) => {\n        try {\n            // await rotateAsPerExif(image, ctx, canvas.width, canvas.height);\n            ctx.drawImage(\n                image,\n                x * scale,\n                y * scale,\n                width * scale,\n                height * scale,\n                0,\n                0,\n                SIZE,\n                SIZE,\n            );\n            canvas.toBlob(blob => {\n                if (blob) {\n                    resolve(blob);\n                }\n            }, 'image/jpeg', 1);\n        } catch (e) {\n            throw e\n        }\n    });\n}\n\n// const rotateAsPerExif = (image: HTMLImageElement, ctx: CanvasRenderingContext2D, canvasWidth: number, canvasHeight: number) => {\n//     return new Promise((resolve, reject) => {\n//         // @ts-ignore\n//         EXIF.getData(image, function(this: HTMLImageElement) {\n//             console.log(ctx)\n//             const orientation = EXIF.getTag(this,\"Orientation\");\n//             switch (orientation) {\n//                 case 2: ctx.translate(canvasWidth, 0);     ctx.scale(-1,1); break;\n//                 case 3: ctx.translate(canvasWidth,canvasHeight); ctx.rotate(Math.PI); break;\n//                 case 4: ctx.translate(0,canvasHeight);     ctx.scale(1,-1); break;\n//                 case 5: ctx.rotate(0.5 * Math.PI);   ctx.scale(1,-1); break;\n//                 case 6:\n//                     ctx.rotate(0.5 * Math.PI);\n//                     ctx.translate(0,-canvasHeight);\n//                     break;\n//                 case 7: ctx.rotate(0.5 * Math.PI);   ctx.translate(canvasWidth,-canvasHeight); ctx.scale(-1,1); break;\n//                 case 8: ctx.rotate(-0.5 * Math.PI);  ctx.translate(-canvasWidth,0); break;\n//             }\n//             resolve()\n//         })\n//     })\n// };\n\nexport default getCroppedImg","import React, {useEffect, useMemo, useRef, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {GenericClickButton} from \"../../commons/generic-button\";\nimport {Box} from \"@material-ui/core\";\nimport ReactCrop, {Crop} from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport ErrorMessage from \"../../commons/error-message\";\nimport getCroppedImg from \"./get-cropped-image\";\nimport useUpdateAvatar from \"../../../requests/use-update-avatar\";\nimport useResizeImage, {getWidthHeight} from \"./use-resize-image\";\nimport loadImage from 'blueimp-load-image'\n\nenum Stage {\n    'UPLOAD' = 'UPLOAD',\n    'CROP' = 'CROP',\n    'CONFIRM' = 'CONFIRM',\n    'FINISH' = 'FINISH'\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center'\n    },\n    row: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-start'\n    },\n    backNextButtons: {\n        width: '100%',\n        margin: theme.spacing(1, 0),\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n    },\n    centering: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center'\n    }\n}));\n\ninterface FinishStageProps {\n    restart: () => void\n}\n\nconst FinishStage: React.FC<FinishStageProps> = ({restart}) => {\n    const classes = useStyles();\n\n    return (\n        <>\n            <div className={classes.backNextButtons}>\n                <GenericClickButton onClick={restart} width={'150px'} text={'Start Again'}/>\n            </div>\n            <div className={'centering'}>\n                <Box fontWeight={700} my={2}>\n                    All set\n                </Box>\n            </div>\n        </>\n    )\n};\n\ninterface ConfirmStageProps {\n    blob: Blob | null,\n    back: () => void,\n    next: () => void,\n}\n\nconst ConfirmStage: React.FC<ConfirmStageProps> = ({blob, back, next}) => {\n    const classes = useStyles();\n\n    const [loading, error, errorMessage, upload] = useUpdateAvatar();\n    const containerRef = useRef<HTMLDivElement>(null);\n    const src = useMemo(() => {\n        return URL.createObjectURL(blob)\n    }, [blob]);\n    const [imgWidth, imgHeight] = useResizeImage(containerRef, src);\n\n    const GoNext = async () => {\n        try {\n            if (blob) {\n                const uploaded = await upload(blob);\n                if (uploaded) {\n                    next();\n                }\n            }\n        } catch (e) {}\n    };\n\n    return (\n        <>\n            <div className={classes.backNextButtons}>\n                <Box>\n                    <GenericClickButton onClick={back} width={'150px'} text={'Redo Cropping'}/>\n                </Box>\n                <Box>\n                    <GenericClickButton onClick={GoNext} width={'150px'} text={'Update Avatar'} disabled={loading}/>\n                </Box>\n            </div>\n            <ErrorMessage loading={loading} error={error} errorMessage={errorMessage}/>\n            {\n                !loading &&\n                <div className={classes.centering} ref={containerRef}>\n                    <img\n                        src={src}\n                        alt={'cropped'}\n                        style={{\n                            width: imgWidth,\n                            height: imgHeight\n                        }}/>\n                </div>\n            }\n        </>\n    )\n};\n\ninterface CropStageProps {\n    src: string,\n    back: () => void,\n    next: (blob: Blob) => void\n}\n\nconst CropStage: React.FC<CropStageProps> = ({src, back, next}) => {\n    const classes = useStyles();\n    const [error, setError] = useState(false);\n    const [image, setImage] = useState<HTMLImageElement | null>(null);\n    const [crop, setCrop] = useState<Crop>({});\n    const cropperWrapperRef = useRef<HTMLDivElement>(null);\n    const [cropperSize, setCropperSize] = useState({\n        width: 1,\n        height: 1\n    });\n\n    const goNext = async () => {\n        try {\n            if (!image) return;\n            const croppedSrc = await getCroppedImg(image, crop, image.naturalWidth / cropperSize.width, ' ');\n            if (croppedSrc) {\n                next(croppedSrc);\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    };\n\n    const handleImageLoaded = (image: HTMLImageElement) => {\n        setImage(image);\n        if (cropperWrapperRef.current) {\n            const [width, height] = getWidthHeight(\n                cropperWrapperRef.current.getBoundingClientRect().width,\n                image.naturalWidth,\n                image.naturalHeight\n            );\n            setCropperSize({\n                width,\n                height\n            });\n        }\n    };\n\n    useEffect(() => {\n        const width = cropperSize.width;\n        const height = cropperSize.height;\n        if (width >= height) {\n            const x = Math.round((width - height) / 2);\n            setCrop({\n                aspect: 1,\n                unit: 'px',\n                height: height,\n                width: height,\n                x,\n                y: 0\n            })\n        } else {\n            const y = Math.round((height - width) / 2);\n            setCrop({\n                aspect: 1,\n                unit: 'px',\n                height: width,\n                width: width,\n                x: 0,\n                y\n            })\n        }\n    }, [cropperSize.width, cropperSize.height]);\n\n\n    return (\n        <>\n            <div className={classes.backNextButtons}>\n                <Box justifySelf={'flex-start'}>\n                    <GenericClickButton onClick={back} width={'150px'} text={'Repick'}/>\n                </Box>\n                <Box justifySelf={'flex-end'}>\n                    <GenericClickButton onClick={goNext} width={'150px'} text={'Crop'}/>\n                </Box>\n            </div>\n            <ErrorMessage loading={false} error={false} errorMessage={''}/>\n            <div ref={cropperWrapperRef} className={classes.centering}>\n                <ReactCrop\n                    src={src}\n                    crop={crop}\n                    onChange={(newCrop) => setCrop(newCrop)}\n                    ruleOfThirds={true}\n                    onImageError={() => setError(true)}\n                    onImageLoaded = {handleImageLoaded}\n                    style={{\n                        width: cropperSize.width,\n                        height: cropperSize.height\n                    }}\n                />\n            </div>\n            {\n                error &&\n                <ErrorMessage loading={false} error={true} errorMessage={'Image can\\'t be loaded'}/>\n            }\n        </>\n    )\n};\n\ninterface UploadStageProps {\n    next: (src: string) => void,\n}\n\nconst UploadStage: React.FC<UploadStageProps> = ({next}) => {\n    const classes = useStyles();\n    const inputRef = useRef<HTMLInputElement>(null);\n    const [link, setLink] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    const openFileInput = () => {\n        inputRef.current?.click();\n    };\n\n    const handleFiles = () => {\n        if (\n            inputRef.current &&\n            inputRef.current.files &&\n            inputRef.current.files.length\n        ) {\n            if (loading) return;\n            setLoading(true);\n            loadImage(\n                inputRef.current.files[0],\n                (img) => {\n                    // @ts-ignore\n                    next(img.toDataURL('image/jpeg'));\n                },\n                {\n                    orientation: true,\n                    canvas: true\n                }\n            );\n        }\n    };\n\n    useEffect(() => {\n        const input = inputRef.current;\n        input?.addEventListener('change', handleFiles);\n        return () => {\n            input?.removeEventListener('change', handleFiles);\n        }\n    }, []);\n\n    return (\n        <div style={{width: '100%'}}>\n            {/*<Box width={'80%'}>*/}\n                {/*<Box my={1}>*/}\n                {/*    <TextField label=\"From Link\" fullWidth value={link} onChange={(e) => setLink(e.currentTarget.value)}/>*/}\n                {/*</Box>*/}\n                <div className={classes.centering}>\n                    {/*<Box>*/}\n                    {/*    <GenericClickButton onClick={() => next(link)} width={'150px'} text={'Get Image'}/>*/}\n                    {/*</Box>*/}\n                    {/*<Box mx={1}> or </Box>*/}\n                    <Box my={2}>\n                        {\n                            loading ?\n                                <ErrorMessage loading={true} error={false} errorMessage={''} /> :\n                                <Box>\n                                    <GenericClickButton onClick={openFileInput} width={'150px'} text={'Upload From Disk'} disabled={loading}/>\n                                </Box>\n                        }\n                    </Box>\n                    <input type=\"file\" ref={inputRef} accept=\"image/*\" style={{display: 'none'}}/>\n                </div>\n            {/*</Box>*/}\n        </div>\n    )\n};\n\ninterface UpdateAvatarProps {\n\n}\n\nconst UpdateAvatar: React.FC<UpdateAvatarProps> = ({}) => {\n    const classes = useStyles();\n\n    const [stage, setStage] = useState(Stage.UPLOAD);\n    const [imageSrc, _setImageSrc] = useState('');\n    const [croppedImageBlob, _setCroppedImageBlob] = useState<Blob | null>(null);\n\n    const moveToUploadStage = () => {\n        setStage(Stage.UPLOAD)\n    };\n\n    const moveToCropStage = (src: string) => {\n        _setImageSrc(src);\n        setStage(Stage.CROP);\n    };\n\n    const backToCropStage = () => {\n        setStage(Stage.CROP);\n    };\n\n    const moveToConfirmStage = (cropped: Blob) => {\n        _setCroppedImageBlob(cropped);\n        setStage(Stage.CONFIRM);\n    };\n\n    const moveToFinishStage = () => {\n        setStage(Stage.FINISH);\n    };\n\n    let content;\n    switch (stage) {\n        case Stage.UPLOAD:\n            content = <UploadStage next={moveToCropStage} />;\n            break;\n        case Stage.CROP:\n            content = <CropStage src={imageSrc} back={moveToUploadStage} next={moveToConfirmStage}/>;\n            break;\n        case Stage.CONFIRM:\n            content = <ConfirmStage blob={croppedImageBlob} back={backToCropStage} next={moveToFinishStage}/>;\n            break;\n        case Stage.FINISH:\n            content = <FinishStage restart={moveToUploadStage}/>;\n            break;\n        default:\n            content = <UploadStage next={moveToCropStage} />;\n    }\n\n    return (\n        <div className={classes.root}>\n            { content }\n        </div>\n    )\n};\n\nexport default UpdateAvatar","import {useState} from \"react\";\nimport urls from \"./urls\";\nimport useFetchWithTokenVerification from \"./use-fetch-with-token-verification\";\n\nconst useUpdateAvatar = () => {\n    const fetchWithTokenVerification = useFetchWithTokenVerification();\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const upload = (\n        file: File | Blob\n    ) => {\n        return new Promise((resolve, reject) => {\n            if (loading) {\n                reject();\n                return\n            }\n\n            // reset states\n            setError(false);\n            setErrorMessage('');\n\n            // start fetching\n            setLoading(true);\n            const form = new FormData();\n            form.append('image', file, \"avatar.jpg\");\n\n            fetchWithTokenVerification(true, urls.updateAvatar, {\n                method: 'POST',\n                body: form\n            })\n                .then((res) => res.json())\n                .then(json => {\n                    setLoading(false);\n                    console.log(json);\n\n                    if (json.status === 'success') {\n                        resolve(true);\n                        return\n                    } else {\n                        setError(true);\n                        if (json.status === 'error') {\n                            setErrorMessage(json.message)\n                        } else {\n                            setErrorMessage('Server unavailable, please try again later.')\n                        }\n                        reject();\n                    }\n                })\n                .catch(e => {\n                    setLoading(false);\n\n                    setError(true);\n                    setErrorMessage('Server unavailable, please try again later.');\n                    reject();\n                });\n        });\n    };\n\n    return [loading, error, errorMessage, upload] as [boolean, boolean, string, typeof upload]\n\n};\n\nexport default useUpdateAvatar","import {RefObject, useEffect, useState} from \"react\";\n\nconst WIDTH = 500;\nconst HEIGHT = 500;\n// try to size the wrapper within the constraints\n// target is no bigger than WIDTH * HEIGHT\n// on smaller screens (maxWidth < WIDTH) the target is SHORTER_EDGE * SHORTER_EDGE\n\nconst useResizeImage = (ref: RefObject<HTMLDivElement>, src: string) => {\n    const [width, setWidth] = useState(0);\n    const [height, setHeight] = useState(0);\n\n    const loadImage = () => {\n        const image = new Image();\n        image.src = src;\n        image.onload = () => resize(image)\n    };\n\n    const resize = (image: HTMLImageElement) => {\n        if (!src || !ref.current) return;\n        const containerWidth = ref.current.getBoundingClientRect().width;\n        const [finalWidth, finalHeight] = getWidthHeight(containerWidth, image.naturalWidth, image.naturalHeight);\n\n        setWidth(finalWidth);\n        setHeight(finalHeight);\n    };\n\n    useEffect(() => {\n        loadImage()\n    }, [ref, src]);\n\n    return [width, height] as [typeof width, typeof height]\n};\n\nconst getWidthHeight = (containerWidth: number, imageNaturalWidth: number, imageNaturalHeight: number) => {\n    const maxWidth = Math.min(WIDTH, containerWidth) || 1;\n    const maxHeight = maxWidth;\n\n    let width = 1;\n    let height = 1;\n    if (imageNaturalWidth >= imageNaturalHeight) {\n        width = maxWidth;\n        height = (width / imageNaturalWidth) * imageNaturalHeight\n    } else {\n        height = maxHeight;\n        width = (height / imageNaturalHeight) * imageNaturalWidth\n    }\n\n    // do no enlarge\n    const finalWidth = Math.min(imageNaturalWidth, Math.round(width));\n    const finalHeight = Math.min(imageNaturalHeight, Math.round(height));\n\n    return [finalWidth, finalHeight] as [typeof finalWidth, typeof finalHeight]\n};\n\nexport {\n    useResizeImage as default,\n    getWidthHeight\n}","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Paper, Typography} from \"@material-ui/core\";\nimport SectionWrapper from \"./section-wrapper\";\nimport UpdateAvatar from \"./update-avatar/update-avatar\";\n\ninterface AccountSettingProps {\n    username: string\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: theme.spacing(1, 0),\n        width: '100%'\n    },\n    paper: {\n        width: '100%',\n        minHeight: '100px',\n        overflow: 'hidden'\n        // display: 'flex',\n        // flexDirection: 'row',\n        // alignItems: 'center',\n        // justifyContent: 'flex-start'\n    }\n}));\n\nconst AccountSetting: React.FC<AccountSettingProps> = ({username}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <Typography variant={'body1'} component={'h2'}>\n                <Box my={2} fontWeight={700}>\n                    { username }\n                </Box>\n            </Typography>\n            <Paper className={classes.paper} elevation={0}>\n                <SectionWrapper sectionTitle={'Avatar'}>\n                    <UpdateAvatar />\n                </SectionWrapper>\n            </Paper>\n        </div>\n    )\n};\n\nexport default AccountSetting","import {connect} from \"react-redux\";\nimport AccountSetting from \"../components/account-setting/account-setting\";\nimport {State} from \"../redux/state\";\n\nfunction mapStateToProps(state: State) {\n    return {\n        username: state.loginStatus.username\n    }\n}\n\nconst AccountSettingContainer = connect(\n    mapStateToProps\n)(AccountSetting);\n\nexport default AccountSettingContainer;\n","import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route\n} from \"react-router-dom\";\nimport {connect} from 'react-redux';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Login from \"./components/login/login\";\nimport Register from \"./components/login/register\";\nimport HeaderContainer from \"./containers/header-container\";\nimport MainPage from \"./components/main-page/main-page\";\nimport SnackbarContainer from \"./containers/snackbar-container\";\nimport Footer from \"./components/footer/footer\";\nimport PrivateRoute from \"./utils/protected-router\";\nimport PostEditor from \"./components/post-editor/post-editor\";\nimport {State} from \"./redux/state\";\nimport PostDetail from \"./components/post-detail/post-detail\";\nimport RouterScrollRestoration from \"./utils/router-scroll-restoration\";\nimport AccountSettingContainer from \"./containers/account-setting-container\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        maxWidth: '100vw',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'flex-start'\n    },\n    widthWrapper: {\n        margin: theme.spacing(5, 0, 0, 0),\n        width: '1000px',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        [theme.breakpoints.down('sm')]: {\n            width: 'calc(100% - 16px)',\n            margin: theme.spacing(0, 1),\n        }\n    }\n}));\n\ninterface InnerAppProps {\n    isLogin: boolean\n}\n\nconst InnerApp: React.FC<InnerAppProps> = ({isLogin}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <Router basename={process.env.PUBLIC_URL}>\n                <RouterScrollRestoration />\n                <HeaderContainer />\n                <div className={classes.widthWrapper}>\n                    <Switch>\n                        <Route path=\"/\" exact render={ () => <MainPage /> } />\n                        <Route path=\"/login\" render={ () => <Login /> } />\n                        <Route path=\"/register\" render={ () => <Register /> } />\n                        <Route path=\"/post/:postID\" render={ () => <PostDetail isLogin={isLogin}/> } />\n                        <PrivateRoute path=\"/edit-post/:postID?\" isLogin={isLogin}>\n                            <PostEditor/>\n                        </PrivateRoute>\n                        <PrivateRoute path=\"/account-setting\" isLogin={isLogin}>\n                            <AccountSettingContainer/>\n                        </PrivateRoute>\n                        {/*<Route path=\"/welcome\" component={Welcome} />*/}\n                    </Switch>\n                    <Footer />\n                </div>\n            </Router>\n\n            <SnackbarContainer />\n        </div>\n    )\n};\n\nfunction mapStateToProps(state: State) {\n    return {\n        isLogin: state.loginStatus.isLogin\n    }\n}\n\nconst InnerAppContainer = connect(\n    mapStateToProps,\n)(InnerApp);\n\nexport default InnerAppContainer;\n","import React from 'react';\nimport {Provider} from 'react-redux';\nimport configureStore from \"./redux/configure-store\";\nimport { CssBaseline } from \"@material-ui/core\";\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport theme from './theme';\nimport InnerApp from \"./inner-app\";\n\nconst store = configureStore();\n\ninterface AppProps {\n\n}\n\nconst App: React.FC<AppProps> = () => {\n    return (\n        <Provider store={store}>\n        <ThemeProvider theme={theme}>\n        <CssBaseline />\n            <InnerApp />\n        </ThemeProvider>\n        </Provider>\n    )\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}