(this["webpackJsonpdiscussion-board-client"]=this["webpackJsonpdiscussion-board-client"]||[]).push([[0],{125:function(e,t,a){e.exports=a(161)},130:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(12),c=a.n(i),s=(a(130),a(11)),l=a(44),m={loginStatus:{isLogin:!1,username:"",token:{access:"",refresh:""}},snackbar:{open:!1,message:""}};function u(e){return{type:n.UPDATE_LOGIN_STATUS,newStatus:e}}!function(e){e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.LOGOUT="LOGOUT",e.REFRESH_TOKEN="REFRESH_TOKEN"}(n||(n={}));var d,p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.loginStatus,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.UPDATE_LOGIN_STATUS:case n.LOGOUT:return t.newStatus;case n.REFRESH_TOKEN:var a=Object.assign({},e);return a.token.access=t.newAccessToken,a;default:return e}};function f(e){return{type:d.OPEN,message:e}}!function(e){e.CLOSE="CLOSE",e.OPEN="OPEN"}(d||(d={}));var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.snackbar,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.OPEN:return{open:!0,message:t.message};case d.CLOSE:return m.snackbar;default:return e}},b=Object(l.c)({loginStatus:p,snackbar:g}),h=a(107),E=Object(h.createLogger)();function v(){return Object(l.d)(b,m,Object(l.a)(E))}var j,O=a(204),x=a(199),y=a(8),S=a(116),k=a(207),w=Object(S.a)({palette:{primary:{main:"#805ad5",contrastText:"#fff"},secondary:{main:"#f6ad55",contrastText:"#fff"},text:{primary:"#4a5568"}},typography:{fontFamily:"system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500}});(w=Object(k.a)(w)).typography.h1=(j={fontFamily:["Open-sans","sans-serif"].join(","),fontWeight:800,fontSize:"1.25rem"},Object(y.a)(j,w.breakpoints.up("md"),{fontSize:"1.5rem"}),Object(y.a)(j,"fontStyle","normal"),Object(y.a)(j,"color","inherit"),j);var N=w,C=a(16),T=a(43),L=a(189),I=a(7),W=a(163),D=function(e){var t=Object(r.useState)(0),a=Object(I.a)(t,2),n=a[0],o=a[1];return Object(r.useEffect)((function(){e.current&&o(e.current.getBoundingClientRect().height)}),[e]),n},_=Object(L.a)((function(e){return{root:{width:"100%",margin:e.spacing(2,0),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},image:Object(y.a)({width:"40%",height:"100%","& img":{width:"100%",height:"100%",objectFit:"cover"}},e.breakpoints.down("sm"),{display:"none"}),content:Object(y.a)({width:"60%",padding:e.spacing(10,5)},e.breakpoints.down("sm"),{width:"100%"}),textField:{width:"100%",fontWeight:700},link:{fontWeight:700,"& a:link":{color:e.palette.primary.main},"& a:visited":{color:e.palette.primary.main},"& a:hover":{color:e.palette.secondary.main}}}})),P=function(e){var t=e.children,a=e.imageUrl,n=_(),i=Object(r.useRef)(null),c=D(i);return o.a.createElement(W.a,{elevation:0,className:n.root,ref:i},o.a.createElement("div",{className:n.image},o.a.createElement("img",{src:"/discussion-board-client"+a,alt:"login background",style:{height:"".concat(c,"px")},title:"login background"})),o.a.createElement("div",{className:n.content},t))},A=a(195),U=a(192),F=a(208),z=a(205),H=a(198),M=a(191),R=Object(L.a)((function(e){return{button:{width:"100%",backgroundColor:e.palette.primary.main,color:"#fff",fontWeight:700,textTransform:"none",borderBottom:"2px solid rgba(0,0,0,0.1)",borderRadius:"5px","&:hover":{backgroundColor:e.palette.secondary.main},"&:disabled":{backgroundColor:e.palette.secondary.main,opacity:.7}}}})),B=function(e){var t=e.text,a=e.disabled,n=e.form,r=R();return o.a.createElement(M.a,{variant:"contained",classes:{root:r.button},disableElevation:!0,type:"submit",form:n,disabled:a},t)},J=function(e,t){var a=Object(r.useState)(e),n=Object(I.a)(a,2),o=n[0],i=n[1],c=Object(r.useState)(!1),s=Object(I.a)(c,2),l=s[0],m=s[1],u=Object(r.useState)(""),d=Object(I.a)(u,2),p=d[0],f=d[1];return[o,function(e){l&&m(!1),i(e.target.value)},l,p,function(e){var a=e?t(o,e):t(o);return m(!a.isValid),f(a.message),a.isValid}]},G=function(e){var t=!1,a="Invalid username";return e.length>=30?a="Username length must be less than 30 characters":0===e.length?a="Username cannot be empty":(t=!0,a=""),{isValid:t,message:a}},V=function(e){var t=!1,a="Invalid Email format";return-1===e.indexOf("@")||-1===e.indexOf(".")||(0===e.length?a="Email cannot be empty":e.length>=60?a="Email too long":(t=!0,a="")),{isValid:t,message:a}},K=function(e){var t=!1,a="";return 0===e.length?a="Email cannot be empty":(t=!0,a=""),{isValid:t,message:a}},X=function(e,t){var a=!1,n="Not same as the password";return e===t&&(n="",a=!0),{isValid:a,message:n}},q=function(e){var t=!1,a="Title cannot be empty";return e.length>0&&(a="",t=!0),{isValid:t,message:a}},Y=function(e){for(var t=e.map((function(e){return e()})),a=0;a<t.length;a++)if(!t[a])return!1;return!0},$={login:"https://django-api-xiaoxihome.herokuapp.com/api/discussion_board/account/login/",register:"https://django-api-xiaoxihome.herokuapp.com/api/discussion_board/account/register/",verifySession:"https://django-api-xiaoxihome.herokuapp.com/api/discussion_board/account/verify_session/",getPostList:"https://django-api-xiaoxihome.herokuapp.com/api/discussion_board/post/all/",refresh:"https://django-api-xiaoxihome.herokuapp.com/api/discussion_board/account/refresh/",createPost:"https://django-api-xiaoxihome.herokuapp.com/api/discussion_board/post/create/",like:"https://django-api-xiaoxihome.herokuapp.com/api/discussion_board/user_actions/like/"},Q=function(){var e=Object(r.useState)(!1),t=Object(I.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(!1),i=Object(I.a)(o,2),c=i[0],l=i[1],m=Object(r.useState)(""),d=Object(I.a)(m,2),p=d[0],g=d[1],b=Object(s.c)(),h=Object(T.g)(),E=Object(T.h)();return[a,c,p,function(e,t){a||(l(!1),g(""),n(!0),fetch($.login,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){if(n(!1),"success"===e.status){var t=e.data.username;b(u({isLogin:!0,username:t,token:{access:e.data.access,refresh:e.data.refresh}}));var a=(E.state||{from:{pathname:"/"}}).from;h.replace(a),b(f("Welcome back ".concat(t)))}else l(!0),"error"===e.status?g(e.message):g("Server unavailable, please try again later.")})).catch((function(e){n(!1),l(!0),g("Server unavailable, please try again later.")})))}]},Z=a(194),ee=Object(L.a)((function(e){return{errorMessage:{fontWeight:700,color:e.palette.error.main}}})),te=function(e){var t=e.loading,a=e.errorMessage,n=e.error,r=ee();return o.a.createElement(U.a,{variant:"body1",component:"div"},o.a.createElement(F.a,{className:r.errorMessage,height:40},t?o.a.createElement(Z.a,{color:"primary"}):n&&a?a:" "))},ae=Object(L.a)((function(e){return{textField:{width:"100%",fontWeight:700},link:{fontWeight:700,"& a:link":{color:e.palette.primary.main},"& a:visited":{color:e.palette.primary.main},"& a:hover":{color:e.palette.secondary.main}}}})),ne=function(){var e=ae(),t=J("",V),a=Object(I.a)(t,5),n=a[0],r=a[1],i=a[2],c=a[3],s=a[4],l=J("",K),m=Object(I.a)(l,5),u=m[0],d=m[1],p=m[2],f=m[3],g=m[4],b=Q(),h=Object(I.a)(b,4),E=h[0],v=h[1],j=h[2],O=h[3];return o.a.createElement(P,{imageUrl:"/images/login_bg.jpg"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),Y([s,g])&&O(n,u)},id:"login-form"},o.a.createElement(A.a,{container:!0,spacing:2},o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(U.a,{variant:"h1",component:"h1",color:"textPrimary"},o.a.createElement(F.a,{textAlign:"center"},"Log In"))),o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(z.a,{error:i,label:"Email",name:"email",value:n,onChange:r,variant:"outlined",helperText:i?c:" ",className:e.textField}))),o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(z.a,{error:p,type:"password",label:"Password",name:"password",value:u,onChange:d,variant:"outlined",helperText:p?f:" ",className:e.textField}))),o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(B,{text:"Log me in!",form:"login-form",disabled:E}))),o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(te,{loading:E,error:v,errorMessage:j}))),o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(H.a,null)),o.a.createElement(A.a,{item:!0,xs:12,className:e.link},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(C.b,{to:"/register"},"Need an account?"))))))},re=function(){var e=Object(r.useState)(!1),t=Object(I.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(!1),i=Object(I.a)(o,2),c=i[0],l=i[1],m=Object(r.useState)(""),d=Object(I.a)(m,2),p=d[0],g=d[1],b=Object(s.c)(),h=Object(T.g)(),E=Object(T.h)();return[a,c,p,function(e,t,r,o){a||(l(!1),g(""),n(!0),fetch($.register,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:t,password:r,confirm_password:o})}).then((function(e){return e.json()})).then((function(t){if(n(!1),"success"===t.status){b(u({isLogin:!0,username:t.data.username,token:{access:t.data.access,refresh:t.data.refresh}}));var a=(E.state||{from:{pathname:"/"}}).from;h.replace(a),b(f("Welcome ".concat(e,"!")))}else l(!0),"error"===t.status?g(t.message):g("Server unavailable, please try again later.")})).catch((function(e){n(!1),l(!0),g("Server unavailable, please try again later.")})))}]},oe=Object(L.a)((function(e){return{textField:{width:"100%",fontWeight:700},link:{fontWeight:700,"& a:link":{color:e.palette.primary.main},"& a:visited":{color:e.palette.primary.main},"& a:hover":{color:e.palette.secondary.main}}}})),ie=function(){var e=oe(),t=J("",G),a=Object(I.a)(t,5),n=a[0],r=a[1],i=a[2],c=a[3],s=a[4],l=J("",V),m=Object(I.a)(l,5),u=m[0],d=m[1],p=m[2],f=m[3],g=m[4],b=J("",K),h=Object(I.a)(b,5),E=h[0],v=h[1],j=h[2],O=h[3],x=h[4],y=J("",X),S=Object(I.a)(y,5),k=S[0],w=S[1],N=S[2],T=S[3],L=S[4],W=re(),D=Object(I.a)(W,4),_=D[0],M=D[1],R=D[2],q=D[3];return o.a.createElement(P,{imageUrl:"/images/register_bg.jpg"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=Y([s,g,x]),a=L(E);t&&a&&q(n,u,E,k)},id:"register-form"},o.a.createElement(A.a,{container:!0,spacing:2},o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(U.a,{variant:"h1",component:"h1",color:"textPrimary"},o.a.createElement(F.a,{textAlign:"center"},"Join Us"))),o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(z.a,{error:i,label:"Username",name:"username",value:n,onChange:r,helperText:i?c:" ",variant:"outlined",className:e.textField}))),o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(z.a,{error:p,label:"Email",name:"email",value:u,onChange:d,helperText:p?f:" ",variant:"outlined",className:e.textField}))),o.a.createElement(A.a,{item:!0,xs:12,md:6},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(z.a,{error:j,label:"Password",name:"password",type:"password",value:E,onChange:v,helperText:j?O:" ",variant:"outlined",className:e.textField}))),o.a.createElement(A.a,{item:!0,xs:12,md:6},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(z.a,{error:N,label:"Confirm Password",name:"confirm-password",type:"password",value:k,onChange:w,helperText:N?T:" ",variant:"outlined",className:e.textField}))),o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(B,{text:"I'm in!",form:"register-form",disabled:!1}))),o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(te,{loading:_,error:M,errorMessage:R}))),o.a.createElement(A.a,{item:!0,xs:12},o.a.createElement(H.a,null)),o.a.createElement(A.a,{item:!0,xs:12,className:e.link},o.a.createElement(A.a,{container:!0,justify:"center"},o.a.createElement(C.b,{to:"/login"},"Already have an account?"))))))},ce=Object(L.a)((function(e){return{button:{backgroundColor:"rgba(255,255,255,0.3)",color:"#fff",fontWeight:700,textTransform:"capitalize",letterSpacing:"inherit",borderBottom:"2px solid rgba(0,0,0,0.1)",borderRadius:"5px",padding:"4px 10px","&:hover":{backgroundColor:e.palette.secondary.main}}}})),se=function(e){var t=e.text,a=e.url,n=e.onClick,r=ce();return a?o.a.createElement(M.a,{variant:"contained",classes:{root:r.button},disableElevation:!0,component:C.b,to:a},t):o.a.createElement(M.a,{variant:"contained",classes:{root:r.button},disableElevation:!0,onClick:n},t)},le=function(){var e=Object(r.useState)(!1),t=Object(I.a)(e,2),a=t[0],o=(t[1],Object(r.useState)(!1)),i=Object(I.a)(o,2),c=i[0],l=(i[1],Object(r.useState)("")),u=Object(I.a)(l,2),d=u[0],p=(u[1],Object(s.c)()),g=Object(T.g)(),b=Object(T.h)(),h=function(){p({type:n.LOGOUT,newStatus:m.loginStatus});var e=(b.state||{from:{pathname:"/"}}).from;g.replace(e),p(f("Logout succeeded"))};return[a,c,d,function(){h()}]},me=function(e){var t=e.username,a=le(),n=Object(I.a)(a,4),r=n[0],i=(n[1],n[2],n[3]);return o.a.createElement(A.a,{container:!0,alignItems:"center",justify:"center",spacing:1},o.a.createElement(A.a,{item:!0},o.a.createElement(U.a,{component:"div"},o.a.createElement(F.a,null,t))),o.a.createElement(A.a,{item:!0},r?o.a.createElement(Z.a,{color:"secondary",size:"1rem"}):o.a.createElement(se,{text:"Logout",onClick:i})))},ue=function(){return o.a.createElement(A.a,{container:!0,alignItems:"center",justify:"center",spacing:1},o.a.createElement(A.a,{item:!0},o.a.createElement(se,{text:"Join",url:"/register"})),o.a.createElement(A.a,{item:!0},o.a.createElement(se,{text:"Login",url:"/login"})))},de=a(78),pe=a.n(de),fe=pe()((function(e){var t;return{root:(t={fontFamily:["Oleo Script Swash Caps","sans-serif"].join(","),fontWeight:700,fontSize:"1.5rem"},Object(y.a)(t,e.breakpoints.up("md"),{fontSize:"1.75rem"}),Object(y.a)(t,"fontStyle","normal"),Object(y.a)(t,"color","#fff"),Object(y.a)(t,"whiteSpace","nowrap"),t)}})),ge=function(){var e=fe();return o.a.createElement(U.a,{variant:"h1",component:"h1",className:e.root},o.a.createElement(F.a,{fontWeight:700,textAlign:"center"},o.a.createElement(C.b,{to:"/"},"Blog | XiaoxiHome")))},be=Object(L.a)((function(e){return{headerDimension:{width:"100%",height:"80px"},root:{backgroundColor:e.palette.primary.main,position:"fixed",zIndex:e.zIndex.appBar,left:0,top:0,color:e.palette.primary.contrastText,padding:e.spacing(0,1)},placeholder:{position:"relative"},button:{backgroundColor:"rgba(255,255,255,0.5)",color:"#fff",fontWeight:700,textTransform:"capitalize","&:hover":{backgroundColor:e.palette.secondary.main}}}})),he=function(e){var t=e.isLogin,a=e.username,n=be();return o.a.createElement("header",{className:"".concat(n.placeholder," ").concat(n.headerDimension)},o.a.createElement(A.a,{container:!0,alignItems:"center",justify:"center",className:"".concat(n.root," ").concat(n.headerDimension)},o.a.createElement(A.a,{item:!0,xs:6,md:4},o.a.createElement(ge,null)),o.a.createElement(A.a,{item:!0,xs:1,md:4}),o.a.createElement(A.a,{item:!0,xs:5,md:4},t?o.a.createElement(me,{username:a}):o.a.createElement(ue,null))))};var Ee=Object(s.b)((function(e){return{isLogin:e.loginStatus.isLogin,username:e.loginStatus.username}}))(he),ve=a(28),je=a.n(ve),Oe=a(39),xe=a(40),ye=function(){var e=Object(s.d)().getState().loginStatus.token.access;return{Authorization:"Bearer ".concat(e)}},Se=function(){var e=Object(s.d)().getState(),t=e.loginStatus.isLogin,a=e.loginStatus.token.access,r=ye(),o=Object(s.c)();return function(){return new Promise(function(){var e=Object(xe.a)(je.a.mark((function e(i,c){var s,l,m;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=4;break}return i(!1),e.abrupt("return");case 4:return e.next=6,fetch($.verifySession,{method:"POST",headers:Object(Oe.a)({"Content-Type":"application/json"},r)});case 6:return s=e.sent,e.next=9,s.json();case 9:if("success"!==e.sent.status){e.next=13;break}return i(!0),e.abrupt("return");case 13:return e.next=15,fetch($.refresh,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:a})});case 15:return l=e.sent,e.next=18,l.json();case 18:if("success"!==(m=e.sent).status){e.next=23;break}return o((c=m.data.access,{type:n.REFRESH_TOKEN,newAccessToken:c})),i(!0),e.abrupt("return");case 23:i(!1),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),console.log(e.t0),i(!1);case 30:case"end":return e.stop()}var c}),e,null,[[0,26]])})));return function(t,a){return e.apply(this,arguments)}}())}},ke=function(){var e=Object(s.d)().getState().loginStatus.isLogin,t=ye(),a=Se(),n=Object(r.useState)(!1),o=Object(I.a)(n,2),i=o[0],c=o[1],l=Object(r.useState)(!1),m=Object(I.a)(l,2),u=m[0],d=m[1],p=Object(r.useState)(null),f=Object(I.a)(p,2),g=f[0],b=f[1];Object(r.useEffect)((function(){h()}),[e]);var h=function(){var n=Object(xe.a)(je.a.mark((function n(){var r,o,s;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!i){n.next=3;break}return n.abrupt("return");case 3:if(d(!1),r=!1,!e){n.next=9;break}return n.next=8,a();case 8:r=n.sent;case 9:return c(!0),n.next=12,fetch($.getPostList,{method:"GET",headers:r?Object(Oe.a)({},t):{}});case 12:return o=n.sent,n.next=15,o.json();case 15:s=n.sent,c(!1),console.log(s),"success"===s.status?(console.log(s.data),b(s.data)):(console.log(s),d(!0)),n.next=26;break;case 21:n.prev=21,n.t0=n.catch(0),c(!1),console.log(n.t0),d(!0);case 26:case"end":return n.stop()}}),n,null,[[0,21]])})));return function(){return n.apply(this,arguments)}}();return[i,u,g]},we=a(201),Ne=a(211),Ce=a(200),Te=a(112),Le=a.n(Te),Ie=a(113),We=a.n(Ie),De=function(e,t){var a=ye(),n=Se(),o=Object(r.useState)(!1),i=Object(I.a)(o,2),c=i[0],l=i[1],m=Object(r.useState)(!1),u=Object(I.a)(m,2),d=u[0],p=u[1],g=Object(r.useState)(null),b=Object(I.a)(g,2),h=b[0],E=b[1],v=Object(s.c)(),j=Object(T.g)();Object(T.h)();return[c,d,h,function(){var r=Object(xe.a)(je.a.mark((function r(o){var i,s;return je.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!c){r.next=3;break}return r.abrupt("return");case 3:return p(!1),l(!0),r.next=7,n();case 7:if(r.sent){r.next=12;break}return l(!1),j.push("/login"),r.abrupt("return");case 12:return r.next=14,fetch($.like,{method:"POST",headers:Object(Oe.a)({"Content-Type":"application/json"},a),body:JSON.stringify({target_type:e,target_id:t,action:o})});case 14:return i=r.sent,r.next=17,i.json();case 17:s=r.sent,l(!1),"success"===s.status?(console.log(s),E(s.data)):(v(f(s.message)),p(!0)),r.next=28;break;case 22:r.prev=22,r.t0=r.catch(0),console.log(r.t0),l(!1),p(!0),v(f("Server is not available please try again later"));case 28:case"end":return r.stop()}}),r,null,[[0,22]])})));return function(e){return r.apply(this,arguments)}}()]},_e=a(85),Pe=a.n(_e),Ae=a(86),Ue=a.n(Ae),Fe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ze=Object(L.a)((function(e){return{root:{margin:e.spacing(1,0)},paper:{width:"100%",minHeight:"100px",padding:e.spacing(2),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},avatar:{margin:e.spacing(1)},content:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},title:{margin:e.spacing(0,2),"& h2":{fontSize:"1.25rem",fontWeight:700,color:e.palette.text.primary,margin:e.spacing(0)}},author:{margin:e.spacing(0,2)},actionArea:Object(y.a)({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",color:e.palette.grey[500],fontSize:"0.875rem",fontWeight:700},e.breakpoints.down("md"),{flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),likeButtons:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},button:{color:e.palette.grey[400],fontSize:"1.25rem"},buttonText:{lineHeight:1},actionItem:{margin:e.spacing(0,2)}}})),He=function(e){e.isLogin;var t=e.data,a=ze(),n=De("post",t.id),r=Object(I.a)(n,4),i=r[0],c=(r[1],r[2]),s=r[3];null!==c&&(t=c);var l=1===t.is_liked,m=-1===t.is_liked;return o.a.createElement("div",{className:a.root},o.a.createElement(W.a,{className:a.paper,elevation:0},o.a.createElement(Ne.a,{variant:"square",className:a.avatar},"N"),o.a.createElement("div",{className:a.content},o.a.createElement("div",{className:a.title},o.a.createElement("h2",null,t.title)),o.a.createElement("div",{className:a.author},o.a.createElement(U.a,{variant:"caption",component:"div"},o.a.createElement(F.a,null,t.owner.username))),o.a.createElement("div",{className:a.actionArea},o.a.createElement("div",{className:"".concat(a.actionItem," ").concat(a.likeButtons)},o.a.createElement(Ce.a,{"aria-label":"like post",disabled:i,onClick:function(){s(l?0:1)}},o.a.createElement(Le.a,{className:a.button,style:l?{color:Ue.a[300]}:{}})),o.a.createElement("div",{className:a.buttonText},t.likes),o.a.createElement(Ce.a,{"aria-label":"dislike post",disabled:i,onClick:function(){s(m?0:-1)}},o.a.createElement(We.a,{className:a.button,style:m?{color:Pe.a[300]}:{}})),o.a.createElement("div",{className:a.buttonText},t.dislikes)),o.a.createElement("div",{className:a.actionItem},"".concat(t.comments," ").concat(t.comments>1?"comments":"comment")),o.a.createElement("div",{className:a.actionItem},function(e){var t=new Date(e),a=t.getHours()<10?"0".concat(t.getHours()):t.getHours(),n=t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes();return"".concat(t.getDate()," ").concat(Fe[t.getMonth()],", ").concat(t.getFullYear()," - ").concat(a,":").concat(n)}(t.created))))))},Me=Object(L.a)((function(e){return{root:{}}})),Re=function(e){var t,a=e.isLogin,n=Me(),r=ke(),i=Object(I.a)(r,3),c=i[0],s=i[1],l=i[2];return t=c?new Array(10).fill(0).map((function(e,t){return o.a.createElement(F.a,{width:"100%",my:2,key:t},o.a.createElement(we.a,{variant:"rect",animation:"wave",width:"100%",height:100}))})):s?o.a.createElement(U.a,{variant:"body1",component:"h2"},o.a.createElement(F.a,{fontWeight:700,color:"primary.main",textAlign:"center"},"Server is unavailable now, please try again later")):null===l||void 0===l?void 0:l.map((function(e,t){return o.a.createElement(He,{key:t,isLogin:a,data:e})})),o.a.createElement("div",{className:n.root},t)};var Be=Object(s.b)((function(e){return{isLogin:e.loginStatus.isLogin}}))(Re),Je=Object(L.a)((function(e){return{button:{backgroundColor:e.palette.primary.light,maxWidth:"100%",color:"#fff",fontWeight:700,textTransform:"capitalize",letterSpacing:"inherit",borderBottom:"2px solid rgba(0,0,0,0.1)",borderRadius:"5px",padding:"4px 10px","& span":{color:"#fff"},"&:hover":{backgroundColor:e.palette.secondary.main}}}})),Ge=function(e){var t=e.width,a=e.text,n=e.onClick,r=e.disabled,i=Je();return o.a.createElement(M.a,{variant:"contained",classes:{root:i.button},disableElevation:!0,onClick:n,style:{width:t},disabled:r},a)},Ve=function(e){var t=e.width,a=e.text,n=e.link,r=Je();return o.a.createElement(M.a,{variant:"contained",classes:{root:r.button},disableElevation:!0,component:C.b,to:n,style:{width:t}},a)},Ke=Object(L.a)((function(e){return{root:{width:"100%",minHeight:"100px",margin:e.spacing(1),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})),Xe=function(){var e=Ke();return o.a.createElement(W.a,{className:e.root,elevation:0},o.a.createElement(Ve,{link:"/edit-post",width:"80%",text:"Create Post"}))},qe=Object(L.a)((function(e){return{root:Object(y.a)({margin:e.spacing(2,0),width:"100%",display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"center"},e.breakpoints.down("md"),{flexDirection:"column"}),left:Object(y.a)({width:"75%"},e.breakpoints.down("md"),{width:"100%"}),right:Object(y.a)({width:"25%"},e.breakpoints.down("md"),{width:"100%"})}})),Ye=function(){var e=qe();return o.a.createElement("div",{className:e.root},o.a.createElement("div",{className:e.left},o.a.createElement(Be,null)),o.a.createElement("div",{className:e.right},o.a.createElement(Xe,null)))},$e=a(202),Qe=a(212),Ze=a(203),et=a(114),tt=a.n(et),at=pe()((function(){return Object($e.a)({root:{},content:{backgroundColor:"#4a5568"}})})),nt=function(e){var t=e.open,a=e.closeSnackbar,n=e.message,r=at();return o.a.createElement(Qe.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:t,autoHideDuration:5e3,onClose:a,className:r.root},o.a.createElement(Ze.a,{className:r.content,message:o.a.createElement(U.a,{variant:"body1",component:"div"},o.a.createElement(F.a,{fontWeight:700},n)),action:[o.a.createElement(Ce.a,{key:"close","aria-label":"close",color:"inherit",onClick:a},o.a.createElement(tt.a,null))]}))};var rt=Object(s.b)((function(e){return{open:e.snackbar.open,message:e.snackbar.message}}),(function(e){return{closeSnackbar:function(){return e({type:d.CLOSE})}}}))(nt),ot=Object(L.a)((function(e){return{root:{listStyleType:"none",margin:0,padding:0},header:{fontSize:"1.25rem",margin:"8px 0",letterSpacing:"0",fontWeight:700},content:{fontSize:"0.875rem",padding:"2px","&:hover":{color:e.palette.secondary.main}}}})),it=function(e){var t=e.data,a=ot();return o.a.createElement("ul",{className:a.root},t.map((function(e,t){return 0===t?o.a.createElement("li",{key:t},o.a.createElement("div",{className:a.header},e.title)):o.a.createElement("li",{key:t},o.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},o.a.createElement("div",{className:a.content},e.title)))})))},ct=[{title:"Learn More",url:""},{title:"API Endpoints",url:"https://www.google.ca/"},{title:"GitHub",url:"https://github.com/CptDoraemon/discussion-board-client"},{title:"XiaoxiHome",url:"https://www.xiaoxihome.com/"}],st=Object(L.a)((function(e){return{root:{width:"100%",margin:"40px 0 8px 0"},paper:{width:"100%",backgroundColor:"#4a5568",color:"#a0aec0",padding:e.spacing(5)},copyright:{width:"100%",margin:e.spacing(5,0,0,0),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",fontSize:"0.8rem"}}})),lt=function(){var e=st();return o.a.createElement("footer",{className:e.root},o.a.createElement(W.a,{className:e.paper},o.a.createElement(A.a,{container:!0,spacing:5},o.a.createElement(A.a,{item:!0},o.a.createElement(ge,null)),o.a.createElement(A.a,{item:!0},o.a.createElement(it,{data:ct}))),o.a.createElement("div",{className:e.copyright},o.a.createElement("div",null,"\xa9 2020 XiaoxiHome.com"))))},mt=a(2),ut=function(e){var t=e.children,a=e.isLogin,n=Object(mt.a)(e,["children","isLogin"]);return o.a.createElement(T.b,Object.assign({},n,{render:function(e){var n=e.location;return a?t:o.a.createElement(T.a,{to:{pathname:"/login",state:{from:n}}})}}))},dt=a(115),pt=a.n(dt),ft=(a(160),a(209)),gt=a(210),bt=a(196),ht=a(197),Et=function(){var e=ye(),t=Se(),a=Object(r.useState)(!1),n=Object(I.a)(a,2),o=n[0],i=n[1],c=Object(r.useState)(!1),l=Object(I.a)(c,2),m=l[0],u=l[1],d=Object(r.useState)(""),p=Object(I.a)(d,2),f=p[0],g=p[1],b=Object(r.useState)(!1),h=Object(I.a)(b,2),E=h[0],v=h[1],j=(Object(s.c)(),Object(T.g)());Object(T.h)();return[o,m,f,function(){var a=Object(xe.a)(je.a.mark((function a(n,r){var c,s;return je.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!o&&!E){a.next=3;break}return a.abrupt("return");case 3:return u(!1),g(" "),i(!0),a.next=8,t();case 8:if(a.sent){a.next=13;break}return i(!1),j.push("/login"),a.abrupt("return");case 13:return a.next=15,fetch($.createPost,{method:"POST",headers:Object(Oe.a)({"Content-Type":"application/json"},e),body:JSON.stringify({title:n,content:r})});case 15:return c=a.sent,a.next=18,c.json();case 18:s=a.sent,i(!1),"success"===s.status?(console.log(s),v(!0)):(g(s.message),u(!0)),a.next=29;break;case 23:a.prev=23,a.t0=a.catch(0),console.log(a.t0),i(!1),g("Server is not available please try again later"),u(!0);case 29:case"end":return a.stop()}}),a,null,[[0,23]])})));return function(e,t){return a.apply(this,arguments)}}(),E]},vt=Object(L.a)((function(e){return{root:{width:"100%",padding:e.spacing(2)},editor:{width:"100%",minHeight:"300px",marginBottom:"16px"},title:{width:"100%"}}})),jt=function(){var e=vt(),t=(Object(T.i)().postID,Object(r.useState)(null)),a=Object(I.a)(t,2),n=a[0],i=a[1],c=J("",q),s=Object(I.a)(c,5),l=s[0],m=s[1],u=s[2],d=s[3],p=s[4],f=Et(),g=Object(I.a)(f,5),b=g[0],h=g[1],E=g[2],v=g[3],j=g[4];return Object(r.useEffect)((function(){var e=new pt.a("#".concat("editor"),{modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline"],["image","code-block"]]},placeholder:"Compose an epic...",theme:"snow"});i(e)}),[]),o.a.createElement(W.a,{className:e.root,elevation:0},o.a.createElement("form",null,o.a.createElement(ft.a,{className:e.title},o.a.createElement(gt.a,{htmlFor:"post-editor-title"},"Title"),o.a.createElement(bt.a,{id:"post-editor-title","aria-describedby":"post-editor-title-helper-text",value:l,onChange:m}),o.a.createElement(ht.a,{id:"post-editor-title-helper-text",error:u},u&&d?d:" ")),o.a.createElement("div",{id:"editor",className:e.editor}),o.a.createElement(Ge,{onClick:function(e){e.preventDefault(),p()&&v(l,n.root.innerHTML)},width:"250px",text:j?"Submitted":"Submit",disabled:j}),o.a.createElement(te,{loading:b,error:h,errorMessage:E})))},Ot=(v(),Object(L.a)((function(e){return{root:{width:"100%",maxWidth:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},widthWrapper:Object(y.a)({margin:e.spacing(5,0,0,0),width:"1000px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},e.breakpoints.down("sm"),{width:"calc(100% - 16px)",margin:e.spacing(0,1)})}})));var xt=Object(s.b)((function(e){return{isLogin:e.loginStatus.isLogin}}))((function(e){var t=e.isLogin,a=Ot();return o.a.createElement("div",{className:a.root},o.a.createElement(C.a,{basename:"/discussion-board-client"},o.a.createElement(Ee,null),o.a.createElement("div",{className:a.widthWrapper},o.a.createElement(T.d,null,o.a.createElement(T.b,{path:"/",exact:!0,render:function(){return o.a.createElement(Ye,null)}}),o.a.createElement(T.b,{path:"/login",render:function(){return o.a.createElement(ne,null)}}),o.a.createElement(T.b,{path:"/register",render:function(){return o.a.createElement(ie,null)}}),o.a.createElement(ut,{path:"/edit-post/:postID?",isLogin:t},o.a.createElement(jt,null))),o.a.createElement(lt,null))),o.a.createElement(rt,null))})),yt=v(),St=function(){return o.a.createElement(s.a,{store:yt},o.a.createElement(x.a,{theme:N},o.a.createElement(O.a,null),o.a.createElement(xt,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(St,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[125,1,2]]]);
//# sourceMappingURL=main.4a4ae972.chunk.js.map