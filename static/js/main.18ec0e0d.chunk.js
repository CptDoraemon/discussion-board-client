(this["webpackJsonpdiscussion-board-client"]=this["webpackJsonpdiscussion-board-client"]||[]).push([[0],{62:function(e,t,a){e.exports=a(73)},67:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),o=a(8),c=a.n(o),l=(a(67),a(11)),s=a(18),m=a(27),u=a(32),d=a(31),g={loginStatus:{isLogin:!1,username:""}};!function(e){e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.LOGOUT="LOGOUT"}(n||(n={}));var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.loginStatus,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.UPDATE_LOGIN_STATUS:case n.LOGOUT:return t.newStatus;default:return e}},p=Object(d.b)({loginStatus:f});var E,b=a(110),h=a(101),v=a(109),x=a(55),y=a(114),j=Object(x.a)({palette:{primary:{main:"#805ad5",contrastText:"#fff"},secondary:{main:"#f6ad55",contrastText:"#fff"},text:{primary:"#4a5568"}},typography:{fontFamily:"system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500}});(j=Object(y.a)(j)).typography.h1=(E={fontFamily:["Open-sans","sans-serif"].join(","),fontWeight:800,fontSize:"1.25rem"},Object(l.a)(E,j.breakpoints.up("md"),{fontSize:"1.5rem"}),Object(l.a)(E,"fontStyle","normal"),Object(l.a)(E,"color","inherit"),E);var O=j,S=Object(h.a)((function(e){return{}})),w=function(){S();return i.a.createElement("div",null,"post list")},k=a(12),T=a(103),C=function(e){var t=Object(r.useState)(0),a=Object(k.a)(t,2),n=a[0],i=a[1];return Object(r.useEffect)((function(){e.current&&i(e.current.getBoundingClientRect().height)}),[e]),n},N=Object(h.a)((function(e){return{root:{width:"100%",margin:e.spacing(10,0),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},image:Object(l.a)({width:"40%",height:"100%","& img":{width:"100%",height:"100%",objectFit:"cover"}},e.breakpoints.down("sm"),{display:"none"}),content:Object(l.a)({width:"60%",padding:e.spacing(10,5)},e.breakpoints.down("sm"),{width:"100%"}),textField:{width:"100%",fontWeight:700},link:{fontWeight:700,"& a:link":{color:e.palette.primary.main},"& a:visited":{color:e.palette.primary.main},"& a:hover":{color:e.palette.secondary.main}}}})),U=function(e){var t=e.children,a=e.imageUrl,n=N(),o=Object(r.useRef)(null),c=C(o);return i.a.createElement(T.a,{elevation:0,className:n.root,ref:o},i.a.createElement("div",{className:n.image},i.a.createElement("img",{src:"/discussion-board-client"+a,alt:"login background",style:{height:"".concat(c,"px")},title:"login background"})),i.a.createElement("div",{className:n.content},t))},W=a(107),L=a(105),I=a(112),A=a(111),F=a(108),_=a(113),D=Object(h.a)((function(e){return{button:{width:"100%",backgroundColor:e.palette.primary.main,color:"#fff",fontWeight:700,textTransform:"none",borderBottom:"2px solid rgba(0,0,0,0.1)",borderRadius:"5px","&:hover":{backgroundColor:e.palette.secondary.main},"&:disabled":{backgroundColor:e.palette.secondary.main,opacity:.7}}}})),P=function(e){var t=e.text,a=e.onClick,n=e.disabled,r=D();return i.a.createElement(_.a,{variant:"contained",classes:{root:r.button},disableElevation:!0,onClick:a,disabled:n},t)},G=function(e,t){var a=Object(r.useState)(e),n=Object(k.a)(a,2),i=n[0],o=n[1],c=Object(r.useState)(!1),l=Object(k.a)(c,2),s=l[0],m=l[1],u=Object(r.useState)(""),d=Object(k.a)(u,2),g=d[0],f=d[1];return[i,function(e){s&&m(!1),o(e.target.value)},s,g,function(){var e=t(i);return m(!e.isValid),f(e.message),e.isValid}]},B=function(e){var t=!1,a="Invalid Email format";return-1===e.indexOf("@")||-1===e.indexOf(".")||(0===e.length?a="Email cannot be empty":(t=!0,a="")),{isValid:t,message:a}},M=function(e){var t=!1,a="";return 0===e.length?a="Email cannot be empty":(t=!0,a=""),{isValid:t,message:a}},R={login:"https://django-api-xiaoxihome.herokuapp.com/api/discussion_board/account/login/"},z=function(){var e=Object(r.useState)(!1),t=Object(k.a)(e,2),a=t[0],i=t[1],o=Object(r.useState)(!1),c=Object(k.a)(o,2),l=c[0],s=c[1],d=Object(r.useState)(""),g=Object(k.a)(d,2),f=g[0],p=g[1],E=Object(u.c)(),b=Object(m.f)(),h=Object(m.g)();return[a,l,f,function(e,t,a){s(!1),p("");for(var r=a.map((function(e){return e()})),o=0;o<r.length;o++)if(!r[o])return;i(!0),fetch(R.login,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){if(i(!1),"error"===e.status)s(!0),p(e.message);else{console.log(e),E((a={isLogin:!0,username:e.data.username},{type:n.UPDATE_LOGIN_STATUS,newStatus:a}));var t=(h.state||{from:{pathname:"/"}}).from;b.replace(t)}var a})).catch((function(e){i(!1),s(!0),p("Server unavailable, please try again later.")}))}]},J=a(106),V=Object(h.a)((function(e){return{errorMessage:{fontWeight:700,color:e.palette.error.main}}})),H=function(e){var t=e.loading,a=e.errorMessage,n=e.error,r=V();return i.a.createElement(L.a,{variant:"body1",component:"div"},i.a.createElement(I.a,{className:r.errorMessage,height:40},t?i.a.createElement(J.a,{color:"primary"}):n&&a?a:" "))},X=Object(h.a)((function(e){return{textField:{width:"100%",fontWeight:700},link:{fontWeight:700,"& a:link":{color:e.palette.primary.main},"& a:visited":{color:e.palette.primary.main},"& a:hover":{color:e.palette.secondary.main}}}})),$=function(){var e=X(),t=G("",B),a=Object(k.a)(t,5),n=a[0],r=a[1],o=a[2],c=a[3],l=a[4],m=G("",M),u=Object(k.a)(m,5),d=u[0],g=u[1],f=u[2],p=u[3],E=u[4],b=z(),h=Object(k.a)(b,4),v=h[0],x=h[1],y=h[2],j=h[3];return i.a.createElement(U,{imageUrl:"/images/login_bg.jpg"},i.a.createElement(W.a,{container:!0,spacing:3},i.a.createElement(W.a,{item:!0,xs:12},i.a.createElement(L.a,{variant:"h1",component:"h1",color:"textPrimary"},i.a.createElement(I.a,{textAlign:"center"},"Log in"))),i.a.createElement(W.a,{item:!0,xs:12},i.a.createElement(W.a,{container:!0,justify:"center"},i.a.createElement(A.a,{error:o,label:"Email",name:"email",value:n,onChange:r,variant:"outlined",helperText:o?c:" ",className:e.textField}))),i.a.createElement(W.a,{item:!0,xs:12},i.a.createElement(W.a,{container:!0,justify:"center"},i.a.createElement(A.a,{error:f,type:"password",label:"Password",value:d,onChange:g,variant:"outlined",helperText:f?p:" ",className:e.textField}))),i.a.createElement(W.a,{item:!0,xs:12},i.a.createElement(W.a,{container:!0,justify:"center"},i.a.createElement(P,{text:"Log me in!",onClick:function(){j(n,d,[l,E])},disabled:v}))),i.a.createElement(W.a,{item:!0,xs:12},i.a.createElement(W.a,{container:!0,justify:"center"},i.a.createElement(H,{loading:v,error:x,errorMessage:y}))),i.a.createElement(W.a,{item:!0,xs:12},i.a.createElement(F.a,null)),i.a.createElement(W.a,{item:!0,xs:12,className:e.link},i.a.createElement(W.a,{container:!0,justify:"center"},i.a.createElement(s.b,{to:"/register"},"Need an account?")))))},q=Object(h.a)((function(e){return{textField:{width:"100%",fontWeight:700},link:{fontWeight:700,"& a:link":{color:e.palette.primary.main},"& a:visited":{color:e.palette.primary.main},"& a:hover":{color:e.palette.secondary.main}}}})),K=function(){var e=q();return i.a.createElement(U,{imageUrl:"/images/register_bg.jpg"},i.a.createElement(W.a,{container:!0,spacing:5},i.a.createElement(W.a,{item:!0,xs:12},i.a.createElement(L.a,{variant:"h1",component:"h1",color:"textPrimary"},i.a.createElement(I.a,{textAlign:"center"},"Join Us"))),i.a.createElement(W.a,{item:!0,xs:12},i.a.createElement(W.a,{container:!0,justify:"center"},i.a.createElement(A.a,{label:"Username",value:"",variant:"outlined",className:e.textField}))),i.a.createElement(W.a,{item:!0,xs:12},i.a.createElement(W.a,{container:!0,justify:"center"},i.a.createElement(A.a,{label:"Email",value:"",variant:"outlined",className:e.textField}))),i.a.createElement(W.a,{item:!0,xs:12,md:6},i.a.createElement(W.a,{container:!0,justify:"center"},i.a.createElement(A.a,{label:"Password",value:"",variant:"outlined",className:e.textField}))),i.a.createElement(W.a,{item:!0,xs:12,md:6},i.a.createElement(W.a,{container:!0,justify:"center"},i.a.createElement(A.a,{label:"Confirm Password",value:"",variant:"outlined",className:e.textField}))),i.a.createElement(W.a,{item:!0,xs:12},i.a.createElement(W.a,{container:!0,justify:"center"},i.a.createElement(P,{text:"I'm in!",onClick:function(){return!1},disabled:!1}))),i.a.createElement(W.a,{item:!0,xs:12},i.a.createElement(F.a,null)),i.a.createElement(W.a,{item:!0,xs:12,className:e.link},i.a.createElement(W.a,{container:!0,justify:"center"},i.a.createElement(s.b,{to:"/login"},"Already have an account?")))))},Q=Object(h.a)((function(e){return{button:{backgroundColor:"rgba(255,255,255,0.3)",color:"#fff",fontWeight:700,textTransform:"capitalize",letterSpacing:"inherit",borderBottom:"2px solid rgba(0,0,0,0.1)",borderRadius:"5px",padding:"4px 10px","&:hover":{backgroundColor:e.palette.secondary.main}}}})),Y=function(e){var t=e.text,a=e.url,n=e.onClick,r=Q();return a?i.a.createElement(_.a,{variant:"contained",classes:{root:r.button},disableElevation:!0,component:s.b,to:a},t):i.a.createElement(_.a,{variant:"contained",classes:{root:r.button},disableElevation:!0,onClick:n},t)},Z=function(e){var t=e.logout,a=e.username;return i.a.createElement(W.a,{container:!0,alignItems:"center",justify:"center",spacing:1},i.a.createElement(W.a,{item:!0},i.a.createElement(L.a,null,i.a.createElement(I.a,null,a))),i.a.createElement(W.a,{item:!0},i.a.createElement(Y,{text:"Logout",onClick:t})))},ee=function(){return i.a.createElement(W.a,{container:!0,alignItems:"center",justify:"center",spacing:1},i.a.createElement(W.a,{item:!0},i.a.createElement(Y,{text:"Join",url:"/register"})),i.a.createElement(W.a,{item:!0},i.a.createElement(Y,{text:"Login",url:"/login"})))},te=Object(h.a)((function(e){return{headerDimension:{width:"100%",height:"80px"},root:{backgroundColor:e.palette.primary.main,position:"fixed",left:0,top:0,color:e.palette.primary.contrastText},placeholder:{position:"relative"},button:{backgroundColor:"rgba(255,255,255,0.5)",color:"#fff",fontWeight:700,textTransform:"capitalize","&:hover":{backgroundColor:e.palette.secondary.main}}}})),ae=function(e){var t=e.isLogin,a=e.username,n=e.logout,r=te();return i.a.createElement("div",{className:"".concat(r.placeholder," ").concat(r.headerDimension)},i.a.createElement(W.a,{container:!0,alignItems:"center",justify:"center",className:"".concat(r.root," ").concat(r.headerDimension)},i.a.createElement(W.a,{item:!0,xs:6,md:4},i.a.createElement(s.b,{to:"/"},i.a.createElement(L.a,{variant:"h1",component:"h1"},i.a.createElement(I.a,{fontWeight:700,textAlign:"center"},"Blog | XiaoxiHome")))),i.a.createElement(W.a,{item:!0,xs:1,md:4}),i.a.createElement(W.a,{item:!0,xs:5,md:4},t?i.a.createElement(Z,{logout:n,username:a}):i.a.createElement(ee,null))))};var ne=Object(u.b)((function(e){return{isLogin:e.loginStatus.isLogin,username:e.loginStatus.username}}),(function(e){return{logout:function(){return e({type:n.LOGOUT,newStatus:g})}}}))(ae),re=Object(d.c)(p,g),ie=Object(h.a)((function(e){return{root:{width:"100%",maxWidth:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},widthWrapper:Object(l.a)({width:"1000px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},e.breakpoints.down("sm"),{width:"100%"})}})),oe=function(){var e=ie();return i.a.createElement(u.a,{store:re},i.a.createElement(v.a,{theme:O},i.a.createElement(b.a,null),i.a.createElement("div",{className:e.root},i.a.createElement(s.a,{basename:"/discussion-board-client"},i.a.createElement(ne,null),i.a.createElement("div",{className:e.widthWrapper},i.a.createElement(m.c,null,i.a.createElement(m.a,{path:"/",exact:!0,render:function(){return i.a.createElement(w,null)}}),i.a.createElement(m.a,{path:"/login",render:function(){return i.a.createElement($,null)}}),i.a.createElement(m.a,{path:"/register",render:function(){return i.a.createElement(K,null)}})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[62,1,2]]]);
//# sourceMappingURL=main.18ec0e0d.chunk.js.map