{"version":3,"sources":["redux/actions/login-status.ts","redux/state.ts","redux/reducers/login-status.ts","redux/actions/confetti.ts","redux/actions/snackbar.ts","redux/reducers/snakbar.ts","redux/reducers/confetti.ts","redux/reducers/root-reducers.ts","redux/configure-store.ts","theme.tsx","utils/use-full-height.tsx","components/login/commons/login-common.tsx","components/commons/form-button.tsx","utils/use-input-field.tsx","utils/validators.ts","requests/urls.ts","utils/redirects/use-redirect-back.tsx","requests/use-login.tsx","components/commons/error-message.tsx","components/login/login.tsx","requests/use-register.tsx","components/login/register.tsx","components/commons/theme-button.tsx","utils/redirects/use-redirect-to-home.tsx","requests/use-logout.tsx","components/header/logged-in-user-panel.tsx","components/header/anonymous-user-panel.tsx","components/commons/logo.tsx","components/header/header.tsx","containers/header-container.tsx","requests/common/generic-error-message.ts","utils/redirects/use-redirect-to-login.tsx","requests/common/use-fetch-with-token-verification.tsx","requests/common/helpers/use-request-states.tsx","requests/common/use-protected-get.tsx","requests/use-get-post-list.tsx","utils/get-time-string.tsx","requests/common/use-post.tsx","requests/use-like.tsx","components/commons/like-buttons.tsx","components/commons/tag-chip/tag-chip-common.tsx","components/commons/tag-chip/tag-chip.tsx","components/post-list/post.tsx","components/post-list/server-waking-notification.tsx","utils/use-query.tsx","components/pagination/pagination.tsx","components/main-page/active-tag-chip.tsx","components/post-list/post-list.tsx","containers/post-list-container.tsx","components/commons/generic-button.tsx","components/side-bar/common/side-bar-section.tsx","components/side-bar/side-bar-top.tsx","requests/common/helpers/use-callback-did-mount.tsx","requests/common/helpers/use-cancel-request-before-unmount.ts","requests/common/use-unprotected-get.tsx","requests/use-get-tag-list.tsx","components/side-bar/common/side-bar-list-view-item.tsx","components/side-bar/common/side-bar-list-view.tsx","routes.ts","components/side-bar/side-bar-tags.tsx","requests/use-get-popular-posts.ts","components/side-bar/side-bar-popular.tsx","components/side-bar/side-bar.tsx","containers/side-bar-container.tsx","requests/use-get-pinned-posts.tsx","components/post-list/pinned-posts.tsx","containers/pinned-posts-container.tsx","components/main-page/main-page.tsx","components/snackbar/snackbar.tsx","containers/snackbar-container.tsx","components/footer/footer-column.tsx","components/footer/footer.tsx","utils/protected-router.tsx","requests/use-post-submission.tsx","components/post-editor/use-editor.tsx","utils/use-set-title.ts","requests/use-get-post-detail.tsx","components/post-editor/tag-selector.tsx","components/post-editor/post-editor.tsx","utils/redirects/use-reload.tsx","requests/use-comment-submission.tsx","components/post-detail/comment-input.tsx","components/post-detail/item-info.tsx","components/post-detail/sub-comment-item.tsx","components/post-detail/comment-item.tsx","components/commons/theme-link.tsx","components/post-detail/comment-list.tsx","components/post-detail/inserted-html-style.tsx","requests/use-delete.tsx","components/commons/delete-button.tsx","components/commons/edit-button.tsx","requests/use-pin.tsx","components/commons/pin-button.tsx","components/post-detail/post-detail.tsx","utils/router-scroll-restoration.tsx","components/account-setting/section-wrapper.tsx","components/account-setting/update-avatar/get-cropped-image.ts","components/account-setting/update-avatar/update-avatar.tsx","requests/use-update-avatar.tsx","components/account-setting/update-avatar/use-resize-image.tsx","components/account-setting/account-setting.tsx","containers/account-setting-container.tsx","components/confetti/confetti.ts","components/confetti/confetti-wrapper.tsx","inner-app.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["LoginStatusActionTypes","defaultState","loginStatus","isLogin","username","token","access","refresh","snackbar","open","message","confetti","updateLoginStatus","newStatus","type","UPDATE_LOGIN_STATUS","ConfettiActionTypes","SnackbarActionTypes","state","action","LOGOUT","REFRESH_TOKEN","Object","assign","newAccessToken","openConfetti","dispatch","OPEN_CONFETTI","window","setTimeout","CLOSE_CONFETTI","openSnackbarWithConfetti","openSnackbar","OPEN_SNACKBAR","CLOSE_SNACKBAR","rootReducers","combineReducers","loggerMiddleware","createLogger","theme","createMuiTheme","palette","primary","main","contrastText","secondary","text","background","default","typography","responsiveFontSizes","useFullHeight","ref","useState","height","setHeight","useEffect","current","getBoundingClientRect","useStyles","makeStyles","root","width","margin","spacing","display","flexDirection","alignItems","justifyContent","overflow","image","objectFit","breakpoints","down","content","padding","textField","fontWeight","link","color","LoginCommon","children","imageUrl","classes","containerRef","useRef","Paper","elevation","className","style","src","process","alt","title","button","backgroundColor","textTransform","borderBottom","borderRadius","opacity","FormButton","disabled","form","variant","disableElevation","useInputField","defaultValue","validator","value","setValue","error","setError","errorMessage","setErrorMessage","e","target","reference","validatorResult","isValid","usernameValidator","length","emailValidator","indexOf","passwordValidator","confirmPasswordValidator","postTitleValidator","commentValidator","execValidators","validators","validationResults","map","_","i","base","postBase","urls","login","accountBase","register","verifySession","updateAvatar","getPostList","tag","page","url","popularPosts","getPostDetail","id","createPost","editPost","deletePost","tagList","createComment","commentBase","like","userActionsBase","pinPost","allPinnedPosts","blacklist","useRedirectBack","history","useHistory","location","useLocation","from","pathname","replace","useLogin","loading","setLoading","useDispatch","goBack","email","password","fetch","method","headers","body","JSON","stringify","then","res","json","status","data","catch","ErrorMessage","spinnerSize","Typography","component","Box","CircularProgress","size","Login","setEmail","emailError","emailErrorMessage","validateEmail","setPassword","passwordError","passwordErrorMessage","validatePassword","onSubmit","preventDefault","Grid","container","item","xs","textAlign","justify","TextField","label","name","onChange","helperText","Divider","to","useRegister","confirmPassword","Register","setUsername","usernameError","usernameErrorMessage","setConfirmPassword","confirmPasswordError","confirmPasswordErrorMessage","md","mb","Alert","severity","letterSpacing","ThemeButton","onClick","Link","useRedirectToHome","useLogout","toHome","clientSideLogout","LoggedInUserPanel","logout","AnonymousUserPanel","fontFamily","join","fontSize","fontStyle","whiteSpace","light","Logo","headerDimension","position","zIndex","appBar","left","top","placeholder","widthWrapper","values","logo","flex","buttonGroup","Header","HeaderContainer","connect","GENERIC_ERROR_MESSAGE","useRedirectToLogin","push","useFetchWithTokenVerification","useStore","getState","refreshToken","redirectToLogin","getAccessHeader","redirect","options","a","undefined","noAuthenticationHandler","Promise","resolve","reject","refreshRes","refreshJson","console","log","messages","useRequestState","setData","resetError","useCallback","useProtectedGet","redirectInvalidToken","fetchWithTokenVerification","doGet","useGetPostList","prevTag","usePrevious","prevPage","months","getTimeString","ISOString","date","Date","hour","getHours","minute","getMinutes","getDate","getMonth","getFullYear","usePost","doPost","callbackOnSuccess","callbackOnError","callbackOnUnknownError","useLike","updatedData","errorCallback","unknownErrorCallback","likeButtons","marginLeft","buttonText","lineHeight","grey","LikeButtons","likes","dislikes","isLiked","likeLoading","likedByUser","dislikedByUser","IconButton","aria-label","green","red","TagChipCommon","Chip","clickable","chipRoot","chipLabel","fade","transitions","create","chipLabelSmall","caption","chipLabelNormal","TagChip","_classes","toUpperCase","paper","minHeight","avatar","author","actionArea","actionItem","Post","is_liked","Avatar","owner","avatar_url","charAt","comments","created","timeoutID","warning","noWrap","textDecoration","ServerWakingNotification","isLoaded","active","setActive","isMount","setIsMount","cleanUp","clearTimeout","showNotification","handleLoaded","turnToInactive","unMount","useServerWaking","Fade","in","timeout","onExited","href","rel","useQuery","URLSearchParams","search","Pagination","count","query","shape","renderItem","set","toString","PaginationItem","inheritColor","body2","ActiveTagChip","onDelete","deletable","tags","PostList","Array","fill","my","key","Skeleton","animation","posts","total_pages","current_page","PostListContainer","maxWidth","GenericClickButton","Button","GenericLinkButton","titleText","SideBarSection","isLoading","rowWrapper","SideBarTop","useCallbackDidMount","callback","shouldExecute","isCallbackExecuted","useCancelRequestBeforeUnmount","CancelTokenRef","axios","CancelToken","sourceRef","getAxiosToken","useMemo","source","forEach","cancel","useUnprotectedGet","fetchWhenComponentDidMount","get","cancelToken","useGetTagList","SideBarListViewItem","barWidth","number","barPercentage","transition","textOverflow","paddingLeft","barWrapper","bottom","barItem","SideBarListView","items","bars","maxCount","reduce","b","Math","max","toFixed","index","routes","home","postDetail","accountSetting","fallback","params","entries","pair","postID","getEditPost","SideBarTags","obj","toLowerCase","sort","useGetPopularPosts","SideBarPopular","post","view_count","SideBar","SideBarContainer","useGetPinnedPosts","useMount","PinnedPosts","PostPostsContainer","flexWrap","right","sectionTitlePaper","sectionTitle","MainPage","createStyles","Snackbar","closeSnackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","SnackbarContent","SnackbarContainer","userStyles","listStyleType","header","FooterColumn","column1","copyright","Footer","PrivateRoute","rest","render","removeUnusedObjectURL","objectURLArray","filter","getForm","FormData","append","promiseArray","getBlobFromObjectURL","all","blobs","blob","urlComponents","split","filename","usePostSubmission","submitted","setSubmitted","updatePostID","imageUploadHandler","editor","objectURLs","input","document","createElement","setAttribute","click","onchange","files","loadImage","canvas","toBlob","objectURL","URL","createObjectURL","range","getSelection","cursorPosition","insertEmbed","setSelection","orientation","useEditor","ID","quill","setQuill","Image","Quill","import","sanitize","quillInstance","modules","toolbar","clipboard","matchVisual","scrollingContainer","getModule","addHandler","delta","convert","setContents","useSetTitle","useGetPostDetail","icon","menuItemRoot","menuRoot","TagSelector","tagValue","tagChangeHandler","Select","displayEmpty","disableUnderline","MenuProps","MenuItem","marginBottom","PostEditorForm","updatePost","defaultTitle","defaultTag","getObjectURLArray","setContent","titleChangeHandler","titleError","titleErrorMessage","validateTitle","setTag","submit","isEditorHydrated","FormControl","InputLabel","htmlFor","Input","aria-describedby","FormHelperText","innerHTML","mt","PostEditor","useParams","needData","setNeedData","postDetailError","postDetailData","fetchPostDetail","tagListError","parseInt","showEditor","useReload","useCommentSubmission","reload","parentPost","parentComment","CommentInput","comment","commentChangeHandler","commentError","commentErrorMessage","validateComment","avatarSmall","iconTextItem","ItemInfo","avatarUrl","edited","small","viewCount","_isLiked","Tooltip","SubCommentItem","commentButton","subCommentPanel","border","CommentItem","isCommentPanelOpen","setIsCommentPanelOpen","startIcon","prev","sub_comments","ThemeLink","fromState","_to","loginToLeaveMessage","CommentList","itemData","useInsertedHTMLStyle","overflowWrap","wordWrap","backgroundPosition","backgroundRepeat","backgroundSize","maxHeight","useDelete","successCallback","confirmButton","DeleteButton","dialog","setDialog","closeDialog","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","textColor","success","EditButton","usePin","pin","isPinned","orange","PinButton","inputIsPinned","is_pinned","center","PostDetail","insertedHTMLClasses","HTMLStringContainerRef","is_owner","dangerouslySetInnerHTML","__html","comments_data","RouterScrollRestoration","previousPathname","previousSearch","scrollTo","SectionWrapper","getCroppedImg","Stage","crop","scale","fileName","x","y","ctx","getContext","drawImage","useUpdateAvatar","file","useResizeImage","setWidth","resize","containerWidth","getWidthHeight","naturalWidth","naturalHeight","finalWidth","finalHeight","onload","imageNaturalWidth","imageNaturalHeight","min","round","row","backNextButtons","centering","FinishStage","restart","ConfirmStage","back","next","upload","imgWidth","imgHeight","GoNext","CropStage","setImage","setCrop","cropperWrapperRef","cropperSize","setCropperSize","goNext","croppedSrc","aspect","unit","justifySelf","newCrop","ruleOfThirds","onImageError","onImageLoaded","UploadStage","inputRef","handleFiles","img","toDataURL","addEventListener","removeEventListener","accept","UpdateAvatar","UPLOAD","stage","setStage","imageSrc","_setImageSrc","croppedImageBlob","_setCroppedImageBlob","moveToUploadStage","moveToCropStage","CROP","cropped","CONFIRM","FINISH","AccountSetting","AccountSettingContainer","COLORS","ConfettiSprite","r","rotation","vx","vy","finished","dx","dy","g","dr","dOpacity","dRotation","random","ddRotation","this","floor","getColor","PI","nextOpacity","Confetti","sprites","initParams","loop","bind","defaultOptions","spritesCount","getElementById","ellipse","drawer","arc","clearRect","save","beginPath","fillStyle","globalAlpha","restore","move","draw","update","requestAnimationFrame","initCanvas","initSprites","initDrawer","ConfettiWrapper","tooltip","InnerAppContainer","basename","path","exact","store","DEBUG","createStore","applyMiddleware","thunkMiddleware","App","ThemeProvider","CssBaseline","Boolean","hostname","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f536145d.chunk.js","sourcesContent":["import {State, defaultState} from \"../state\";\n\nexport enum LoginStatusActionTypes {\n    'UPDATE_LOGIN_STATUS'='UPDATE_LOGIN_STATUS',\n    'LOGOUT'='LOGOUT',\n    'REFRESH_TOKEN'='REFRESH_TOKEN'\n}\n\nexport type LoginStatusAction = ReturnType<typeof logout> | ReturnType<typeof updateLoginStatus> | ReturnType<typeof refreshToken>\n\nexport function logout() {\n    return {\n        type: LoginStatusActionTypes.LOGOUT as typeof LoginStatusActionTypes.LOGOUT,\n        newStatus: defaultState.loginStatus\n    }\n}\n\nexport function updateLoginStatus(newStatus: State['loginStatus']) {\n    return {\n        type: LoginStatusActionTypes.UPDATE_LOGIN_STATUS as typeof LoginStatusActionTypes.UPDATE_LOGIN_STATUS,\n        newStatus\n    }\n}\n\nexport function refreshToken(newAccessToken: State['loginStatus']['token']['access']) {\n    return {\n        type: LoginStatusActionTypes.REFRESH_TOKEN as typeof LoginStatusActionTypes.REFRESH_TOKEN,\n        newAccessToken\n    }\n}","export interface State {\n    loginStatus: {\n        isLogin: boolean,\n        username: string,\n        token: {\n            access: string,\n            refresh: string\n        }\n    },\n    snackbar: {\n        open: boolean,\n        message: string\n    },\n    confetti: boolean\n}\n\nexport const defaultState: State = {\n    loginStatus: {\n        isLogin: false,\n        username: '',\n        token: {\n            access: '',\n            refresh: ''\n        }\n    },\n    snackbar: {\n        open: false,\n        message: ''\n    },\n    confetti: false\n};","import {defaultState, State} from \"../state\";\nimport {LoginStatusAction, LoginStatusActionTypes} from \"../actions/login-status\";\n\n\nfunction loginStatus(\n    state = defaultState.loginStatus,\n    action: LoginStatusAction\n): State['loginStatus'] {\n    switch (action.type) {\n        case LoginStatusActionTypes.UPDATE_LOGIN_STATUS:\n            return action.newStatus;\n        case LoginStatusActionTypes.LOGOUT:\n            return action.newStatus;\n        case LoginStatusActionTypes.REFRESH_TOKEN:\n            const newStatus = Object.assign({}, state);\n            newStatus.token.access = action.newAccessToken;\n            return newStatus;\n        default:\n            return state\n    }\n}\n\nexport default loginStatus;","import {ThunkDispatch} from \"redux-thunk\";\nimport {State} from \"../state\";\n\nexport enum ConfettiActionTypes {\n    'CLOSE_CONFETTI'='CLOSE_CONFETTI',\n    'OPEN_CONFETTI'='OPEN_CONFETTI',\n}\n\nexport type ConfettiActions = ReturnType<typeof openConfetti>\n\nexport function openConfetti(): any {\n    return (dispatch: ThunkDispatch<State, null, ConfettiActions>) => {\n        dispatch(_openConfetti());\n        window.setTimeout(() => dispatch(_closeConfetti()), 2000)\n    }\n}\n\nfunction _openConfetti() {\n    return {\n        type: ConfettiActionTypes.OPEN_CONFETTI as typeof ConfettiActionTypes.OPEN_CONFETTI,\n    }\n}\n\nfunction _closeConfetti() {\n    return {\n        type: ConfettiActionTypes.CLOSE_CONFETTI as typeof ConfettiActionTypes.CLOSE_CONFETTI,\n    }\n}\n","import {ThunkDispatch} from \"redux-thunk\";\nimport {State} from \"../state\";\nimport {ConfettiActions, openConfetti} from \"./confetti\";\n\nexport enum SnackbarActionTypes {\n    'CLOSE_SNACKBAR'='CLOSE_SNACKBAR',\n    'OPEN_SNACKBAR'='OPEN_SNACKBAR',\n}\n\nexport type SnackbarAction = ReturnType<typeof openSnackbar> | ReturnType<typeof closeSnackbar>\n\nexport function openSnackbarWithConfetti(message: string) {\n    return (dispatch: ThunkDispatch<State, null, ConfettiActions>) => {\n        dispatch(openSnackbar(message));\n        window.setTimeout(() => dispatch(openConfetti()), 300)\n    };\n}\n\nexport function openSnackbar(message: string) {\n    return {\n        type: SnackbarActionTypes.OPEN_SNACKBAR as typeof SnackbarActionTypes.OPEN_SNACKBAR,\n        message\n    }\n}\n\nexport function closeSnackbar() {\n    return {\n        type: SnackbarActionTypes.CLOSE_SNACKBAR as typeof SnackbarActionTypes.CLOSE_SNACKBAR,\n    }\n}\n","import {defaultState, State} from \"../state\";\nimport {SnackbarAction, SnackbarActionTypes} from \"../actions/snackbar\";\n\n\nfunction snackbar (\n    state = defaultState.snackbar,\n    action: SnackbarAction\n): State['snackbar'] {\n    switch (action.type) {\n        case SnackbarActionTypes.OPEN_SNACKBAR:\n            return {\n                open: true,\n                message: action.message\n            };\n        case SnackbarActionTypes.CLOSE_SNACKBAR:\n            return defaultState.snackbar;\n        default:\n            return state\n    }\n}\n\nexport default snackbar;","import {defaultState, State} from \"../state\";\nimport {ConfettiActions, ConfettiActionTypes} from \"../actions/confetti\";\n\n\nfunction confetti (\n    state = defaultState.confetti,\n    action: ConfettiActions\n): State['confetti'] {\n    switch (action.type) {\n        case ConfettiActionTypes.OPEN_CONFETTI:\n            return true;\n        case ConfettiActionTypes.CLOSE_CONFETTI:\n            return false;\n        default:\n            return state\n    }\n}\n\nexport default confetti;","import {combineReducers} from \"redux\";\nimport loginStatus from \"./login-status\";\nimport snackbar from \"./snakbar\";\nimport confetti from \"./confetti\";\n\nconst rootReducers = combineReducers({\n    loginStatus,\n    snackbar,\n    confetti\n});\n\nexport default rootReducers;","import { createStore, applyMiddleware } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport rootReducers from \"./reducers/root-reducers\";\nimport {defaultState} from \"./state\";\n\nimport { createLogger } from 'redux-logger'\nconst loggerMiddleware = createLogger();\n\n\nexport default function configureStore() {\n    if (process.env.DEBUG === 'true') {\n        return createStore(\n            rootReducers,\n            defaultState,\n            applyMiddleware(thunkMiddleware, loggerMiddleware)\n        )\n    } else {\n        return createStore(\n            rootReducers,\n            defaultState,\n            applyMiddleware(thunkMiddleware)\n        )\n    }\n}","import {createMuiTheme, responsiveFontSizes} from \"@material-ui/core/styles\";\n\nlet theme = createMuiTheme({\n    palette: {\n        primary: {\n            main: '#41b3a3',\n            contrastText: '#fff',\n        },\n        secondary: {\n            main: '#e8a87c',\n            contrastText: '#fff',\n        },\n        text: {\n            primary: '#4a5568'\n        },\n        background: {\n            default: 'rgb(241, 242, 245)'\n        },\n    },\n    typography: {\n        \"fontFamily\": \"system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji\",\n        \"fontSize\": 14,\n        \"fontWeightLight\": 300,\n        \"fontWeightRegular\": 400,\n        \"fontWeightMedium\": 500\n    },\n});\ntheme = responsiveFontSizes(theme);\n\nexport default theme;\n","import React, {useEffect, useState} from \"react\";\n\nconst useFullHeight = (ref: React.RefObject<HTMLDivElement>) => {\n    const [height, setHeight] = useState(0);\n\n    useEffect(() => {\n        if (!ref.current) return;\n        setHeight(ref.current.getBoundingClientRect().height)\n    }, [ref]);\n\n    return height\n};\n\nexport default useFullHeight","import React, {useRef} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Paper} from \"@material-ui/core\";\nimport useFullHeight from \"../../../utils/use-full-height\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        margin: theme.spacing(2, 0),\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        overflow: 'hidden',\n    },\n    image: {\n        width: '40%',\n        height: '0',\n        '& img': {\n            width: '100%',\n            height: '100%',\n            objectFit: 'cover'\n        },\n        [theme.breakpoints.down('sm')]: {\n            display:'none'\n        }\n    },\n    content: {\n        width: '60%',\n        padding: theme.spacing(10, 5),\n        [theme.breakpoints.down('sm')]: {\n            width: '100%'\n        }\n    },\n    textField: {\n        width: '100%',\n        fontWeight: 700\n    },\n    link: {\n        fontWeight: 700,\n        '& a:link': {\n            color: theme.palette.primary.main\n        },\n        '& a:visited': {\n            color: theme.palette.primary.main\n        },\n        '& a:hover': {\n            color: theme.palette.secondary.main\n        }\n    }\n}));\n\ninterface LoginCommonProps {\n    imageUrl: string\n}\n\nconst LoginCommon: React.FC<LoginCommonProps> = ({children, imageUrl}) => {\n    const classes = useStyles();\n\n    const containerRef = useRef<HTMLDivElement>(null);\n    const height = useFullHeight(containerRef);\n\n    return (\n        <Paper elevation={0} className={classes.root} ref={containerRef}>\n            <div className={classes.image} style={{height: `${height}px`}}>\n                <img\n                    src={process.env.PUBLIC_URL + imageUrl}\n                    alt={'login background'}\n                    title={'login background'}\n                />\n            </div>\n            <div className={classes.content}>\n                { children }\n            </div>\n        </Paper>\n    )\n};\n\nexport default LoginCommon","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Button as MuiButton} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        width: '100%',\n        backgroundColor: theme.palette.primary.main,\n        color: '#fff',\n        fontWeight: 700,\n        textTransform: 'none',\n        borderBottom: '2px solid rgba(0,0,0,0.1)',\n        borderRadius: '5px',\n        '&:hover': {\n            backgroundColor: theme.palette.secondary.main\n        },\n        '&:disabled': {\n            backgroundColor: theme.palette.secondary.main,\n            opacity: 0.7\n        }\n    }\n}));\n\ninterface ButtonProps {\n    text: string,\n    disabled: boolean,\n    form: string\n}\n\nconst FormButton: React.FC<ButtonProps> = ({text, disabled, form}) => {\n    const classes = useStyles();\n\n    return (\n        <MuiButton variant=\"contained\" classes={{root: classes.button}} disableElevation type={'submit'} form={form} disabled={disabled}>\n            { text }\n        </MuiButton>\n    )\n};\n\nexport default FormButton\n","import {ChangeEvent, useState} from \"react\";\nimport {Validator} from \"./validators\";\n\ntype ChangeHandler = (e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void\n\nconst useInputField = (\n    defaultValue: string,\n    validator: Validator\n) => {\n    const [value, setValue] = useState(defaultValue);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const validate = (reference?: string) => {\n        const validatorResult = reference ? validator(value, reference) : validator(value);\n        setError(!validatorResult.isValid);\n        setErrorMessage(validatorResult.message);\n\n        return validatorResult.isValid as boolean\n    };\n\n    const changeHandler: ChangeHandler = (e) => {\n        if (error) setError(false);\n        setValue(e.target.value)\n    };\n\n    return [value, changeHandler, error, errorMessage, validate] as [string, ChangeHandler, boolean, string, typeof validate]\n};\n\nexport default useInputField\n","export type Validator = (value: string, reference?: string) => {isValid: boolean, message: string}\n\nconst usernameValidator: Validator = (value) => {\n    let isValid = true;\n    let message = '';\n\n    if (value.length >= 30) {\n        isValid = true;\n        message = 'Username length must be less than 30 characters';\n    } else if (value.length === 0) {\n        isValid = true;\n        message = 'Username cannot be empty';\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst emailValidator: Validator = (value) => {\n    let isValid = true;\n    let message = '';\n\n    if (value.indexOf('@') === -1) {\n        isValid = false;\n        message = 'Invalid Email format'\n    } else if (value.indexOf('.') === -1) {\n        isValid = false;\n        message = 'Invalid Email format'\n    } else if (value.length === 0) {\n        isValid = false;\n        message = 'Email cannot be empty';\n    } else if (value.length >= 60) {\n        isValid = false;\n        message = 'Email too long';\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst passwordValidator: Validator = (value) => {\n    let isValid = true;\n    let message = '';\n\n    if (value.length === 0) {\n        isValid = false;\n        message = 'Email cannot be empty';\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst confirmPasswordValidator: Validator = (value, reference) => {\n    let isValid = true;\n    let message = '';\n\n    if (value !== reference) {\n        message = 'Not same as the password';\n        isValid = false;\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst postTitleValidator: Validator = (value) => {\n    let isValid = true;\n    let message = '';\n\n    if (value.length === 0) {\n        message = 'Title cannot be empty';\n        isValid = false;\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst commentValidator: Validator = (value) => {\n    let isValid = true;\n    let message = '';\n\n    if (value.length === 0) {\n        message = 'Comment cannot be empty';\n        isValid = false;\n    } else if (value.length < 5) {\n        message = 'Comment needs to be at least 5 characters';\n        isValid = false;\n    }\n\n    return {\n        isValid,\n        message\n    }\n};\n\nconst execValidators = (validators: (()=>boolean)[]) => {\n    const validationResults = validators.map(_ => _());\n    for (let i=0; i<validationResults.length; i++) {\n        if (!validationResults[i]) {\n            return false\n        }\n    }\n\n    return true\n};\n\nexport {\n    usernameValidator,\n    emailValidator,\n    passwordValidator,\n    confirmPasswordValidator,\n    execValidators,\n    postTitleValidator,\n    commentValidator\n}","const base = 'https://django-api-xiaoxihome.herokuapp.com/api/discussion_board/';\n// const base = 'http://127.0.0.1:8000/api/discussion_board/';\n\nconst accountBase = base + 'account/';\nconst login = accountBase + 'login/';\nconst register = accountBase + 'register/';\nconst verifySession = accountBase + 'verify_session/';\nconst refresh = accountBase + 'refresh/';\nconst updateAvatar = accountBase + 'update_avatar/';\n\nconst postBase = base + 'post/';\nconst getPostList = ({tag, page}: {tag: string | null, page: string}) => {\n    let url = postBase + `all/?page=${page}`;\n    if (tag) {\n        url += `&tag=${tag}`\n    }\n    return url\n};\nconst popularPosts = postBase + `all/?sort_by=view_count&limit=5`;\nconst getPostDetail = (id: number) => `${postBase}${id}/`;\nconst createPost = postBase + 'create/';\nconst editPost = (id: number) => `${postBase}edit/${id}/`;\nconst deletePost = (id: number) => `${postBase}delete/${id}/`;\nconst tagList = postBase + 'tag-list/';\nconst pinPost = postBase + 'pin/';\nconst allPinnedPosts = postBase + 'pinned-posts/';\n\nconst commentBase = base + 'comment/';\nconst createComment = commentBase + 'create/';\n\nconst userActionsBase = base + 'user_actions/';\nconst like = userActionsBase + 'like/';\n\nconst urls = {\n    login,\n    register,\n    verifySession,\n    refresh,\n    updateAvatar,\n    getPostList,\n    popularPosts,\n    getPostDetail,\n    createPost,\n    editPost,\n    deletePost,\n    tagList,\n    createComment,\n    like,\n    pinPost,\n    allPinnedPosts\n};\n\nexport default urls\n","import {useHistory, useLocation} from \"react-router-dom\";\n\n// redirect to \"/\" in these cases:\nconst blacklist: string[] = [\n    \"/login\",\n    \"/register\"\n];\n\nconst useRedirectBack = () => {\n    let history = useHistory();\n    let location = useLocation<any>();\n\n    const goBack = () => {\n        let from = \"/\";\n\n        if (location.state && location.state.from) {\n            if (typeof location.state.from === \"string\") {\n                if (blacklist.indexOf(location.state.from) === -1) {\n                    from = location.state.from\n                }\n            } else {\n                // from is object\n                if (location.state.from.pathname) {\n                    if (blacklist.indexOf(location.state.from.pathname) === -1) {\n                        from = Object.assign({}, location.state.from)\n                    }\n                }\n            }\n        }\n\n        history.replace(from);\n    };\n\n    return goBack\n};\n\nexport default useRedirectBack","import {useState} from \"react\";\nimport urls from \"./urls\";\nimport { useDispatch } from 'react-redux'\nimport { updateLoginStatus } from \"../redux/actions/login-status\";\nimport {openSnackbarWithConfetti} from \"../redux/actions/snackbar\";\nimport useRedirectBack from \"../utils/redirects/use-redirect-back\";\n\nconst useLogin = () => {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n    const dispatch = useDispatch();\n    const goBack = useRedirectBack();\n\n    const login = (\n        email: string,\n        password: string\n    ) => {\n        if (loading) return;\n\n        // reset states\n        setError(false);\n        setErrorMessage('');\n\n        // start fetching\n        setLoading(true);\n        fetch(urls.login, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                email,\n                password\n            })\n        })\n            .then((res) => res.json())\n            .then(json => {\n                setLoading(false);\n\n                if (json.status === 'success') {\n                    const username = json.data.username;\n                    dispatch(updateLoginStatus({\n                        isLogin: true,\n                        username: username,\n                        token: {\n                            access: json.data.access,\n                            refresh: json.data.refresh\n                        }\n                    }));\n                    goBack();\n                    dispatch(openSnackbarWithConfetti(`Welcome back ${username}`));\n                } else {\n                    setError(true);\n                    if (json.status === 'error') {\n                        setErrorMessage(json.message)\n                    } else {\n                        setErrorMessage('Server unavailable, please try again later.')\n                    }\n                }\n            })\n            .catch(e => {\n                setLoading(false);\n\n                setError(true);\n                setErrorMessage('Server unavailable, please try again later.')\n            });\n    };\n\n    return [loading, error, errorMessage, login] as [boolean, boolean, string, typeof login]\n\n};\n\nexport default useLogin","import {Box, CircularProgress, Typography} from \"@material-ui/core\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n    errorMessage: {\n        fontWeight: 700,\n        color: theme.palette.error.main\n    }\n}));\n\ninterface ErrorMessageProps {\n    loading: boolean,\n    error: boolean,\n    errorMessage: string,\n    spinnerSize?: number\n\n}\n\nconst ErrorMessage:React.FC<ErrorMessageProps> = ({loading, errorMessage, error, spinnerSize}) => {\n    const classes = useStyles();\n\n    return (\n        <Typography variant={'body1'} component={'div'}>\n            <Box className={classes.errorMessage} height={40}>\n                {   loading ?\n                        <CircularProgress color=\"primary\" size={spinnerSize || 40}/> :\n                        error && errorMessage ?\n                            errorMessage :\n                            ' '\n                }\n            </Box>\n        </Typography>\n    )\n};\n\nexport default ErrorMessage\n","import React, {FormEvent} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport LoginCommon from \"./commons/login-common\";\nimport {Box, Divider, Grid, TextField, Typography} from \"@material-ui/core\";\nimport FormButton from \"../commons/form-button\";\nimport {Link} from \"react-router-dom\";\nimport useInputField from \"../../utils/use-input-field\";\nimport {emailValidator, execValidators, passwordValidator} from \"../../utils/validators\";\nimport useLogin from \"../../requests/use-login\";\nimport ErrorMessage from \"../commons/error-message\";\n\nconst useStyles = makeStyles((theme) => ({\n    textField: {\n        width: '100%',\n        fontWeight: 700\n    },\n    link: {\n        fontWeight: 700,\n        '& a:link': {\n            color: theme.palette.primary.main\n        },\n        '& a:visited': {\n            color: theme.palette.primary.main\n        },\n        '& a:hover': {\n            color: theme.palette.secondary.main\n        }\n    }\n}));\n\ninterface LoginProps {\n\n}\n\nconst Login: React.FC<LoginProps> = () => {\n    const classes = useStyles();\n    const [email, setEmail, emailError, emailErrorMessage, validateEmail] = useInputField('', emailValidator);\n    const [password, setPassword, passwordError, passwordErrorMessage, validatePassword] = useInputField('', passwordValidator);\n\n    const [loading, error, errorMessage, login] = useLogin();\n\n    const submitHandler = (e: FormEvent) => {\n        e.preventDefault();\n\n        if (execValidators([validateEmail, validatePassword])) {\n            login(email, password)\n        }\n    };\n\n    return (\n        <LoginCommon imageUrl={'/images/login_bg.jpg'}>\n            <form onSubmit={submitHandler} id={'login-form'}>\n                <Grid container spacing={2}>\n                    <Grid item xs={12}>\n                        <Typography variant={'h5'} component={'h1'} color={\"textPrimary\"}>\n                            <Box textAlign={'center'} fontWeight={700}>\n                                Log In\n                            </Box>\n                        </Typography>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={emailError}\n                                label=\"Email\"\n                                id=\"login-email\"\n                                name=\"email\"\n                                value={email}\n                                onChange={setEmail}\n                                variant=\"outlined\"\n                                helperText={emailError ? emailErrorMessage: ' '}\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={passwordError}\n                                type=\"password\"\n                                label=\"Password\"\n                                id=\"login-password\"\n                                name=\"password\"\n                                value={password}\n                                onChange={setPassword}\n                                variant=\"outlined\"\n                                helperText={passwordError ? passwordErrorMessage : ' '}\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <FormButton text={'Log me in!'} form={'login-form'} disabled={loading}/>\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <ErrorMessage loading={loading} error={error} errorMessage={errorMessage}/>\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Divider />\n                    </Grid>\n\n                    <Grid item xs={12} className={classes.link}>\n                        <Grid container justify={'center'}>\n                            <Link to={'/register'}>\n                                Need an account?\n                            </Link>\n                        </Grid>\n                    </Grid>\n\n                </Grid>\n            </form>\n        </LoginCommon>\n    )\n\n};\n\nexport default Login\n","import {useState} from \"react\";\nimport urls from \"./urls\";\nimport { useDispatch } from 'react-redux'\nimport { updateLoginStatus } from \"../redux/actions/login-status\";\nimport {openSnackbarWithConfetti} from \"../redux/actions/snackbar\";\nimport useRedirectBack from \"../utils/redirects/use-redirect-back\";\n\nconst useRegister = () => {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n    const dispatch = useDispatch();\n    const goBack = useRedirectBack();\n\n    const register = (\n        username: string,\n        email: string,\n        password: string,\n        confirmPassword: string\n    ) => {\n        if (loading) return;\n\n        // reset states\n        setError(false);\n        setErrorMessage('');\n\n        // start fetching\n        setLoading(true);\n        fetch(urls.register, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                username,\n                email,\n                password,\n                'confirm_password': confirmPassword\n            })\n        })\n            .then((res) => res.json())\n            .then(json => {\n                setLoading(false);\n\n                if (json.status === 'success') {\n                    dispatch(updateLoginStatus({\n                        isLogin: true,\n                        username: json.data.username,\n                        token: {\n                            access: json.data.access,\n                            refresh: json.data.refresh\n                        }\n                    }));\n\n                    goBack();\n                    dispatch(openSnackbarWithConfetti(`Welcome ${username}!`));\n                } else {\n                    setError(true);\n                    if (json.status === 'error') {\n                        setErrorMessage(json.message)\n                    } else {\n                        setErrorMessage('Server unavailable, please try again later.')\n                    }\n                }\n            })\n            .catch(e => {\n                setLoading(false);\n\n                setError(true);\n                setErrorMessage('Server unavailable, please try again later.')\n            });\n    };\n\n    return [loading, error, errorMessage, register] as [boolean, boolean, string, typeof register]\n\n};\n\nexport default useRegister","import React, {FormEvent} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Divider, Grid, TextField, Typography} from \"@material-ui/core\";\nimport FormButton from \"../commons/form-button\";\nimport {Link} from \"react-router-dom\";\nimport LoginCommon from \"./commons/login-common\";\nimport useInputField from \"../../utils/use-input-field\";\nimport {\n    confirmPasswordValidator,\n    emailValidator,\n    execValidators,\n    passwordValidator,\n    usernameValidator\n} from \"../../utils/validators\";\nimport ErrorMessage from \"../commons/error-message\";\nimport useRegister from \"../../requests/use-register\";\nimport {Alert} from \"@material-ui/lab\";\n\nconst useStyles = makeStyles((theme) => ({\n    textField: {\n        width: '100%',\n        fontWeight: 700\n    },\n    link: {\n        fontWeight: 700,\n        '& a:link': {\n            color: theme.palette.primary.main\n        },\n        '& a:visited': {\n            color: theme.palette.primary.main\n        },\n        '& a:hover': {\n            color: theme.palette.secondary.main\n        }\n    }\n}));\n\ninterface RegisterProps {\n\n}\n\nconst Register: React.FC<RegisterProps> = () => {\n    const classes = useStyles();\n\n    const [username, setUsername, usernameError, usernameErrorMessage, validateUsername] = useInputField('', usernameValidator);\n    const [email, setEmail, emailError, emailErrorMessage, validateEmail] = useInputField('', emailValidator);\n    const [password, setPassword, passwordError, passwordErrorMessage, validatePassword] = useInputField('', passwordValidator);\n    const [confirmPassword, setConfirmPassword, confirmPasswordError, confirmPasswordErrorMessage, validateConfirmPassword] = useInputField('', confirmPasswordValidator);\n\n    const [loading, error, errorMessage, register] = useRegister();\n\n    const submitHandler = (e: FormEvent) => {\n        e.preventDefault();\n        const validationCheck1 = execValidators([validateUsername, validateEmail, validatePassword]);\n        const validationCheck2 =  validateConfirmPassword(password);\n        if (validationCheck1 && validationCheck2) {\n            register(username, email, password, confirmPassword)\n        }\n    };\n\n    const formID = 'register-form';\n\n    return (\n        <LoginCommon imageUrl={'/images/register_bg.jpg'}>\n            <form onSubmit={() => false} id={formID}>\n                <Grid container spacing={2}>\n                    <Grid item xs={12}>\n                        <Typography variant={'h5'} component={'h1'} color={\"textPrimary\"}>\n                            <Box textAlign={'center'} fontWeight={700}>\n                                Join Us\n                            </Box>\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={usernameError}\n                                label=\"Username\"\n                                id=\"register-username\"\n                                name=\"username\"\n                                value={username}\n                                onChange={setUsername}\n                                helperText={usernameError ? usernameErrorMessage: ' '}\n                                variant=\"outlined\"\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={emailError}\n                                label=\"Email\"\n                                id=\"register-email\"\n                                name=\"email\"\n                                value={email}\n                                onChange={setEmail}\n                                helperText={emailError ? emailErrorMessage: ' '}\n                                variant=\"outlined\"\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={passwordError}\n                                label=\"Password\"\n                                name=\"password\"\n                                id=\"register-password\"\n                                type=\"password\"\n                                value={password}\n                                onChange={setPassword}\n                                helperText={passwordError ? passwordErrorMessage: ' '}\n                                variant=\"outlined\"\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                        <Grid container justify={'center'}>\n                            <TextField\n                                error={confirmPasswordError}\n                                label=\"Confirm Password\"\n                                name=\"confirm-password\"\n                                id=\"register-confirm-password\"\n                                type=\"password\"\n                                value={confirmPassword}\n                                onChange={setConfirmPassword}\n                                helperText={confirmPasswordError ? confirmPasswordErrorMessage: ' '}\n                                variant=\"outlined\"\n                                className={classes.textField}\n                            />\n                        </Grid>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <Box mb={2}>\n                            <Alert severity={'info'}>\n                                Signing up is disabled at the moment\n                            </Alert>\n                        </Box>\n                        <Grid container justify={'center'}>\n                            <FormButton text={'I\\'m in!'} form={formID} disabled={true}/>\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Grid container justify={'center'}>\n                            <ErrorMessage loading={loading} error={error} errorMessage={errorMessage}/>\n                        </Grid>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Divider />\n                    </Grid>\n                    <Grid item xs={12} className={classes.link}>\n                        <Grid container justify={'center'}>\n                            <Link to={'/login'}>\n                                Already have an account?\n                            </Link>\n                        </Grid>\n                    </Grid>\n\n                </Grid>\n            </form>\n        </LoginCommon>\n    )\n};\n\nexport default Register\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Button as MuiButton} from \"@material-ui/core\";\nimport {Link, useLocation} from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        backgroundColor: 'rgba(255,255,255,0.3)',\n        color: '#fff',\n        fontWeight: 700,\n        textTransform: 'capitalize',\n        letterSpacing: 'inherit',\n        borderBottom: '2px solid rgba(0,0,0,0.1)',\n        borderRadius: '5px',\n        // margin: '0 4px',\n        padding: '4px 10px',\n        '&:hover': {\n            backgroundColor: theme.palette.secondary.main\n        }\n    }\n}));\n\ninterface ButtonProps {\n    text: string,\n    url?: string,\n    onClick?: () => void\n}\n\nconst ThemeButton: React.FC<ButtonProps> = ({text, url, onClick}) => {\n    const classes = useStyles();\n    const location = useLocation();\n\n    if (url) {\n        const to = {\n            pathname: url,\n            state: {\n                from: location.pathname\n            }\n        };\n        return (\n            <MuiButton variant=\"contained\" classes={{root: classes.button}} disableElevation component={Link} to={to}>\n                { text }\n            </MuiButton>\n        )\n    } else {\n        return (\n            <MuiButton variant=\"contained\" classes={{root: classes.button}} disableElevation onClick={onClick}>\n                { text }\n            </MuiButton>\n        )\n    }\n};\n\nexport default ThemeButton\n","import {useHistory} from \"react-router-dom\";\n\nconst useRedirectToHome = () => {\n    const history = useHistory();\n\n    const toHome = () => {\n        history.replace('/404');\n        history.replace('/');\n    };\n\n    return toHome\n};\n\nexport default useRedirectToHome","import {useState} from \"react\";\nimport { useDispatch } from 'react-redux'\nimport {logout as logoutAction} from \"../redux/actions/login-status\";\nimport {openSnackbar} from \"../redux/actions/snackbar\";\nimport useRedirectToHome from \"../utils/redirects/use-redirect-to-home\";\n\nconst useLogout = () => {\n    const [loading, setLoading] = useState(false);\n    const dispatch = useDispatch();\n    const toHome = useRedirectToHome();\n\n    const clientSideLogout = () => {\n        dispatch(logoutAction());\n        toHome();\n\n        dispatch(openSnackbar('Logout succeeded'))\n    };\n\n    const logout = () => {\n        clientSideLogout()\n    };\n\n    return [loading, logout] as [typeof loading, typeof logout]\n\n};\n\nexport default useLogout","import ThemeButton from \"../commons/theme-button\";\nimport React from \"react\";\nimport {Box, CircularProgress, Grid, Typography} from \"@material-ui/core\";\nimport useLogout from \"../../requests/use-logout\";\n\ninterface LoggedInUserPanelProps {\n    username: string\n}\n\nconst LoggedInUserPanel: React.FC<LoggedInUserPanelProps> = ({username}) => {\n    const [loading, logout] = useLogout();\n\n    return (\n        <Grid container alignItems={\"center\"} justify={\"center\"} spacing={1}>\n            <Grid item>\n                <Typography component={'div'}>\n                    <Box>\n                        { username }\n                    </Box>\n                </Typography>\n            </Grid>\n            <Grid item>\n                {\n                    loading ?\n                        <CircularProgress color=\"secondary\" size={'1rem'}/> :\n                        <ThemeButton text={'Logout'} onClick={logout}/>\n                }\n            </Grid>\n        </Grid>\n    )\n};\n\nexport default LoggedInUserPanel","import ThemeButton from \"../commons/theme-button\";\nimport React from \"react\";\nimport {Grid} from \"@material-ui/core\";\n\nconst AnonymousUserPanel: React.FC = () => {\n    return (\n        <Grid container alignItems={\"center\"} justify={\"center\"} spacing={1}>\n            <Grid item>\n                <ThemeButton text={'Join'} url={'/register'}/>\n            </Grid>\n            <Grid item>\n                <ThemeButton text={'Login'} url={'/login'}/>\n            </Grid>\n        </Grid>\n    )\n};\n\nexport default AnonymousUserPanel","import {Box, Typography} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\nimport React from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        fontFamily: [\n            'Oleo Script Swash Caps',\n            'sans-serif',\n        ].join(','),\n        fontWeight: 700,\n        fontSize: '1.75rem',\n        fontStyle: \"normal\",\n        color: theme.palette.primary.contrastText,\n        whiteSpace: 'nowrap',\n        width: 'fit-content',\n        [theme.breakpoints.down('sm')]: {\n            fontSize: '1.25rem',\n        },\n    },\n    link: {\n        '&:hover': {\n            color: theme.palette.secondary.light,\n        }\n    }\n}));\n\nconst Logo: React.FC = () => {\n    const classes = useStyles();\n\n    return (\n        <Typography variant={'h1'} component={'h1'} className={classes.root}>\n            <Box fontWeight={700} textAlign={\"center\"}>\n                <Link to={'/'} className={classes.link}>\n                    Blog | XiaoxiHome\n                </Link>\n            </Box>\n        </Typography>\n    )\n};\n\nexport default Logo\n","import React from 'react';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport LoggedInUserPanel from \"./logged-in-user-panel\";\nimport AnonymousUserPanel from \"./anonymous-user-panel\";\nimport Logo from \"../commons/logo\";\n\ninterface HeaderProps {\n    isLogin: boolean,\n    username: string,\n}\n\nconst useStyles = makeStyles((theme) => ({\n    headerDimension: {\n        width: '100%',\n        height: '80px',\n    },\n    root: {\n        width: '100%',\n        height: '80px',\n        backgroundColor: theme.palette.primary.main,\n        position: 'fixed',\n        zIndex: theme.zIndex.appBar,\n        left: 0,\n        top: 0,\n        color: theme.palette.primary.contrastText,\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center'\n    },\n    placeholder: {\n        position: 'relative',\n    },\n    widthWrapper: {\n        width: theme.breakpoints.values['md'],\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: theme.spacing(0, 1),\n        [theme.breakpoints.down('sm')]: {\n            width: '100%',\n        },\n    },\n    logo: {\n        flex: 1\n    },\n    buttonGroup: {\n\n    },\n    button: {\n        backgroundColor: 'rgba(255,255,255,0.5)',\n        color: '#fff',\n        fontWeight: 700,\n        textTransform: 'capitalize',\n        '&:hover': {\n            backgroundColor: theme.palette.secondary.main\n        }\n    }\n}));\n\n\nconst Header: React.FC<HeaderProps> = ({isLogin, username}) => {\n    const classes = useStyles();\n\n    return (\n        <header className={`${classes.placeholder} ${classes.headerDimension}`}>\n            <div className={`${classes.root} ${classes.headerDimension}`}>\n                <div className={classes.widthWrapper}>\n                    <div className={classes.logo}>\n                        <Logo/>\n                    </div>\n                    <div className={classes.buttonGroup}>\n                        { isLogin ? <LoggedInUserPanel username={username}/> : <AnonymousUserPanel />}\n                    </div>\n                </div>\n            </div>\n        </header>\n    )\n};\n\nexport default Header;\n","import {connect} from \"react-redux\";\nimport Header from \"../components/header/header\";\nimport {State} from \"../redux/state\";\n\nfunction mapStateToProps(state: State) {\n    return {\n        isLogin: state.loginStatus.isLogin,\n        username: state.loginStatus.username\n    }\n}\n\nconst HeaderContainer = connect(\n    mapStateToProps\n)(Header);\n\nexport default HeaderContainer;\n","const GENERIC_ERROR_MESSAGE = 'Server is not available right now, please try again later';\n\nexport default GENERIC_ERROR_MESSAGE","import {useHistory, useLocation} from \"react-router-dom\";\n\nconst useRedirectToLogin = () => {\n    const history = useHistory();\n    const location = useLocation();\n\n    const redirectToLogin = () => {\n        history.push({\n            pathname: \"/login\",\n            state: {\n                from: location.pathname\n            }\n        });\n    };\n\n    return redirectToLogin\n};\n\nexport default useRedirectToLogin","import urls from \"../urls\";\nimport {useDispatch, useStore} from 'react-redux'\nimport { refreshToken as refreshTokenAction } from '../../redux/actions/login-status'\nimport {State} from \"../../redux/state\";\nimport useRedirectToLogin from \"../../utils/redirects/use-redirect-to-login\";\n\n/**\n * enhanced fetch with JWT token verification, and token refreshing when needed\n * return a promise of actual fetch if token is valid or refreshed successfully\n * if specified by @param redirect, redirect to login page if token is invalid or expired\n * no need to pass Authorization Header in @param options\n */\nconst useFetchWithTokenVerification = () => {\n    const state = useStore<State>().getState();\n    const isLogin = state.loginStatus.isLogin;\n    const refreshToken = state.loginStatus.token.refresh;\n    const dispatch = useDispatch();\n    const redirectToLogin = useRedirectToLogin();\n\n    const getAccessHeader = (token?: string) => ({\n        'Authorization': `Bearer ${token || state.loginStatus.token.access}`\n    });\n\n    const fetchWithTokenVerification = async (redirect: boolean, url: RequestInfo, options: RequestInit): Promise<Response> => {\n        try {\n            // delete Authorization header in options in case it is provided\n            if (options.headers !== undefined) {\n                const headers = options.headers as Record<string, string>;\n                if (headers['Authorization']) {\n                    delete headers['Authorization'];\n                    options.headers = {...headers}\n                }\n            }\n\n            const noAuthenticationHandler = (): Promise<Response> => {\n                // don't worry about unsolved promise memory leak\n                // https://stackoverflow.com/questions/20068467/does-never-resolved-promise-cause-memory-leak\n                if (redirect) {\n                    return new Promise((resolve, reject) => {\n                        redirectToLogin();\n                    });\n                } else {\n                    return fetch(url, {\n                        ...options\n                    })\n                }\n            };\n\n            // not login\n            if (!isLogin) {\n                return noAuthenticationHandler();\n            }\n\n            // verify if access token still valid\n            const res = await fetch(urls.verifySession, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    ...getAccessHeader()\n                }\n            });\n            const json = await res.json();\n            if (json.status === 'success') {\n                // access token still valid\n                options.headers = {\n                    ...options.headers,\n                    ...getAccessHeader()\n                };\n                return fetch(url, {...options})\n            }\n\n            // access token not valid\n            // try refresh\n            const refreshRes = await fetch(urls.refresh, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    refresh: refreshToken\n                })\n            });\n            const refreshJson = await refreshRes.json();\n            if (refreshJson.status === 'success') {\n                // refresh successful\n                dispatch(refreshTokenAction(refreshJson.data.access));\n                options.headers = {\n                    ...options.headers,\n                    ...getAccessHeader(refreshJson.data.access)\n                };\n                return fetch(url, {...options})\n            }\n\n            // refresh failed\n            return noAuthenticationHandler();\n        } catch (e) {\n            console.log(e);\n            return new Promise((resolve, reject) => {\n                reject(e.messages);\n            });\n        }\n    };\n\n    return fetchWithTokenVerification\n};\n\nexport default useFetchWithTokenVerification;","import {useCallback, useState} from \"react\";\n\nconst BLANK_ERROR_MESSAGE = '';\n\nconst useRequestState = <FetchedDataType,>() => {\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(BLANK_ERROR_MESSAGE);\n  const [data, setData] = useState<FetchedDataType | null>(null);\n  const error = errorMessage !== BLANK_ERROR_MESSAGE;\n\n  const resetError = useCallback(() => {\n    setErrorMessage(BLANK_ERROR_MESSAGE)\n  }, []);\n\n  return {\n    loading,\n    setLoading,\n    errorMessage,\n    setErrorMessage,\n    data,\n    setData,\n    error,\n    resetError\n  }\n};\n\nexport default useRequestState\n","import GENERIC_ERROR_MESSAGE from \"./generic-error-message\";\nimport useFetchWithTokenVerification from \"./use-fetch-with-token-verification\";\nimport useRequestState from \"./helpers/use-request-states\";\nimport useCallbackDidMount from \"./helpers/use-callback-did-mount\";\n\n/**\n * Generic hook to fetch data with get method, with authentications\n * @param {string} url The link to fetch\n * @param {boolean} redirectInvalidToken Redirect to login page if true\n */\nconst useProtectedGet = <FetchedDataType,>(\n    url: RequestInfo,\n    redirectInvalidToken: boolean\n) => {\n    const {\n        loading,\n        setLoading,\n        errorMessage,\n        setErrorMessage,\n        data,\n        setData,\n        error,\n        resetError\n    } = useRequestState<FetchedDataType>();\n    const fetchWithTokenVerification = useFetchWithTokenVerification();\n\n    async function doGet (\n      url: RequestInfo,\n      redirectInvalidToken: boolean\n    ) {\n        try {\n            if (loading) return;\n\n            // reset states\n            resetError();\n\n            // start fetching\n            setLoading(true);\n            const res = await fetchWithTokenVerification(redirectInvalidToken, url, {});\n            const json = await res.json();\n\n            // server responded\n            if (json.status === 'success') {\n                setData(json.data)\n            } else if (json.status === 'error') {\n                setErrorMessage(json.message || GENERIC_ERROR_MESSAGE)\n            }\n            else {\n                setErrorMessage(GENERIC_ERROR_MESSAGE)\n            }\n        } catch (e) {\n            console.log(e);\n            setErrorMessage(GENERIC_ERROR_MESSAGE)\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    return {\n        loading,\n        error,\n        errorMessage,\n        data,\n        doGet\n    }\n};\n\nexport default useProtectedGet\n","import {useEffect} from \"react\";\nimport urls from \"./urls\";\nimport useProtectedGet from \"./common/use-protected-get\";\nimport {usePrevious} from 'react-use';\n\nexport interface PostListPost {\n    id: string\n    title: string,\n    likes: number,\n    dislikes: number,\n    created: string,\n    comments: number\n    owner: {\n        email: string,\n        username: string,\n        avatar_url: string\n    },\n    tag: string,\n    \"is_liked\"?: 0 | 1 | -1,\n    view_count: number\n}\n\nexport interface PostListData {\n    posts: PostListPost[],\n    total_pages: number\n    current_page: number\n}\n\n\nconst useGetPostList = ({tag, page}: {tag: string | null, page: string}) => {\n    const url = urls.getPostList({tag, page});\n\n    const {\n        loading,\n        error,\n        data,\n        doGet\n    } = useProtectedGet<PostListData>(url, false);\n\n    const prevTag = usePrevious(tag);\n    const prevPage = usePrevious(page);\n    useEffect(() => {\n        if (tag !== prevTag || page !== prevPage) {\n            doGet(url, false)\n        }\n    });\n\n    return [loading, error, data] as [typeof loading, typeof error, typeof data]\n};\n\nexport default useGetPostList\n","const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\nconst getTimeString = (ISOString: string) => {\n    const date = new Date(ISOString);\n    const hour = date.getHours() < 10 ? `0${date.getHours()}` : date.getHours();\n    const minute = date.getMinutes() < 10 ? `0${date.getMinutes()}` : date.getMinutes();\n    return `${date.getDate()} ${months[date.getMonth()]}, ${date.getFullYear()} - ${hour}:${minute}`\n};\n\nexport default getTimeString","import {useState} from \"react\";\nimport GENERIC_ERROR_MESSAGE from \"./generic-error-message\";\nimport useFetchWithTokenVerification from \"./use-fetch-with-token-verification\";\n\n/**\n * The base of fetch with get method\n * @return {usePost~doPost} The actual post function\n */\nconst usePost = <ResponseDataType,>() => {\n    const fetchWithTokenVerification = useFetchWithTokenVerification();\n\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n    const [data, setData] = useState<ResponseDataType | null>(null);\n\n    /**\n     * The actual post function\n     * @param {string} url The link to fetch\n     * @param {boolean} options The options that will be passed to fetch\n     * @param {boolean} redirectInvalidToken Redirect to login page if true\n     * @param {boolean} callbackOnSuccess A function to be called upon success response is received\n     * @param {boolean} callbackOnError A function to be called upon error response is received\n     * @param {boolean} callbackOnUnknownError A function to be called upon unexpected error is captured\n     */\n    const doPost = async (\n        url: RequestInfo,\n        options: RequestInit,\n        redirectInvalidToken: boolean,\n        callbackOnSuccess?: (<T>(data?: T) => void) | null,\n        callbackOnError?: ((message: string) => void) | null,\n        callbackOnUnknownError?: (() => void) | null,\n    ) => {\n        try {\n            if (loading) return;\n\n            // reset states\n            setError(false);\n            setErrorMessage('');\n            setLoading(true);\n\n            // start fetching\n            const res = await fetchWithTokenVerification(redirectInvalidToken, url, {...options});\n            const json = await res.json();\n\n            // response received\n            setLoading(false);\n            if (json.status === 'success') {\n                setData(json.data);\n                if (callbackOnSuccess) callbackOnSuccess(json.data);\n            } else if (json.status === 'error') {\n                setErrorMessage(json.message);\n                setError(true);\n                if (callbackOnError) callbackOnError(json.message);\n            } else {\n                setErrorMessage(GENERIC_ERROR_MESSAGE);\n                setError(true);\n                if (callbackOnUnknownError) callbackOnUnknownError();\n            }\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            setErrorMessage(GENERIC_ERROR_MESSAGE);\n            setError(true);\n            if (callbackOnUnknownError) callbackOnUnknownError();\n        }\n    };\n\n    return {\n        loading,\n        error,\n        errorMessage,\n        data,\n        doPost\n    }\n};\n\nexport default usePost","import {useDispatch} from \"react-redux\";\nimport urls from \"./urls\";\nimport {openSnackbar} from \"../redux/actions/snackbar\";\nimport usePost from \"./common/use-post\";\nimport GENERIC_ERROR_MESSAGE from \"./common/generic-error-message\";\nimport {PostListPost} from \"./use-get-post-list\";\n\ntype Type = 'post' | 'comment';\ntype Action = 1 | 0 | -1;\n\nconst useLike = (type: Type, id: string) => {\n    const dispatch = useDispatch();\n\n    const {\n        loading,\n        error,\n        data: updatedData,\n        doPost\n    } = usePost<PostListPost>();\n\n    const like = async (\n        action: Action\n    ) => {\n        const options = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                \"target_type\": type,\n                \"target_id\": id,\n                action\n            })\n        };\n        const errorCallback = (message: string) => {\n            dispatch(openSnackbar(message || GENERIC_ERROR_MESSAGE));\n        };\n        const unknownErrorCallback = () => {\n            dispatch(openSnackbar(GENERIC_ERROR_MESSAGE));\n        };\n\n        doPost(urls.like, options, true, null, errorCallback, unknownErrorCallback);\n    };\n\n    return [loading, error, updatedData, like] as [typeof loading, typeof error, typeof updatedData, typeof like]\n};\n\nexport default useLike;\n","import IconButton from \"@material-ui/core/IconButton\";\nimport ThumbUpRoundedIcon from \"@material-ui/icons/ThumbUpRounded\";\nimport green from \"@material-ui/core/colors/green\";\nimport ThumbDownRoundedIcon from \"@material-ui/icons/ThumbDownRounded\";\nimport red from \"@material-ui/core/colors/red\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport useLike from \"../../requests/use-like\";\n\nconst useStyles = makeStyles((theme) => ({\n    likeButtons: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginLeft: '-14px'\n    },\n    buttonText: {\n        lineHeight: 1,\n        color: theme.palette.grey[\"500\"],\n        fontSize: '0.875rem',\n        fontWeight: 700,\n    },\n    button: {\n        color: theme.palette.grey[\"400\"],\n        fontSize: '1.25rem'\n    },\n}));\n\ninterface LikeButtonsProps {\n    type: 'post' | 'comment',\n    id: string\n    likes: number,\n    dislikes: number,\n    isLiked: 0 | 1 | -1 | undefined\n}\n\nconst LikeButtons: React.FC<LikeButtonsProps> = ({type, id, likes, dislikes, isLiked}) => {\n    const classes = useStyles();\n\n    const [likeLoading, likeError, updatedData, like] = useLike(type, id);\n    if (updatedData !== null) {\n        likes = updatedData.likes;\n        dislikes = updatedData.dislikes;\n        if (updatedData['is_liked'] !== undefined) {\n            isLiked = updatedData['is_liked']\n        }\n    }\n\n    const likedByUser = isLiked === 1;\n    const dislikedByUser = isLiked === -1;\n\n    const handleLikeClick = () => {\n        likedByUser ? like(0) : like(1);\n    };\n\n    const handleDislikeClick = () => {\n        dislikedByUser ? like(0) : like(-1);\n    };\n\n    return (\n        <div className={classes.likeButtons}>\n            <IconButton aria-label={`like ${type}`} disabled={likeLoading} onClick={handleLikeClick}>\n                <ThumbUpRoundedIcon className={classes.button} style={likedByUser ? {color: green[300]} : {}}/>\n            </IconButton>\n            <div className={classes.buttonText}>\n                { likes }\n            </div>\n            <IconButton aria-label={`dislike ${type}`} disabled={likeLoading} onClick={handleDislikeClick}>\n                <ThumbDownRoundedIcon className={classes.button} style={dislikedByUser ? {color: red[300]} : {}}/>\n            </IconButton>\n            <div className={classes.buttonText}>\n                { dislikes }\n            </div>\n        </div>\n    )\n};\n\nexport default LikeButtons\n","import React from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport {Link} from \"react-router-dom\";\n\ninterface TagChipCommonProps {\n  text: string,\n  to: string,\n  classes: {\n    root: string,\n    chipRoot: string,\n    chipLabel: string\n  }\n}\n\nconst TagChipCommon: React.FC<TagChipCommonProps> = ({text, to, classes}) => {\n  return (\n    <div className={classes.root}>\n      <Chip\n        label={text}\n        component={Link}\n        to={to}\n        clickable\n        classes={{\n          clickable: classes.chipRoot,\n          label: classes.chipLabel\n        }}\n      />\n    </div>\n  )\n};\n\nexport default TagChipCommon\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport TagChipCommon from \"./tag-chip-common\";\n\ninterface TagChipProps {\n    text: string\n    size: 'small' | 'normal',\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        color: theme.palette.primary.contrastText,\n    },\n    chipRoot: {\n        borderRadius: 2,\n        height: 'auto',\n        backgroundColor: fade(theme.palette.primary.light, 0.8),\n        transitions: theme.transitions.create('background-color'),\n        '&:hover, &:focus, &:active': {\n            backgroundColor: theme.palette.primary.main,\n        },\n    },\n    chipLabelSmall: {\n        padding: '0 5px',\n        fontSize: theme.typography.caption.fontSize\n    },\n    chipLabelNormal: {\n        padding: '2px 15px',\n        fontSize: theme.typography.caption.fontSize,\n        fontWeight: 700\n    },\n}));\n\nconst TagChip: React.FC<TagChipProps> = ({text, size}) => {\n    const _classes = useStyles();\n    const classes = {\n        root: _classes.root,\n        chipRoot: _classes.chipRoot,\n        chipLabel: size === 'small' ? _classes.chipLabelSmall : _classes.chipLabelNormal\n    };\n\n    return (\n        <TagChipCommon text={text.toUpperCase()} classes={classes} to={`/?tag=${text.toUpperCase()}`} />\n    )\n};\n\nexport default TagChip\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Paper, Typography} from \"@material-ui/core\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport {Link} from \"react-router-dom\";\nimport getTimeString from \"../../utils/get-time-string\";\nimport LikeButtons from \"../commons/like-buttons\";\nimport TagChip from \"../commons/tag-chip/tag-chip\";\nimport {PostListPost} from \"../../requests/use-get-post-list\";\n\ninterface PostProps {\n    isLogin: boolean,\n    data: PostListPost\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: theme.spacing(1, 0)\n    },\n    paper: {\n        width: '100%',\n        minHeight: '100px',\n        padding: theme.spacing(2),\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-start'\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.primary.light\n    },\n    content: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'flex-start',\n        justifyContent: 'center',\n    },\n    title: {\n        margin: theme.spacing(0, 2),\n        '& h2': {\n            fontSize: '1.25rem',\n            fontWeight: 700,\n            color: theme.palette.text.primary,\n            margin: theme.spacing(0),\n            lineHeight: 1.2\n        },\n        '& h2:hover': {\n            color: theme.palette.primary.main,\n        }\n    },\n    author: {\n        margin: theme.spacing(0, 2),\n    },\n    actionArea: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        color: theme.palette.grey[\"500\"],\n        fontSize: '0.875rem',\n        fontWeight: 700,\n        [theme.breakpoints.down('md')]: {\n            flexDirection: 'column',\n            alignItems: 'flex-start',\n            justifyContent: 'center',\n        }\n    },\n    actionItem: {\n        margin: theme.spacing(0, 2)\n    }\n}));\n\nconst Post: React.FC<PostProps> = ({isLogin, data}) => {\n    const classes = useStyles();\n    const isLiked = isLogin ? data.is_liked : undefined;\n\n    return (\n        <div className={classes.root}>\n            <Paper className={classes.paper} elevation={0}>\n                <Avatar variant=\"rounded\" className={classes.avatar} src={data.owner.avatar_url}>\n                    { data.owner.username.charAt(0) }\n                </Avatar>\n                <div className={classes.content}>\n                    <div className={classes.title}>\n                        <Link to={`/post/${data.id}`}>\n                            <h2>\n                                { data.title }\n                            </h2>\n                        </Link>\n                    </div>\n                    <div className={classes.author}>\n                        <Typography variant={'caption'} component={'div'}>\n                            <Box>\n                                { data.owner.username }\n                            </Box>\n                        </Typography>\n                    </div>\n                    <div className={classes.author}>\n                        <TagChip text={data.tag} size={'small'}/>\n                    </div>\n                    <div className={classes.actionArea}>\n                        <div className={classes.actionItem}>\n                            <LikeButtons type={'post'} id={data.id} likes={data.likes} dislikes={data.dislikes} isLiked={isLiked}/>\n                        </div>\n                        <div className={classes.actionItem}>\n                            { `${data.comments} ${data.comments > 1 ? 'comments' : 'comment'}` }\n                        </div>\n                        <div className={classes.actionItem}>\n                            { getTimeString(data.created) }\n                        </div>\n                    </div>\n                </div>\n            </Paper>\n        </div>\n    )\n};\n\nexport default Post\n","import React, {useEffect, useState} from 'react';\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {fade, Paper} from \"@material-ui/core\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from '@material-ui/icons/Close';\nimport Fade from \"@material-ui/core/Fade\";\n\nconst DELAY = 5000; // ms\nconst FADE_ANIMATION_DURATION = 500;\nlet timeoutID: null | number = null;\n\n/**\n * 1. init states: active === false, isMount === false --> null component returned\n * 2. switch active and isMount to true after DELAY after component is mounted --> actual component returned, fade in animation is activated\n * 3. if isLoaded props set to true within DELAY --> step 2 will be canceled\n * 4. if isLoaded props set to true after DELAY --> step 5\n * 5. active set to false, fade out animation is activated\n * 6. isMounted will be set to false when fade out animation is done\n */\nexport const useServerWaking = () => {\n    // the state of fade is in\n    const [active, setActive] = useState(false);\n    // the state of mounting (null component returned if !isMount)\n    const [isMount, setIsMount] = useState(false);\n\n    const cleanUp = () => {\n        if (timeoutID !== null) {\n            clearTimeout(timeoutID);\n            timeoutID = null;\n        }\n    };\n\n    const showNotification = () => {\n        setIsMount(true);\n        setActive(true)\n    };\n\n    const handleLoaded = () => {\n        cleanUp();\n        if (active) {\n            setActive(false)\n        }\n    };\n\n    const turnToInactive = () => {\n        if (active) {\n            setActive(false)\n        }\n    };\n\n    const unMount = () => {\n        if (isMount) {\n            setIsMount(false)\n        }\n    };\n\n    useEffect(() => {\n        // set active to true after DELAY\n        timeoutID = window.setTimeout(showNotification, DELAY);\n\n        return () => {\n            cleanUp();\n        }\n    }, []);\n\n    return {\n        active,\n        handleLoaded,\n        turnToInactive,\n        isMount,\n        unMount\n    }\n};\n\ninterface HeaderProps {\n    isLoaded: boolean\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        backgroundColor: theme.palette.warning.light,\n        color: theme.palette.warning.contrastText,\n        padding: theme.spacing(1, 2),\n        margin: theme.spacing(1, 0, 0, 0),\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-start'\n    },\n    text: {\n        width: 'calc(100% - 50px)'\n    },\n    button: {\n        width: '50px',\n    },\n    noWrap: {\n        whiteSpace: 'nowrap'\n    },\n    link: {\n        '&:link': {\n            textDecoration: 'underline',\n            fontWeight: 700\n        },\n        '&:visited': {\n            textDecoration: 'underline',\n            fontWeight: 700\n        },\n        '&:hover': {\n            color: fade(theme.palette.warning.contrastText, 0.5)\n        }\n    }\n}));\n\n\nconst ServerWakingNotification: React.FC<HeaderProps> = ({isLoaded}) => {\n    const classes = useStyles();\n\n    const {active, handleLoaded, turnToInactive, isMount, unMount} = useServerWaking();\n\n    useEffect(() => {\n        if (isLoaded) handleLoaded();\n    }, [isLoaded, handleLoaded]);\n\n    if (isMount) {\n        return (\n            <Fade in={active} timeout={FADE_ANIMATION_DURATION} onExited={unMount}>\n                <Paper elevation={0} className={classes.root}>\n                    <div className={classes.text}>\n                        <p>\n                            {'The backend of this application falls asleep again, usually he will wake up in half minute '}\n                            <span className={classes.noWrap}>\n                                ٩(ˊ〇ˋ*)و\n                            </span>\n                        </p>\n                        <p>\n                            <span>Wanna check out </span>\n                            <a\n                                href='https://www.xiaoxihome.com/'\n                                target='_blank'\n                                rel='noopener noreferrer'\n                                className={classes.link}\n                            >\n                                XiaoxiHome\n                            </a>\n                            <span> while waiting?</span>\n                        </p>\n                    </div>\n                    <IconButton aria-label=\"close\" name=\"close\" title=\"close\" onClick={turnToInactive} className={classes.button}>\n                        <CloseIcon />\n                    </IconButton>\n                </Paper>\n            </Fade>\n        )\n    } else {\n        return null\n    }\n};\n\nexport default ServerWakingNotification;\n","// import React from \"react\";\nimport {useLocation} from \"react-router-dom\";\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\n// interface QueryParamProps {\n//   children: React.ReactElement\n// }\n//\n// const MainPageQueryParamParser: React.FC<QueryParamProps> = ({children}) => {\n//   const query = useQuery();\n//\n//   return (\n//     <children.type {...children.props} tag={query.get('tag')} page={query.get('page') || 1}/>\n//   )\n//   const props = {\n//     tag: query.get('tag'),\n//     page: query.get('page')\n//   };\n//   return React.cloneElement(children as React.ReactElement<{tag: string, page: string}>, props)\n// };\n\n\nexport default useQuery\n// export {MainPageQueryParamParser}\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport MuiPagination from '@material-ui/lab/Pagination';\nimport {PaginationItem} from \"@material-ui/lab\";\nimport {Link} from \"react-router-dom\";\nimport useQuery from \"../../utils/use-query\";\nimport Paper from \"@material-ui/core/Paper\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    width: '100%',\n    padding: theme.spacing(2, 0)\n  },\n  root: {\n    '& .Mui-selected': {\n      backgroundColor: theme.palette.primary.light,\n      color: theme.palette.primary.contrastText,\n    },\n    '& .MuiPaginationItem-rounded:hover': {\n      backgroundColor: theme.palette.secondary.light,\n      color: theme.palette.secondary.contrastText,\n    }\n  }\n}));\n\ninterface PaginationProps {\n  count: number,\n  page: number,\n}\n\nconst Pagination: React.FC<PaginationProps> = ({count, page}) => {\n  const classes = useStyles();\n  const query = useQuery();\n\n  if (count > 1) {\n    return (\n      <Paper className={classes.paper} elevation={0}>\n        <MuiPagination\n          count={count} page={page} shape={'rounded'} className={classes.root}\n          renderItem={(item) => {\n            query.set('page', item.page.toString());\n            return <PaginationItem\n             component={Link}\n             to={'/?' + query.toString()}\n             {...item}\n            />\n          }}\n        />\n      </Paper>\n    )\n  } else {\n    return <></>\n  }\n};\n\nexport default Pagination\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Chip from \"@material-ui/core/Chip\";\nimport {Box} from \"@material-ui/core\";\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport {useHistory} from 'react-router-dom'\n\ninterface ActiveTagChipProps {\n    text: string\n}\n\nconst useStyles = makeStyles((theme) => ({\n    inheritColor: {\n        color: theme.palette.primary.contrastText,\n    },\n    chipRoot: {\n        borderRadius: 5,\n        backgroundColor: theme.palette.primary.light,\n        transitions: theme.transitions.create('background-color'),\n        '&:hover': {\n            backgroundColor: theme.palette.primary.main,\n        },\n        '&:focus': {\n            backgroundColor: theme.palette.primary.main,\n        }\n    },\n    chipLabel: {\n        padding: '2px 20px',\n        fontSize: theme.typography.body2.fontSize,\n        fontWeight: 700\n    },\n}));\n\nconst ActiveTagChip: React.FC<ActiveTagChipProps> = ({text}) => {\n    const classes = useStyles();\n    let history = useHistory();\n\n    const handleDelete = () => {\n        history.push('/')\n    };\n\n    return (\n        <Box className={classes.inheritColor}>\n            <Chip\n                label={text.toUpperCase()}\n                onDelete={handleDelete}\n                color={'primary'}\n                classes={{\n                    deletable: classes.chipRoot,\n                    label: classes.chipLabel\n                }}\n            />\n        </Box>\n    )\n};\n\nexport default ActiveTagChip\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport useGetPostList from \"../../requests/use-get-post-list\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport {Box, Typography} from \"@material-ui/core\";\nimport Post from \"./post\";\nimport ServerWakingNotification from \"./server-waking-notification\";\nimport Pagination from \"../pagination/pagination\";\nimport Paper from \"@material-ui/core/Paper\";\nimport ActiveTagChip from \"../main-page/active-tag-chip\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    tags: {\n        padding: theme.spacing(2, 2),\n        margin: theme.spacing(1, 0),\n        width: \"100%\",\n    },\n}));\n\ninterface PostListProps {\n    isLogin: boolean,\n    tag: string | null,\n    page: string\n}\n\nconst PostList: React.FC<PostListProps> = ({isLogin, tag, page}) => {\n    const classes = useStyles();\n    const [loading, error, data] = useGetPostList({tag, page});\n    const isLoaded = data !== null;\n\n    let content;\n    if (loading || !isLoaded) {\n        content = (new Array(10)).fill(0).map((_, i) => {\n            return (\n                <Box width='100%' my={1} borderRadius={'5px'} key={i} overflow={'hidden'}>\n                    <Skeleton variant=\"rect\" animation=\"wave\" width={'100%'} height={150}/>\n                </Box>\n            )\n        })\n    } else if (error) {\n        content = (\n            <Typography variant={'body1'} component={'h2'}>\n                <Box fontWeight={700} color={'primary.main'} textAlign={'center'}>\n                    Server is unavailable now, please try again later\n                </Box>\n            </Typography>\n        )\n    } else if (data) {\n        content = (\n          <>\n              {\n                  tag &&\n                  <Paper className={classes.tags} elevation={0}>\n                      <ActiveTagChip text={tag}/>\n                  </Paper>\n              }\n              { data.posts.map((_, i) =>  <Post key={i} isLogin={isLogin} data={_}/> ) }\n              <Pagination count={data?.total_pages || 1} page={data?.current_page || 1}/>\n          </>\n        )\n    }\n\n    return (\n        <div className={classes.root}>\n            <ServerWakingNotification isLoaded={isLoaded}/>\n            { content }\n        </div>\n    )\n};\n\nexport default PostList\n","import {connect} from \"react-redux\";\nimport {State} from \"../redux/state\";\nimport PostList from \"../components/post-list/post-list\";\n\nfunction mapStateToProps(state: State) {\n    return {\n        isLogin: state.loginStatus.isLogin\n    }\n}\n\n// function mapDispatchToProps(dispatch: Dispatch) {\n//     return {\n//         closeSnackbar: () => dispatch(closeSnackbar())\n//     }\n// }\n\nconst PostListContainer = connect(\n    mapStateToProps\n)(PostList);\n\nexport default PostListContainer;\n","import {Button} from \"@material-ui/core\";\nimport React from \"react\";\nimport {Link} from \"react-router-dom\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        backgroundColor: theme.palette.primary.light,\n        maxWidth: '100%',\n        color: '#fff',\n        fontWeight: 700,\n        textTransform: 'capitalize',\n        letterSpacing: 'inherit',\n        borderBottom: '2px solid rgba(0,0,0,0.1)',\n        borderRadius: '5px',\n        padding: '4px 10px',\n        '& span': {\n            color: '#fff',\n        },\n        '&:hover': {\n            backgroundColor: theme.palette.secondary.main\n        }\n    }\n}));\n\ninterface BaseButtonProps {\n    width: string,\n    text: string\n}\n\ninterface GenericClickButtonProps extends BaseButtonProps {\n    onClick: any,\n    disabled?: boolean\n}\n\nconst GenericClickButton: React.FC<GenericClickButtonProps> = ({width, text, onClick, disabled}) => {\n    const classes = useStyles();\n\n    return (\n            <Button variant=\"contained\" classes={{root: classes.button}} disableElevation onClick={onClick} style={{width: width}} disabled={disabled}>\n                { text }\n            </Button>\n    )\n};\n\ninterface GenericLinkButtonProps extends BaseButtonProps {\n    link: string\n}\n\nconst GenericLinkButton: React.FC<GenericLinkButtonProps> = ({width, text, link}) => {\n    const classes = useStyles();\n\n    return (\n        <Button variant=\"contained\" classes={{root: classes.button}} disableElevation component={Link} to={link} style={{width: width}}>\n            { text }\n        </Button>\n    )\n};\n\nexport {GenericClickButton, GenericLinkButton};\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport {CircularProgress} from \"@material-ui/core\";\nimport BrokenImageIcon from '@material-ui/icons/BrokenImage';\n\ninterface SideBarSectionProps {\n  isLoading?: boolean,\n  title?: string,\n  error?: boolean\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: 'calc(100% - 16px)',\n    margin: theme.spacing(1),\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    [theme.breakpoints.down('md')]: {\n      width: '100%',\n      margin: theme.spacing(1, 0),\n    }\n  },\n  main: {\n    width: '80%',\n    minHeight: '100px',\n    padding: theme.spacing(2, 0),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    padding: theme.spacing(0.25, 1),\n    fontWeight: 700,\n    textTransform: 'uppercase',\n    fontSize: theme.typography.caption.fontSize,\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: theme.palette.primary.light,\n    color: theme.palette.primary.contrastText,\n    width: '100%',\n    borderRadius: theme.shape.borderRadius\n  },\n  titleText: {\n    padding: theme.spacing(0, 1),\n  }\n}));\n\nconst SideBarSection: React.FC<SideBarSectionProps> = ({children, isLoading, title, error}) => {\n  const classes = useStyles();\n\n  return (\n    <Paper className={classes.root} elevation={0}>\n      {\n        title &&\n        <div className={classes.title}>{title}</div>\n      }\n      <div className={classes.main}>\n        {\n          isLoading && <CircularProgress color=\"primary\" size={25}/>\n        }\n        {\n          error && <BrokenImageIcon color='disabled'/>\n        }\n        {\n          !isLoading && !error && children\n        }\n      </div>\n    </Paper>\n  )\n};\n\nexport default SideBarSection\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {GenericLinkButton} from \"../commons/generic-button\";\nimport SideBarSection from \"./common/side-bar-section\";\n\ninterface SideBarTopProps {\n  isLogin: boolean\n}\n\nconst useStyles = makeStyles((theme) => ({\n  rowWrapper: {\n    width: '100%',\n    margin: '8px 0'\n  }\n}));\n\nconst SideBarTop: React.FC<SideBarTopProps> = ({isLogin}) => {\n  const classes = useStyles();\n\n  return (\n    <SideBarSection>\n      <div className={classes.rowWrapper}>\n        <GenericLinkButton link={'/edit-post'} width={'100%'} text={'Create Post'}/>\n      </div>\n      {\n        isLogin &&\n        <div className={classes.rowWrapper}>\n          <GenericLinkButton link={'/account-setting'} width={'100%'} text={'Account Settings'}/>\n        </div>\n      }\n    </SideBarSection>\n  )\n};\n\nexport default SideBarTop\n","import {useEffect, useRef} from \"react\";\n\n/**\n * A helper hook that execute provided function when component did mount\n * No need to worry about dependency warning anymore\n */\nconst useCallbackDidMount = (callback: () => void, shouldExecute?: boolean) => {\n  const isCallbackExecuted = useRef<boolean>(false);\n\n    useEffect(() => {\n      if (isCallbackExecuted.current) return;\n      if (!shouldExecute) return;\n      callback();\n      isCallbackExecuted.current = true;\n    }, [callback, shouldExecute])\n};\n\nexport default useCallbackDidMount\n","import {useEffect, useMemo, useRef} from \"react\";\nimport axios, {CancelTokenSource} from 'axios';\n\nconst useCancelRequestBeforeUnmount = () => {\n  const CancelTokenRef = useRef(axios.CancelToken);\n  const sourceRef = useRef<CancelTokenSource[]>([]);\n\n  const getAxiosToken = useMemo(() => {\n    return () => {\n      const source = CancelTokenRef.current.source();\n      sourceRef.current.push(source);\n      return  source.token;\n    }\n  }, []);\n\n  useEffect(() => {\n    // TODO cancel will throw a Cancel error which will still try tp update error state\n    return () => {\n      sourceRef.current.forEach(source => source.cancel('component will unmount'))\n    }\n  }, []);\n\n  return getAxiosToken\n};\n\nexport default useCancelRequestBeforeUnmount\n","import GENERIC_ERROR_MESSAGE from \"./generic-error-message\";\nimport useCallbackDidMount from \"./helpers/use-callback-did-mount\";\nimport useRequestState from \"./helpers/use-request-states\";\nimport axios from 'axios';\nimport useCancelRequestBeforeUnmount from \"./helpers/use-cancel-request-before-unmount\";\n\n/**\n * Generic hook to fetch data with get method, with no authentications\n * @param {string} url The link to fetch\n * @param {boolean} fetchWhenComponentDidMount If true, will fetch automatically when componentDidMount\n */\nconst useUnprotectedGet = <FetchedDataType,>(\n    url: string,\n    fetchWhenComponentDidMount: boolean\n) => {\n    const {\n        loading,\n        setLoading,\n        errorMessage,\n        setErrorMessage,\n        data,\n        setData,\n        error,\n        resetError\n    } = useRequestState<FetchedDataType>();\n    useCallbackDidMount(doGet, fetchWhenComponentDidMount);\n    const getAxiosToken = useCancelRequestBeforeUnmount();\n\n    async function doGet () {\n        try {\n            if (loading) return;\n            // reset states\n            resetError();\n\n            // start fetching\n            setLoading(true);\n            const res = await axios.get(url, {cancelToken: getAxiosToken()});\n            const json = await res.data;\n\n            // server responded\n            if (json.status === 'success') {\n                setData(json.data)\n            } else if (json.status === 'error') {\n                setErrorMessage(json.message || GENERIC_ERROR_MESSAGE)\n            }\n            else {\n                setErrorMessage(GENERIC_ERROR_MESSAGE)\n            }\n        } catch (e) {\n            setErrorMessage(GENERIC_ERROR_MESSAGE)\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    return {\n        loading,\n        error,\n        errorMessage,\n        data,\n        doGet\n    }\n\n};\n\nexport default useUnprotectedGet\n","import urls from \"./urls\";\nimport useUnprotectedGet from \"./common/use-unprotected-get\";\n\ninterface Tag {\n    tag: string,\n    count: number\n}\n\nexport type TagList = Tag[]\n\nconst useGetTagList = () => {\n    const {\n        loading,\n        error,\n        data\n    } = useUnprotectedGet<TagList>(urls.tagList, true);\n\n    return [loading, error, data] as [typeof loading, typeof error, typeof data]\n\n};\n\nexport default useGetTagList\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport {Button} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\n\ninterface SideBarListViewItemProps {\n  text: string,\n  to: string,\n  number: number,\n  barPercentage: string\n}\n\nconst useStyles = (barWidth: string) => makeStyles((theme) => ({\n  root: {\n    margin: 0,\n    width: '100%',\n    padding: 2,\n    borderRadius: 2,\n    height: 'auto',\n    backgroundColor: fade(theme.palette.primary.light, 0),\n    transitions: theme.transitions.create(['background-color']),\n    color: theme.palette.text.primary,\n    justifyContent: 'flex-start',\n    position: 'relative',\n    '&:hover $barItem': {\n      height: '100%',\n      width: '100%',\n      transition: theme.transitions.create(['height', 'width']),\n    },\n  },\n  label: {\n    width: '100%',\n    fontSize: theme.typography.caption.fontSize,\n    fontWeight: 700,\n    textTransform: 'capitalize',\n    padding: '2px',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  text: {\n    flex: 1,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n  number: {\n    textAlign: 'end',\n    paddingLeft: '4px'\n  },\n  barWrapper: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    justifyContent: 'flex-start',\n    borderRadius: theme.shape.borderRadius\n  },\n  barItem: {\n    backgroundColor: fade(theme.palette.secondary.light, 0.5),\n    height: '50%',\n    width: barWidth,\n    borderRadius: theme.shape.borderRadius,\n    transition: theme.transitions.create(['height', 'width'])\n  }\n}));\n\nconst SideBarListViewItem: React.FC<SideBarListViewItemProps> = ({text, to, number, barPercentage}) => {\n  const classes = useStyles(barPercentage)();\n\n  return (\n    <Button component={Link} to={to} classes={{root: classes.root, label: classes.label}}>\n      <div className={classes.text} style={{zIndex: 2}}>\n        {text}\n      </div>\n      <div className={classes.number} style={{zIndex: 2}}>\n        {number}\n      </div>\n      <div className={classes.barWrapper} style={{zIndex: 1}}>\n        <div className={classes.barItem}>\n\n        </div>\n      </div>\n    </Button>\n  );\n};\n\nexport default SideBarListViewItem\n","import React, {useMemo} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport SideBarListViewItem from \"./side-bar-list-view-item\";\n\ntype Items = {\n  text: string,\n  number: number,\n  to: string\n}[]\n\ninterface TagChipSideBarProps {\n  items: Items\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    position: 'relative'\n  }\n}));\n\nconst SideBarListView: React.FC<TagChipSideBarProps> = ({items}) => {\n  const classes = useStyles();\n  const bars = useMemo(() => {\n    const maxCount = items.reduce((a, b) => Math.max(a, b.number), 0);\n    return items.map(item => `${(item.number/maxCount*100).toFixed(2)}%`)\n  }, [items]);\n\n  return (\n    <div className={classes.root}>\n      {\n        items.map((item, index) => <SideBarListViewItem key={item.text} text={item.text} to={item.to} number={item.number} barPercentage={bars[index]}/>)\n      }\n    </div>\n  );\n};\n\nexport default SideBarListView\n","class Routes {\n  home = '/';\n  login = '/login';\n  register = '/register';\n  postDetail = '/post/:postID';\n  editPost = '/edit-post/:postID?';\n  accountSetting = '/account-setting';\n  fallback = '/*';\n\n  getPostList = (params: {tag?: string, page?: string}) => {\n    let base = this.home;\n    const entries = Object.entries(params);\n    if (entries.length > 0) {\n      base += '?';\n      const paramStrings = entries.map(pair => `${pair[0]}=${pair[1]}`);\n      const string = paramStrings.join('&');\n      base += string;\n    }\n    return base\n  };\n  getPostDetail = (postID: string) => `/post/${postID}`;\n  getEditPost = (postID: string | undefined) => `/edit-post/${postID}`;\n}\n\n\nconst routes = new Routes();\n\nexport default routes\n","import React, {useMemo} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport SideBarSection from \"./common/side-bar-section\";\nimport useGetTagList from \"../../requests/use-get-tag-list\";\nimport SideBarListView from \"./common/side-bar-list-view\";\nimport routes from \"../../routes\";\n\nconst useStyles = makeStyles((theme) => ({\n\n}));\n\ninterface SideBarTagsProps {\n\n}\n\nconst SideBarTags: React.FC<SideBarTagsProps> = () => {\n  const classes = useStyles();\n  const [\n    loading,\n    error,\n    data\n  ] = useGetTagList();\n\n  const items = useMemo(() => {\n    return data\n      ?.map(obj => ({\n          text: obj.tag.toLowerCase(),\n          to: routes.getPostList({tag: obj.tag}),\n          number: obj.count\n        }))\n      .sort((a, b) => -a.number + b.number)\n  }, [data]);\n\n  return (\n    <SideBarSection isLoading={loading} title={'tags'} error={error}>\n      {\n        items && <SideBarListView items={items}/>\n      }\n    </SideBarSection>\n  )\n};\n\nexport default SideBarTags\n","import urls from \"./urls\";\nimport useUnprotectedGet from \"./common/use-unprotected-get\";\nimport {PostListData} from \"./use-get-post-list\";\n\nconst useGetPopularPosts = () => {\n  const url = urls.popularPosts;\n\n  const {\n    loading,\n    error,\n    data\n  } = useUnprotectedGet<PostListData>(url, true);\n\n  return [loading, error, data] as [typeof loading, typeof error, typeof data]\n};\n\nexport default useGetPopularPosts\n","import React, {useMemo} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport SideBarSection from \"./common/side-bar-section\";\nimport useGetPopularPosts from \"../../requests/use-get-popular-posts\";\nimport SideBarListView from \"./common/side-bar-list-view\";\nimport routes from \"../../routes\";\n\nconst useStyles = makeStyles((theme) => ({\n\n}));\n\ninterface SideBarTagsProps {\n\n}\n\nconst SideBarPopular: React.FC<SideBarTagsProps> = () => {\n  const classes = useStyles();\n  const [loading, error, data] = useGetPopularPosts();\n\n  const items = useMemo(() => {\n    return data?.posts.map(post => ({\n      text: post.title,\n      to: routes.getPostDetail(post.id),\n      number: post.view_count\n    }))\n  }, [data]);\n\n  return (\n    <SideBarSection isLoading={loading} title={'popular posts'} error={error}>\n      {\n        items && <SideBarListView items={items}/>\n      }\n    </SideBarSection>\n  )\n};\n\nexport default SideBarPopular\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport SideBarTop from \"./side-bar-top\";\nimport SideBarTags from \"./side-bar-tags\";\nimport SideBarPopular from \"./side-bar-popular\";\n\ninterface SideBarProps {\n    isLogin: boolean\n}\n\nconst useStyles = makeStyles((theme) => ({\n\n}));\n\nconst SideBar: React.FC<SideBarProps> = ({isLogin}) => {\n    const classes = useStyles();\n\n    return (\n      <>\n          <SideBarTop isLogin={isLogin}/>\n          <SideBarTags/>\n          <SideBarPopular/>\n      </>\n    )\n};\n\nexport default SideBar\n","import {connect} from \"react-redux\";\nimport {State} from \"../redux/state\";\nimport SideBar from \"../components/side-bar/side-bar\";\n\nfunction mapStateToProps(state: State) {\n    return {\n        isLogin: state.loginStatus.isLogin\n    }\n}\n\nconst SideBarContainer = connect(\n    mapStateToProps\n)(SideBar);\n\nexport default SideBarContainer;\n","import urls from \"./urls\";\nimport useProtectedGet from \"./common/use-protected-get\";\nimport {useMount,} from 'react-use';\nimport { PostListPost } from \"./use-get-post-list\";\n\nexport interface PinnedPostsData {\n  posts: PostListPost[],\n}\n\n\nconst useGetPinnedPosts = () => {\n  const url = urls.allPinnedPosts;\n\n  const {\n    loading,\n    error,\n    data,\n    doGet\n  } = useProtectedGet<PinnedPostsData>(url, false);\n\n  useMount(() => {\n    doGet(url, false)\n  })\n\n  return {loading, error, data}\n};\n\nexport default useGetPinnedPosts\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport {Box} from \"@material-ui/core\";\nimport Post from \"./post\";\nimport useGetPinnedPosts from \"../../requests/use-get-pinned-posts\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%'\n  },\n  tags: {\n    padding: theme.spacing(2, 2),\n    margin: theme.spacing(1, 0),\n    width: \"100%\",\n  },\n}));\n\ninterface PostListProps {\n  isLogin: boolean,\n}\n\nconst PinnedPosts: React.FC<PostListProps> = ({isLogin}) => {\n  const classes = useStyles();\n  const {loading, data} = useGetPinnedPosts();\n  const isLoaded = data !== null;\n\n  let content;\n  if (loading || !isLoaded) {\n    content = (\n      <Box width='100%' my={1} borderRadius={'5px'} overflow={'hidden'}>\n        <Skeleton variant=\"rect\" animation=\"wave\" width={'100%'} height={150}/>\n      </Box>\n    )\n  } else if (data) {\n    content = (\n      <>\n        { data.posts.map((_, i) =>  <Post key={i} isLogin={isLogin} data={_}/> ) }\n      </>\n    )\n  }\n\n  return (\n    <div className={classes.root}>\n      { content }\n    </div>\n  )\n};\n\nexport default PinnedPosts\n","import {connect} from \"react-redux\";\nimport {State} from \"../redux/state\";\nimport PinnedPosts from \"../components/post-list/pinned-posts\";\n\nfunction mapStateToProps(state: State) {\n  return {\n    isLogin: state.loginStatus.isLogin\n  }\n}\n\nconst PostPostsContainer = connect(\n  mapStateToProps\n)(PinnedPosts);\n\nexport default PostPostsContainer;\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport PostListContainer from \"../../containers/post-list-container\";\nimport SideBarContainer from \"../../containers/side-bar-container\";\nimport useQuery from \"../../utils/use-query\";\nimport {Paper, Typography} from \"@material-ui/core\";\nimport PinnedPostsContainer from \"../../containers/pinned-posts-container\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: theme.spacing(0),\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n        justifyContent: 'center',\n        flexWrap: 'wrap',\n        [theme.breakpoints.down('md')]: {\n            flexDirection: 'column',\n            margin: 0,\n        }\n    },\n    left: {\n        width: \"75%\",\n        [theme.breakpoints.down('md')]: {\n            width: \"100%\",\n        }\n    },\n    right: {\n        width: \"25%\",\n        [theme.breakpoints.down('md')]: {\n            width: \"100%\",\n        }\n    },\n    sectionTitlePaper: {\n        padding: theme.spacing(1, 2),\n        margin: theme.spacing(1, 0),\n        width: \"100%\",\n    },\n    sectionTitle: {\n        fontWeight: 700\n    }\n}));\n\ninterface MainPageProps {\n\n}\n\nconst MainPage: React.FC<MainPageProps> = () => {\n    const classes = useStyles();\n    const query = useQuery();\n    const tag = query.get('tag');\n    const page = query.get('page') || '1';\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.left}>\n                <Paper className={classes.sectionTitlePaper} elevation={0}>\n                    <Typography className={classes.sectionTitle} variant={'caption'}>\n                        PINNED\n                    </Typography>\n                </Paper>\n                <PinnedPostsContainer/>\n                <Paper className={classes.sectionTitlePaper} elevation={0}>\n                    <Typography className={classes.sectionTitle} variant={'caption'}>\n                        POSTS\n                    </Typography>\n                </Paper>\n                <PostListContainer tag={tag} page={page} key={`tag=${tag}&page=${page}`}/>\n            </div>\n            <div className={classes.right}>\n                <SideBarContainer />\n            </div>\n        </div>\n    )\n};\n\nexport default MainPage\n","import React from \"react\";\nimport {\n    Box,\n    createStyles,\n    IconButton,\n    Snackbar as MuiSnackbar,\n    SnackbarContent,\n} from \"@material-ui/core\";\nimport Close from '@material-ui/icons/Close';\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst useStyles = makeStyles((theme) => createStyles({\n    root: {\n\n    },\n    content: {\n        backgroundColor: theme.palette.primary.main,\n    },\n}));\n\ninterface SnackbarProps {\n    open: boolean,\n    closeSnackbar: () => void,\n    message: string\n}\n\nconst Snackbar: React.FC<SnackbarProps> = ({open, closeSnackbar, message}) => {\n    const classes = useStyles();\n\n    return (\n        <MuiSnackbar\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n            }}\n            open={open}\n            autoHideDuration={5000}\n            onClose={closeSnackbar}\n            className={classes.root}\n        >\n            <SnackbarContent\n                className={classes.content}\n                message={\n                    <Typography variant={'body1'} component={'div'}>\n                        <Box fontWeight={700}>\n                            { message }\n                        </Box>\n                    </Typography>\n                }\n                action={[\n                    <IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={closeSnackbar}>\n                        <Close/>\n                    </IconButton>\n                ]}\n            />\n        </MuiSnackbar>\n    )\n};\n\nexport default Snackbar;","import {connect} from \"react-redux\";\nimport Snackbar from \"../components/snackbar/snackbar\";\nimport {State} from \"../redux/state\";\nimport {Dispatch} from \"redux\";\nimport {closeSnackbar} from \"../redux/actions/snackbar\";\n\nfunction mapStateToProps(state: State) {\n    return {\n        open: state.snackbar.open,\n        message: state.snackbar.message\n    }\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        closeSnackbar: () => dispatch(closeSnackbar())\n    }\n}\n\nconst SnackbarContainer = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Snackbar);\n\nexport default SnackbarContainer;\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\ntype FooterColumnData = {\n    title: string,\n    url: string\n}[]\n\ninterface FooterColumnProps {\n    data: FooterColumnData\n}\n\nconst userStyles = makeStyles((theme) => ({\n    root: {\n        listStyleType: 'none',\n        margin: 0,\n        padding: 0\n    },\n    header: {\n        fontSize: '1.25rem',\n        margin: '8px 0',\n        letterSpacing: '0',\n        fontWeight: 700\n    },\n    content: {\n        fontSize: '0.875rem',\n        padding: '2px',\n        '&:hover': {\n            color: theme.palette.secondary.main\n        }\n    }\n}));\n\nconst FooterColumn: React.FC<FooterColumnProps> = ({data}) => {\n    const classes = userStyles();\n\n    return (\n        <ul className={classes.root}>\n            {\n                data.map((item, i) => {\n                    if (i === 0) {\n                        return (\n                            <li key={i}>\n                                <div className={classes.header}>\n                                    { item.title }\n                                </div>\n                            </li>\n                        )\n                    } else {\n                        return (\n                            <li key={i}>\n                                <a href={item.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                                    <div className={classes.content}>\n                                        { item.title }\n                                    </div>\n                                </a>\n                            </li>\n                            )\n                    }\n                })\n            }\n        </ul>\n    )\n};\n\nexport default FooterColumn","import React, {useMemo} from \"react\";\nimport {Grid, Paper} from \"@material-ui/core\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Logo from \"../commons/logo\";\nimport FooterColumn from \"./footer-column\";\n\nconst column1 = [\n    {\n        title: 'Learn More',\n        url: ''\n    },\n    {\n        title: 'API Endpoints',\n        url: 'https://www.google.ca/'\n    },\n    {\n        title: 'GitHub',\n        url: 'https://github.com/CptDoraemon/discussion-board-client'\n    },\n    {\n        title: 'XiaoxiHome',\n        url: 'https://www.xiaoxihome.com/'\n    },\n];\n\nconst userStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        margin: '40px 0 8px 0'\n    },\n    paper: {\n        width: '100%',\n        backgroundColor: '#4a5568',\n        color: '#a0aec0',\n        padding: theme.spacing(5)\n    },\n    copyright: {\n        width: '100%',\n        margin: theme.spacing(5, 0, 0, 0),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        fontSize: '0.8rem'\n    }\n}));\n\nconst Footer: React.FC = () => {\n    const classes = userStyles();\n\n    return (\n        <footer className={classes.root}>\n            <Paper className={classes.paper}>\n                <Grid container spacing={5}>\n                    <Grid item>\n                        <Logo/>\n                    </Grid>\n                    <Grid item>\n                        <FooterColumn data={column1} />\n                    </Grid>\n                </Grid>\n                <div className={classes.copyright}>\n                    <div>\n                        © XiaoxiHome.com\n                    </div>\n                    <div>\n                        Since 2020\n                    </div>\n                </div>\n            </Paper>\n        </footer>\n    )\n};\n\nexport default Footer\n","import {\n    Route,\n    Redirect\n} from \"react-router-dom\";\nimport React from \"react\";\n\ninterface PrivateRouteProps {\n    isLogin: boolean,\n    path: string\n}\n\nconst PrivateRoute: React.FC<PrivateRouteProps> = ({ children, isLogin, ...rest}) => {\n    return (\n        <Route\n            {...rest}\n            render={({ location }) =>\n                isLogin ? (\n                    children\n                ) : (\n                    <Redirect\n                        to={{\n                            pathname: \"/login\",\n                            state: { from: location }\n                        }}\n                    />\n                )\n            }\n        />\n    );\n};\n\nexport default PrivateRoute","import {useState} from \"react\";\nimport urls from \"./urls\";\nimport useFetchWithTokenVerification from \"./common/use-fetch-with-token-verification\";\n\nconst usePostSubmission = () => {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n    const [submitted, setSubmitted] = useState(false);\n    const fetchWithTokenVerification = useFetchWithTokenVerification();\n\n    const submit = async (\n        title: string,\n        tag: string,\n        content: string,\n        objectURLArray: string[],\n        updatePostID?: number\n    ) => {\n        try {\n            if (loading || submitted) return;\n\n            // reset states\n            setError(false);\n            setErrorMessage(' ');\n            setLoading(true);\n\n            //\n            objectURLArray = removeUnusedObjectURL(content, objectURLArray);\n\n            //\n            const form = await getForm(title, tag, content, objectURLArray);\n            const url = updatePostID === undefined ? urls.createPost : urls.editPost(updatePostID);\n            const res = await fetchWithTokenVerification(true, url, {\n                method: 'POST',\n                body: form\n            });\n            const json = await res.json();\n            setLoading(false);\n            if (json.status === 'success') {\n                setSubmitted(true)\n            } else {\n                setErrorMessage(json.message);\n                setError(true)\n            }\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            setErrorMessage('Server is not available please try again later');\n            setError(true)\n        }\n    };\n\n    return [loading, error, errorMessage, submit, submitted] as [typeof loading, typeof error, typeof errorMessage, typeof submit, typeof submitted]\n};\n\nconst removeUnusedObjectURL = (content: string, objectURLArray: string[]) => {\n    // some images may be deleted while editing\n    return objectURLArray.filter(url => content.indexOf(url) !== -1)\n};\n\ninterface NamedBlob {\n    blob: Blob,\n    name: string\n}\n\nconst getForm = (title: string, tag: string, content: string, objectURLArray: string[]) => {\n    return new Promise<FormData>((resolve, reject) => {\n        const form = new FormData();\n        form.append('title', title);\n        form.append('tag', tag);\n\n        const promiseArray = objectURLArray.map((url) => getBlobFromObjectURL(url));\n\n        Promise.all<NamedBlob>(promiseArray)\n            .then(blobs => {\n                blobs.forEach((blob, i) => {\n                    // blob name has format of:\n                    // blob:http://localhost:3000/f4d49560-de4e-420b-bcdf-64bfa833a555\n                    // use the pathname as the filename (eg: f4d49560-de4e-420b-bcdf-64bfa833a555)\n                    // replace the url in content with the new filename\n                    const urlComponents = blob.name.split('/');\n                    let filename = urlComponents[urlComponents.length - 1].length === 0 ?\n                        urlComponents[urlComponents.length - 2] :\n                        urlComponents[urlComponents.length - 1];\n\n                    content = content.replace(blob.name, filename);\n                    // file ext is .jpg because it was loaded with js, drawn in canvas ans exported as jpg\n                    form.append(`file${i}`, blob.blob, blob.name + '.jpg')\n                });\n                form.append('content', content);\n                resolve(form);\n            })\n    })\n};\n\nconst getBlobFromObjectURL = (url: string) => {\n    return new Promise<NamedBlob>((resolve, reject) => {\n        fetch(url)\n            .then(res => res.blob())\n            .then(blob => resolve({\n                blob,\n                name: url\n            }))\n            .catch((e) => reject(e))\n    })\n};\n\nexport default usePostSubmission","import {useEffect, useRef, useState} from \"react\";\nimport Quill from \"quill\";\nimport loadImage from \"blueimp-load-image\";\n\nconst useEditor = (ID: string) => {\n    const [quill, setQuill] = useState<Quill | null>(null);\n    const objectURLs = useRef<string[]>([]);\n\n    const setContent = (content: string) => {\n        if (!quill) return;\n        const delta = quill.clipboard.convert(content);\n        quill.setContents(delta)\n    };\n\n    const getObjectURLArray = () => {\n        return objectURLs.current\n    };\n\n    useEffect(() => {\n        // override methods to support objectURL\n        const Image = Quill.import('formats/image');\n        const Link = Quill.import('formats/link');\n        Image.sanitize = function(url: string) {\n            return Link.sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n        };\n        //\n        const quillInstance = new Quill(`#${ID}`, {\n            modules: {\n                toolbar: [\n                    [{header: [1, 2, false]}],\n                    ['bold', 'italic', 'underline'],\n                    ['link', 'image', 'code-block']\n                ],\n                clipboard: {\n                    matchVisual: false\n                }\n            },\n            placeholder: 'Compose an epic...',\n            theme: 'snow',  // or 'bubble'\n            scrollingContainer: 'html'\n        });\n        quillInstance.getModule('toolbar').addHandler('image', () => imageUploadHandler(quillInstance, objectURLs.current));\n        setQuill(quillInstance);\n    }, [ID]);\n\n    return [quill, getObjectURLArray, setContent] as [typeof quill, typeof getObjectURLArray, typeof setContent]\n};\n\nconst imageUploadHandler = (editor: Quill, objectURLs: string[]) => {\n    const input = document.createElement('input');\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', 'image/*');\n    input.click();\n    input.onchange = () => {\n        if (!input.files) return;\n        const image = input.files[0];\n        loadImage(\n            image,\n             (canvas) => {\n                // @ts-ignore\n                canvas.toBlob((blob) => {\n                    const objectURL = URL.createObjectURL(blob);\n\n                    const range = editor.getSelection();\n                    const cursorPosition = range ? range.index : 0;\n                    editor.insertEmbed(cursorPosition, 'image', `${objectURL}`);\n                    editor.setSelection(cursorPosition + 1, 0, 'api');\n                    objectURLs.push(objectURL);\n                }, 'image/jpeg');\n            },\n            {\n                orientation: true,\n                canvas: true\n            }\n        );\n    }\n};\n\nexport default useEditor;\n","import {useEffect} from \"react\";\n\nconst defaultTitle = 'Blog | XiaoxiHome';\n\nfunction useSetTitle(title?: string) {\n\n    useEffect(() => {\n        document.title = title || defaultTitle;\n\n        return () => {\n            document.title = defaultTitle;\n        }\n    }, [title]);\n}\n\nexport default useSetTitle;","import urls from \"./urls\";\nimport useSetTitle from \"../utils/use-set-title\";\nimport useProtectedGet from \"./common/use-protected-get\";\nimport {useMemo} from \"react\";\nimport {CommentData} from \"../components/post-detail/comment-item\";\n\nexport interface PostDetailData {\n    id: string,\n    owner: {\n        email: string,\n        username: string,\n        avatar_url: string\n    }\n    likes: number,\n    dislikes: number,\n    comments: number,\n    comments_data: CommentData[]\n    title: string,\n    content: string,\n    created: string,\n    edited: string,\n    tag: string,\n    is_liked: 0 | 1 | -1 | undefined,\n    is_owner?: boolean,\n    view_count: number,\n    is_pinned: boolean | undefined\n}\n\nconst useGetPostDetail = () => {\n    const {\n        loading,\n        error,\n        data,\n        doGet,\n    } = useProtectedGet<PostDetailData>('', false);\n\n    useSetTitle(data?.title);\n\n    const fetchPostDetail = (postID: number) => {\n        doGet(urls.getPostDetail(postID), false);\n    };\n\n    return [loading, error, data, fetchPostDetail] as [typeof loading, typeof error, typeof data, typeof fetchPostDetail]\n};\n\nexport default useGetPostDetail\n","import React from \"react\";\nimport {FormControl} from \"@material-ui/core\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {fade} from \"@material-ui/core/styles/colorManipulator\";\nimport {TagList} from \"../../requests/use-get-tag-list\";\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        textTransform: 'capitalize',\n        backgroundColor: fade(theme.palette.primary.main, 0.8),\n        color: theme.palette.primary.contrastText,\n        borderRadius: 5,\n        padding: '5px 15px',\n        '&:focus': {\n            backgroundColor: fade(theme.palette.primary.main, 0.8),\n            color: theme.palette.primary.contrastText,\n            borderRadius: 5,\n        },\n    },\n    icon: {\n        color: theme.palette.primary.contrastText,\n    },\n    menuItemRoot: {\n        textTransform: 'capitalize',\n        '&:hover': {\n            backgroundColor: theme.palette.primary.main,\n        },\n        '&:focus': {\n            backgroundColor: theme.palette.primary.main,\n        }\n    },\n    menuRoot: {\n        backgroundColor: theme.palette.primary.light,\n        color: theme.palette.primary.contrastText,\n        borderRadius: 5,\n    }\n}));\n\ninterface TagSelectorProps {\n    tagList: TagList,\n    tagValue: string,\n    tagChangeHandler: (e: any) => void\n}\n\nconst TagSelector: React.FC<TagSelectorProps> = ({tagList, tagValue, tagChangeHandler}) => {\n    const classes = useStyles();\n\n    return (\n        <Select\n            value={tagValue}\n            onChange={tagChangeHandler}\n            displayEmpty\n            disableUnderline\n            classes={{\n                root: classes.root,\n                icon: classes.icon\n            }}\n            MenuProps={{\n                classes: {\n                    paper: classes.menuRoot,\n                }\n            }}\n        >\n            {\n                tagList.map(obj => {\n                    const tag = obj.tag;\n                    return (\n                        <MenuItem\n                            value={tag}\n                            key={tag}\n                            classes={{\n                                root: classes.menuItemRoot\n                            }}\n                        >{tag.toLowerCase()}</MenuItem>\n                        )\n                })\n            }\n        </Select>\n    )\n};\n\nexport default TagSelector\n","import React, {FormEvent, useEffect, useRef, useState} from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport 'quill/dist/quill.snow.css';\nimport {FormControl, FormHelperText, Input, InputLabel, Paper} from \"@material-ui/core\";\nimport useInputField from \"../../utils/use-input-field\";\nimport {postTitleValidator} from \"../../utils/validators\";\nimport {GenericClickButton} from \"../commons/generic-button\";\nimport usePostSubmission from \"../../requests/use-post-submission\";\nimport ErrorMessage from \"../commons/error-message\";\nimport useEditor from \"./use-editor\";\nimport useGetPostDetail from \"../../requests/use-get-post-detail\";\nimport Box from \"@material-ui/core/Box\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport useGetTagList, {TagList} from \"../../requests/use-get-tag-list\";\nimport TagSelector from \"./tag-selector\";\nimport {useMount} from \"react-use/esm\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        position: 'relative',\n        width: '100%',\n        padding: theme.spacing(2),\n        '& .ql-toolbar': {\n            position: 'sticky',\n            top: 88,\n            backgroundColor: '#fff',\n            zIndex: 1\n        }\n    },\n    editor: {\n        width: '100%',\n        minHeight: '300px',\n        marginBottom: '16px',\n    },\n    title: {\n        width: '100%',\n    }\n}));\n\nconst PostEditor: React.FC = () => {\n    const classes = useStyles();\n    const {postID} = useParams();\n    const [needData, setNeedData] = useState(true);\n    const [postDetailLoading, postDetailError, postDetailData, fetchPostDetail] = useGetPostDetail();\n    const [tagListLoading, tagListError, tagList] = useGetTagList();\n\n    useMount(() => {\n        if (postID === undefined) {\n            setNeedData(false)\n        } else {\n            fetchPostDetail(parseInt(postID))\n        }\n    });\n    const showEditor = (!needData || postDetailData !== null) && tagList !== null;\n\n    return (\n        <Paper className={classes.root} elevation={0}>\n            {\n                !showEditor &&\n                    <Box width={\"100%\"} height={500} display={\"flex\"} flexDirection={\"column\"} alignItems={\"center\"} justifyContent={\"center\"}>\n                        {\n                            postDetailError || tagListError ?\n                                \"Cannot retrieve post data at the moment\" :\n                                <CircularProgress color=\"primary\" />\n                        }\n                    </Box>\n            }\n            {\n                !needData && showEditor &&\n                    <PostEditorForm tagList={tagList || []}/>\n            }\n            {\n                postDetailData !== null && showEditor &&\n                    <PostEditorForm\n                        tagList={tagList || []}\n                        updatePost={{\n                            title: postDetailData.title,\n                            content: postDetailData.content,\n                            postID: parseInt(postDetailData.id),\n                            tag: postDetailData.tag\n                        }}\n                    />\n            }\n        </Paper>\n    )\n};\n\ninterface PostEditorFormProps {\n    updatePost?: {\n        title: string,\n        content: string,\n        postID: number,\n        tag: string\n    },\n    tagList: TagList\n}\n\nconst ID = 'editor';\nconst PostEditorForm: React.FC<PostEditorFormProps> = ({updatePost, tagList}) => {\n    // create new post if updatePost === undefined\n    // else update existing post\n    const classes = useStyles();\n\n    const defaultTitle = updatePost === undefined ? \"\" : updatePost.title;\n    const defaultTag = updatePost === undefined ? tagList[0].tag : updatePost.tag;\n    const [editor, getObjectURLArray, setContent] = useEditor(ID);\n    const [title, titleChangeHandler, titleError, titleErrorMessage, validateTitle] = useInputField(defaultTitle, postTitleValidator);\n    const [tag, setTag] = useState<string>(defaultTag);\n    const [loading, error, errorMessage, submit, submitted] = usePostSubmission();\n\n    const isEditorHydrated = useRef(false);\n    useEffect(() => {\n        if (!editor || updatePost === undefined) return;\n        if (isEditorHydrated.current) return;\n        setContent(updatePost.content);\n        isEditorHydrated!.current = true;\n    }, [editor, setContent, updatePost]);\n\n    const submitHandler = (e: FormEvent) => {\n        e.preventDefault();\n        if (!validateTitle()) return;\n\n        if (!editor) return;\n        if (updatePost === undefined) {\n            submit(title, tag, editor.root.innerHTML, getObjectURLArray())\n        } else {\n            submit(title, tag, editor.root.innerHTML, getObjectURLArray(), updatePost.postID)\n        }\n    };\n\n    const tagChangeHandler = (e: any) => {\n        setTag(e.target.value)\n    };\n\n    return (\n        <form>\n            <FormControl className={classes.title}>\n                <InputLabel htmlFor=\"post-editor-title\">Title</InputLabel>\n                <Input\n                    id=\"post-editor-title\"\n                    aria-describedby=\"post-editor-title-helper-text\"\n                    value={title}\n                    onChange={titleChangeHandler}\n                />\n                <FormHelperText id=\"post-editor-title-helper-text\" error={titleError}>{titleError && titleErrorMessage ? titleErrorMessage : ' '}</FormHelperText>\n            </FormControl>\n\n            <Box mb={2}>\n                {'Tag: '}\n                <TagSelector tagList={tagList} tagValue={tag} tagChangeHandler={tagChangeHandler}/>\n            </Box>\n\n            <div id={ID} className={classes.editor}/>\n            <GenericClickButton onClick={submitHandler} width={'250px'} text={submitted ? 'Submitted' : 'Submit'} disabled={submitted || loading}/>\n            <Box mt={1}>\n                <ErrorMessage loading={loading} error={error} errorMessage={errorMessage} spinnerSize={25}/>\n            </Box>\n        </form>\n    )\n};\n\nexport default PostEditor\n","import {useHistory, useLocation} from \"react-router-dom\";\n\nconst useReload = () => {\n    const history = useHistory();\n    const location = useLocation();\n\n    const reload = () => {\n        history.replace('/');\n        history.replace(location)\n    };\n\n    return reload\n};\n\nexport default useReload","import urls from \"./urls\";\nimport useReload from \"../utils/redirects/use-reload\";\nimport usePost from \"./common/use-post\";\n\nconst useCommentSubmission = () => {\n    const reload = useReload();\n    const {\n        loading,\n        error,\n        errorMessage,\n        doPost\n    } = usePost();\n\n    const submit = (\n        content: string,\n        parentPost: string,\n        parentComment: string | null\n    ) => {\n        const options = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                'content': content,\n                'parent_post': parentPost,\n                'parent_comment': parentComment\n            })\n        };\n        doPost(urls.createComment, options, true, reload);\n    };\n\n    return [loading, error, errorMessage, submit] as [typeof loading, typeof error, typeof errorMessage, typeof submit]\n};\n\nexport default useCommentSubmission","import {TextField} from \"@material-ui/core\";\nimport {GenericClickButton} from \"../commons/generic-button\";\nimport ErrorMessage from \"../commons/error-message\";\nimport React, {FormEvent} from \"react\";\nimport useInputField from \"../../utils/use-input-field\";\nimport {commentValidator} from \"../../utils/validators\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport useCommentSubmission from \"../../requests/use-comment-submission\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        margin: '16px 0'\n    },\n    input: {\n        width: '100%',\n    }\n}));\n\ninterface CommentInputProps {\n    parentPost: string,\n    parentComment: string | null\n}\n\nconst CommentInput: React.FC<CommentInputProps> = ({parentPost, parentComment}) => {\n    const classes = useStyles();\n    const [comment, commentChangeHandler, commentError, commentErrorMessage, validateComment] = useInputField('', commentValidator);\n    const [loading, error, errorMessage, submit] = useCommentSubmission();\n\n    const submitHandler = (e: FormEvent) => {\n        e.preventDefault();\n\n        if (!validateComment()) return;\n        submit(comment, parentPost, parentComment)\n    };\n\n    return (\n        <form className={classes.root}>\n            <TextField\n                id=\"comment-input\"\n                label=\"Leave comment\"\n                name=\"comment\"\n                value={comment}\n                onChange={commentChangeHandler}\n                error={commentError}\n                helperText={commentError && commentErrorMessage ? commentErrorMessage : ' '}\n                variant=\"outlined\"\n                className={classes.input}\n            />\n\n            <GenericClickButton onClick={submitHandler} width={'250px'} text={'Submit'} disabled={loading}/>\n            {\n                error && errorMessage &&\n                <ErrorMessage loading={loading} error={error} errorMessage={errorMessage}/>\n            }\n        </form>\n    )\n};\n\nexport default CommentInput","import Avatar from \"@material-ui/core/Avatar\";\nimport getTimeString from \"../../utils/get-time-string\";\nimport LikeButtons from \"../commons/like-buttons\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport ChromeReaderModeIcon from '@material-ui/icons/ChromeReaderMode';\nimport {Grid, Tooltip, Typography} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        color: theme.palette.grey[500],\n        fontWeight: 700,\n    },\n    avatar: {\n        backgroundColor: theme.palette.primary.main\n    },\n    avatarSmall: {\n        width: '1.2rem',\n        height: '1.2rem',\n        fontSize: '0.8rem'\n    },\n    username: {\n        color: theme.palette.text.primary\n    },\n    iconTextItem: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: theme.palette.grey[400],\n        '& p': {\n            margin: theme.spacing(0, 1),\n            color: theme.palette.grey[500],\n        }\n    }\n}));\n\ninterface ItemInfoProps {\n    type: 'comment' | 'post',\n    isLogin: boolean,\n    username: string,\n    avatarUrl: string\n    created: string,\n    edited?: string,\n    id: string,\n    likes: number,\n    dislikes: number,\n    isLiked: -1 | 0 | 1 | undefined,\n    viewCount?: number,\n    small?: boolean\n}\n\nconst ItemInfo: React.FC<ItemInfoProps> = ({type, isLogin, username, avatarUrl, created, edited, id, likes, dislikes, isLiked, small, viewCount}) => {\n    const classes = useStyles();\n    const _isLiked = isLogin ? isLiked : undefined;\n\n    return (\n      <Grid container spacing={4} className={classes.root} alignItems={'center'}>\n          <Grid item>\n\n              <Grid container alignItems={'center'} spacing={2}>\n                  <Grid item>\n                      <Avatar\n                        variant=\"rounded\"\n                        className={small ? `${classes.avatar} ${classes.avatarSmall}` : classes.avatar}\n                        src={avatarUrl}\n                      >\n                          { username.charAt(0) }\n                      </Avatar>\n                  </Grid>\n                  <Grid item>\n                      <span className={classes.username}>{ username }</span>\n                  </Grid>\n              </Grid>\n\n          </Grid>\n\n          <Grid item>\n              <LikeButtons type={type} id={id} likes={likes} dislikes={dislikes} isLiked={_isLiked}/>\n          </Grid>\n\n          {\n              viewCount !== undefined &&\n                <Grid item>\n                    <Tooltip title=\"Page View\" aria-label=\"Page View\">\n                        <div className={classes.iconTextItem}>\n                            <ChromeReaderModeIcon/>\n                            <p>{viewCount}</p>\n                        </div>\n                    </Tooltip>\n                </Grid>\n          }\n\n            <Grid item xs={12}>\n                <Grid container spacing={2} alignItems={'center'} className={classes.root}>\n                    <Grid item xs={12}>\n                        Created: { getTimeString(created) }\n                    </Grid>\n\n                    {\n                      edited !== undefined && getTimeString(created) !== getTimeString(edited) &&\n                      <Grid item xs={12}>\n                          Edited: { getTimeString(edited) }\n                      </Grid>\n                    }\n                </Grid>\n            </Grid>\n      </Grid>\n    )\n};\n\nexport default ItemInfo\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport ItemInfo from \"./item-info\";\nimport {SubCommentData} from \"./comment-item\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        // margin: theme.spacing(2, 0),\n        width: '100%',\n    },\n    content: {\n        margin: '32px'\n    },\n}));\n\ninterface SubCommentItemProps {\n    isLogin: boolean,\n    data: SubCommentData\n}\n\nconst SubCommentItem: React.FC<SubCommentItemProps> = ({isLogin, data}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <ItemInfo\n                type={'comment'}\n                isLogin={isLogin}\n                username={data.owner.username}\n                avatarUrl={data.owner.avatar_url}\n                created={data.created}\n                id={data.id}\n                likes={data.likes}\n                dislikes={data.dislikes}\n                isLiked={data.is_liked}\n                small\n            />\n            <div className={classes.content}>\n                { data.content }\n            </div>\n        </div>\n    )\n\n};\n\nexport default SubCommentItem","import React, {useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Fade, Paper} from \"@material-ui/core\";\nimport ItemInfo from \"./item-info\";\nimport ChatIcon from '@material-ui/icons/Chat';\nimport Button from \"@material-ui/core/Button\";\nimport SubCommentItem from \"./sub-comment-item\";\nimport CommentInput from \"./comment-input\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: '20px 0',\n        width: '100%',\n        padding: theme.spacing(2)\n    },\n    content: {\n        margin: '32px'\n    },\n    commentButton: {\n        margin: '0 32px',\n        color: theme.palette.grey[500],\n    },\n    subCommentPanel: {\n        width: 'calc(100% - 32px)',\n        margin: '8px 0 8px 32px',\n        border: `1px solid ${theme.palette.grey[400]}`,\n        borderRadius: '5px',\n        padding: theme.spacing(2)\n    }\n}));\n\ninterface CommentBaseData {\n    id: string,\n    owner: {\n        username: string,\n        email: string,\n        avatar_url: string\n    }\n    likes: number,\n    dislikes: number,\n    content: string,\n    created: string,\n    is_liked: 0 | 1 | -1 | undefined,\n    is_owner?: boolean\n}\n\nexport interface CommentData extends CommentBaseData {\n    sub_comments: CommentBaseData[]\n}\n\nexport interface SubCommentData extends CommentBaseData {}\n\n\ninterface CommentItemProps {\n    data: CommentData,\n    postID: string,\n    isLogin: boolean\n}\n\nconst CommentItem: React.FC<CommentItemProps> = ({data, postID, isLogin}) => {\n    const classes = useStyles();\n\n    const [isCommentPanelOpen, setIsCommentPanelOpen] = useState(false);\n\n    return (\n        <Paper className={classes.root} elevation={0}>\n            <ItemInfo\n                type={'comment'}\n                isLogin={isLogin}\n                username={data.owner.username}\n                avatarUrl={data.owner.avatar_url}\n                created={data.created}\n                id={data.id}\n                likes={data.likes}\n                dislikes={data.dislikes}\n                isLiked={data.is_liked}\n                small\n            />\n            <div className={classes.content}>\n                { data.content }\n            </div>\n            <Button\n                variant=\"outlined\"\n                className={classes.commentButton}\n                disableElevation\n                startIcon={<ChatIcon />}\n                onClick={() => setIsCommentPanelOpen(prev => !prev)}\n                size={'small'}\n            >\n                { data.sub_comments.length }\n            </Button>\n\n            {\n                isCommentPanelOpen &&\n                <Fade in={isCommentPanelOpen} timeout={1000}>\n                    <div className={classes.subCommentPanel}>\n                        { !data.sub_comments.length && <Box textAlign={'center'}>No comment yet</Box> }\n                        { data.sub_comments.map((item, i) => <SubCommentItem isLogin={isLogin} data={item} key={i}/>) }\n                        { isLogin && <CommentInput parentPost={postID} parentComment={data.id}/> }\n                    </div>\n                </Fade>\n            }\n        </Paper>\n    )\n\n};\n\nexport default CommentItem\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Link, useLocation} from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n    link: {\n        '&:link': {\n            color: theme.palette.primary.main\n        },\n        '&:visited': {\n            color: theme.palette.primary.main\n        },\n        '&:hover': {\n            color: theme.palette.secondary.main\n        }\n    }\n}));\n\ninterface ButtonProps {\n    text: string,\n    to: string,\n    fromState: boolean // pass state.from = location.pathname to Link to object if true\n}\n\nconst ThemeLink: React.FC<ButtonProps> = ({text, to, fromState}) => {\n    const classes = useStyles();\n    const location = useLocation();\n\n    const _to = fromState ?\n        {\n            pathname: to,\n            state: {\n                from: location.pathname\n            }\n        } :\n        to;\n\n\n    return (\n        <Link to={_to} className={classes.link}>{text}</Link>\n    )\n};\n\nexport default ThemeLink\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Divider, Paper} from \"@material-ui/core\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CommentInput from \"./comment-input\";\nimport CommentItem, {CommentData} from \"./comment-item\";\nimport ThemeLink from \"../commons/theme-link\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: '60px 0',\n        width: '100%',\n    },\n    paper: {\n        width: '100%',\n        padding: theme.spacing(4)\n    },\n    loginToLeaveMessage: {\n        width: '100%',\n        height: '200px',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        fontWeight: 700,\n        color: theme.palette.grey[600]\n    }\n}));\n\ninterface CommentListProps {\n    isLogin: boolean,\n    comments: number,\n    postID: string,\n    data: CommentData[]\n}\n\nconst CommentList: React.FC<CommentListProps> = ({isLogin, comments, postID, data}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <Paper className={classes.paper} elevation={0}>\n                <Typography variant={'body1'} component={'div'}>\n                    <Box fontWeight={700}>\n                        { `${comments} ${comments > 1 ? 'comments' : 'comment'}` }\n                    </Box>\n                </Typography>\n                <Divider />\n            </Paper>\n\n                {\n                    data.map((itemData, i) => <CommentItem data={itemData} postID={postID} key={i} isLogin={isLogin}/>)\n                }\n\n            <Paper className={classes.paper} elevation={0}>\n                {\n                    isLogin ?\n                        <CommentInput parentPost={postID} parentComment={null}/> :\n                        <div className={classes.loginToLeaveMessage}>\n                            <span>\n                                <ThemeLink text={'Login'} to={'/login'} fromState/>\n                                {` to leave a comment`}\n                            </span>\n                        </div>\n                }\n            </Paper>\n        </div>\n    )\n\n};\n\nexport default CommentList","import {makeStyles} from \"@material-ui/core/styles\";\n\nconst useInsertedHTMLStyle = makeStyles((theme) => ({\n    root: {\n        display: 'column',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: theme.palette.text.primary,\n        whiteSpace: 'normal',\n        overflowWrap: 'break-word',\n        '& pre': {\n            whiteSpace: 'pre-wrap',\n            wordWrap: 'break-word'\n        },\n        '& a': {\n            wordWrap: 'break-word',\n            background: `linear-gradient(to bottom, ${theme.palette.primary.light} 0%, ${theme.palette.primary.light} 100%)`,\n            backgroundPosition: '0 100%',\n            backgroundRepeat: 'repeat-x',\n            backgroundSize: '4px 4px',\n            transition: theme.transitions.create(['background-size', 'color']),\n        },\n        '& a:hover': {\n            backgroundSize: '4px 100%',\n            color: theme.palette.primary.contrastText,\n        },\n        '& img': {\n            maxWidth: '100%',\n            maxHeight: '600px',\n            display: 'block',\n            margin: '4px auto'\n        },\n        '& p': {\n\n        }\n        // '& h1': {\n        //     fontSize: '3rem',\n        //     fontWeight: 700\n        // },\n        // '& h2': {\n        //     fontSize: '2.5rem',\n        //     fontWeight: 700\n        // },\n        // '& h3': {\n        //     fontSize: '2rem',\n        //     fontWeight: 700\n        // },\n        // '& h4': {\n        //     fontSize: '1.5rem',\n        //     fontWeight: 700\n        // },\n        // '& h5': {\n        //     fontSize: '1.5rem',\n        //     fontWeight: 700\n        // },\n        // '& p, span': {\n        //     fontSize: '1.25rem',\n        //     lineHeight: 1.5,\n        // }\n    }\n}));\n\nexport default useInsertedHTMLStyle","import {useDispatch} from \"react-redux\";\nimport urls from \"./urls\";\nimport {openSnackbar} from \"../redux/actions/snackbar\";\nimport {useHistory} from \"react-router-dom\";\nimport usePost from \"./common/use-post\";\nimport GENERIC_ERROR_MESSAGE from \"./common/generic-error-message\";\n\nconst useDelete = () => {\n    const dispatch = useDispatch();\n    let history = useHistory();\n\n    const {\n        loading,\n        error,\n        doPost\n    } = usePost();\n\n    const deletePost = async (\n        id: number\n    ) => {\n        const options = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        };\n        const successCallback = () => {\n            history.replace('/');\n            dispatch(openSnackbar('Post deleted'));\n        };\n        const errorCallback = (message: string) => {\n            dispatch(openSnackbar(message || GENERIC_ERROR_MESSAGE));\n        };\n        const unknownErrorCallback = () => {\n            dispatch(openSnackbar(GENERIC_ERROR_MESSAGE));\n        };\n\n        doPost(urls.deletePost(id), options, true, successCallback, errorCallback, unknownErrorCallback);\n    };\n\n    return [loading, error, deletePost] as [typeof loading, typeof error, typeof deletePost]\n};\n\nexport default useDelete","import IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport React, {useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Tooltip} from \"@material-ui/core\";\nimport useDelete from \"../../requests/use-delete\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        color: theme.palette.warning.light,\n        fontSize: '1.25rem',\n        \"&:hover\": {\n            color: theme.palette.warning.main\n        },\n        \"&:focus\": {\n            color: theme.palette.warning.main\n        }\n    },\n    confirmButton: {\n        color: theme.palette.warning.main\n    }\n}));\n\ninterface DeleteButtonProps {\n    id: number\n}\n\nconst DeleteButton: React.FC<DeleteButtonProps> = ({id}) => {\n    const classes = useStyles();\n    const [loading, error, deletePost] = useDelete();\n    const [dialog, setDialog] = useState(false);\n\n    const openDialog = () => {\n        setDialog(true)\n    };\n\n    const closeDialog = () => {\n        setDialog(false)\n    };\n\n    const doDeletePost = () => {\n        deletePost(id)\n    };\n\n    return (\n        <>\n            <Tooltip title=\"Delete\" aria-label=\"delete\">\n                <IconButton\n                    aria-label={`delete`}\n                    className={classes.button}\n                    disabled={loading}\n                    onClick={openDialog}\n                >\n                    <DeleteIcon/>\n                </IconButton>\n            </Tooltip>\n            <Dialog\n                open={dialog}\n                onClose={closeDialog}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogTitle id=\"alert-dialog-title\">Are you sure to delete this post?</DialogTitle>\n                <DialogContent>\n                    <DialogContentText id=\"alert-dialog-description\">\n                        It will not be possible to recover this post once deleted.\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={closeDialog} color=\"primary\">\n                        Forget it\n                    </Button>\n                    <Button onClick={doDeletePost} autoFocus disabled={loading} className={classes.confirmButton}>\n                        I'm sure\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    )\n};\n\nexport default DeleteButton","import IconButton from \"@material-ui/core/IconButton\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Tooltip} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\nimport Box from \"@material-ui/core/Box\";\n\nconst useStyles = makeStyles((theme) => ({\n    textColor: {\n        color: theme.palette.success.light,\n    },\n    button: {\n        fontSize: '1.25rem',\n        \"&:hover\": {\n            color: theme.palette.success.main\n        },\n        \"&:focus\": {\n            color: theme.palette.success.main\n        }\n    },\n}));\n\ninterface EditButtonProps {\n    id: number\n}\n\nconst EditButton: React.FC<EditButtonProps> = ({id}) => {\n    const classes = useStyles();\n\n    return (\n        <Tooltip title=\"Edit\" aria-label=\"edit\">\n            <Box className={classes.textColor}>\n                <IconButton\n                    aria-label={`edit`}\n                    component={Link}\n                    to={`/edit-post/${id}`}\n                    classes={{\n                        root: classes.button\n                    }}\n                >\n                    <EditIcon/>\n                </IconButton>\n            </Box>\n        </Tooltip>\n    )\n};\n\nexport default EditButton","import usePost from \"./common/use-post\";\nimport {openSnackbar} from \"../redux/actions/snackbar\";\nimport GENERIC_ERROR_MESSAGE from \"./common/generic-error-message\";\nimport urls from \"./urls\";\nimport {useDispatch} from \"react-redux\";\n\nconst usePin = (id: string) => {\n  const dispatch = useDispatch();\n\n  const {\n    loading,\n    error,\n    data: updatedData,\n    doPost\n  } = usePost<{\n    is_pinned: boolean\n  }>();\n\n  const pin = async (\n    isPinned: boolean\n  ) => {\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        isPinned,\n        id\n      })\n    };\n    const errorCallback = (message: string) => {\n      dispatch(openSnackbar(message || GENERIC_ERROR_MESSAGE));\n    };\n    const unknownErrorCallback = () => {\n      dispatch(openSnackbar(GENERIC_ERROR_MESSAGE));\n    };\n\n    await doPost(\n      urls.pinPost,\n      options,\n      true,\n      null,\n      errorCallback,\n      unknownErrorCallback\n    );\n  };\n\n  return {loading, error, updatedData, pin}\n};\n\nexport default usePin","import IconButton from \"@material-ui/core/IconButton\";\nimport React, {useMemo} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Tooltip} from \"@material-ui/core\";\nimport Box from \"@material-ui/core/Box\";\nimport StarIcon from '@material-ui/icons/Star';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\nimport usePin from \"../../requests/use-pin\";\nimport {orange} from \"@material-ui/core/colors\";\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    color: orange[500],\n    fontSize: '1.25rem',\n    \"&:hover\": {\n      color: orange[300]\n    },\n    \"&:focus\": {\n      color: orange[300]\n    }\n  },\n}));\n\ninterface PinButtonProps {\n  id: number,\n  isPinned: boolean\n}\n\nconst PinButton: React.FC<PinButtonProps> = ({id, isPinned: inputIsPinned}) => {\n  const classes = useStyles();\n  const pinPost = usePin(`${id}`);\n\n  const isPinned = useMemo(() => {\n    if (pinPost.updatedData === null) {\n      return inputIsPinned\n    }\n    return pinPost.updatedData.is_pinned\n  }, [inputIsPinned, pinPost.updatedData]);\n\n  return (\n    <Tooltip title=\"Pin Post\" aria-label=\"pin post\">\n      <Box>\n        <IconButton\n          aria-label={`pin post`}\n          classes={{\n            root: classes.button\n          }}\n          disabled={pinPost.loading}\n          onClick={() => pinPost.pin(!isPinned)}\n        >\n          {\n            isPinned ?\n              <StarIcon/> :\n              <StarBorderIcon/>\n          }\n        </IconButton>\n      </Box>\n    </Tooltip>\n  )\n};\n\nexport default PinButton","import React, {useRef} from \"react\";\nimport {useMount} from 'react-use';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Paper} from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\nimport useGetPostDetail from \"../../requests/use-get-post-detail\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport CommentList from \"./comment-list\";\nimport ItemInfo from \"./item-info\";\nimport Box from \"@material-ui/core/Box\";\nimport useInsertedHTMLStyle from \"./inserted-html-style\";\nimport DeleteButton from \"../commons/delete-button\";\nimport EditButton from \"../commons/edit-button\";\nimport TagChip from \"../commons/tag-chip/tag-chip\";\nimport PinButton from \"../commons/pin-button\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        margin: theme.spacing(1, 0, 0, 0)\n    },\n    paper: {\n        width: '100%',\n        padding: theme.spacing(4)\n    },\n    loading: {\n        width: '100%',\n        height: '500px',\n    },\n    center: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center'\n    }\n}));\n\ninterface PostDetailProps {\n    isLogin: boolean\n}\n\nconst PostDetail: React.FC<PostDetailProps> = ({isLogin}) => {\n    const classes = useStyles();\n    const insertedHTMLClasses = useInsertedHTMLStyle();\n    const HTMLStringContainerRef = useRef<HTMLDivElement>(null);\n\n    const { postID } = useParams();\n    const [loading, error, data, fetchPostDetail] = useGetPostDetail();\n    useMount(() => {\n        fetchPostDetail(parseInt(postID || '1'))\n    });\n\n    let content;\n    if (loading) {\n        content = (\n            <div className={classes.loading}>\n                <Skeleton variant=\"rect\" width={'100%'} height={'100%'}/>\n            </div>\n        )\n    } else if (error) {\n        content = (\n            <Box className={classes.center} height={500}>\n                <h1>Server error</h1>\n            </Box>\n        )\n    } else if (data) {\n        content = (\n            <>\n                <Paper className={classes.paper} elevation={0}>\n                    <Box width={'100%'}>\n                        <TagChip text={data.tag} size={'normal'}/>\n                    </Box>\n                    <h1> {data.title} </h1>\n                    <ItemInfo\n                        type={'post'}\n                        isLogin={isLogin}\n                        username={data.owner.username}\n                        avatarUrl={data.owner.avatar_url}\n                        created={data.created}\n                        id={data.id}\n                        likes={data.likes}\n                        dislikes={data.dislikes}\n                        isLiked={data.is_liked}\n                        viewCount={data.view_count}\n                        edited={data.edited}\n                    />\n                    <Box className={classes.center} my={2}>\n                        {\n                            isLogin && data.is_owner &&\n                                <>\n                                    <DeleteButton id={parseInt(data.id)}/>\n                                    <EditButton id={parseInt(data.id)}/>\n                                    {\n                                        data.is_pinned !== undefined &&\n                                        <PinButton id={parseInt(data.id)} isPinned={data.is_pinned} />\n                                    }\n                                </>\n                        }\n                    </Box>\n                    <Box width={'100%'} height={'40px'}> </Box>\n                    <div dangerouslySetInnerHTML={{__html: data.content}} className={insertedHTMLClasses.root} ref={HTMLStringContainerRef}/>\n                </Paper>\n                <CommentList comments={data.comments} isLogin={isLogin} postID={data.id} data={data.comments_data}/>\n            </>\n        )\n    }\n\n    return (\n        <div className={classes.root}>\n            { content }\n        </div>\n    )\n\n};\n\nexport default PostDetail\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport {usePrevious} from \"react-use\";\nimport React from 'react';\n\nexport default function RouterScrollRestoration() {\n    const { pathname, search } = useLocation();\n    const previousPathname = usePrevious(pathname);\n    const previousSearch = usePrevious(search);\n\n    useEffect(() => {\n        if (previousSearch === undefined || previousPathname === undefined) {\n            return\n        }\n\n        if (previousSearch !== search || previousPathname !== pathname) {\n            window.scrollTo(0, 0);\n        }\n    }, [pathname, previousPathname, previousSearch, search])\n\n    return <></>\n}\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Paper, Typography} from \"@material-ui/core\";\n\ninterface SectionTitleProps {\n    sectionTitle: string\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        minHeight: '100px',\n    },\n    sectionTitle: {\n        width: '100%',\n        padding: theme.spacing(1, 2),\n        backgroundColor: theme.palette.primary.light,\n        fontWeight: 700,\n        color: '#fff'\n    },\n    content: {\n        width: '100%',\n        padding: theme.spacing(2),\n    }\n}));\n\nconst SectionWrapper: React.FC<SectionTitleProps> = ({children, sectionTitle}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <Typography variant={'body1'} component={'h3'}>\n                <Box className={classes.sectionTitle}>\n                    { sectionTitle }\n                </Box>\n            </Typography>\n            <div className={classes.content}>\n                { children }\n            </div>\n        </div>\n    )\n};\n\nexport default SectionWrapper","import {Crop} from \"react-image-crop\";\n// import EXIF from \"exif-js/exif\";\n\nconst SIZE = 800;\n\nfunction getCroppedImg(image: HTMLImageElement, crop: Crop, scale: number, fileName: string) {\n    const [x, y, width, height] = [crop.x, crop.y, crop.width, crop.height].map(_ => _ === undefined ? 1 : _);\n\n    const canvas = document.createElement('canvas');\n    canvas.width = SIZE;\n    canvas.height = SIZE;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return null;\n\n    // As Base64 string\n    // const base64Image = canvas.toDataURL('image/jpeg');\n\n    // As a blob\n    return new Promise<Blob>(async (resolve, reject) => {\n        try {\n            // await rotateAsPerExif(image, ctx, canvas.width, canvas.height);\n            ctx.drawImage(\n                image,\n                x * scale,\n                y * scale,\n                width * scale,\n                height * scale,\n                0,\n                0,\n                SIZE,\n                SIZE,\n            );\n            canvas.toBlob(blob => {\n                if (blob) {\n                    resolve(blob);\n                }\n            }, 'image/jpeg', 1);\n        } catch (e) {\n            throw e\n        }\n    });\n}\n\n// const rotateAsPerExif = (image: HTMLImageElement, ctx: CanvasRenderingContext2D, canvasWidth: number, canvasHeight: number) => {\n//     return new Promise((resolve, reject) => {\n//         // @ts-ignore\n//         EXIF.getData(image, function(this: HTMLImageElement) {\n//             console.log(ctx)\n//             const orientation = EXIF.getTag(this,\"Orientation\");\n//             switch (orientation) {\n//                 case 2: ctx.translate(canvasWidth, 0);     ctx.scale(-1,1); break;\n//                 case 3: ctx.translate(canvasWidth,canvasHeight); ctx.rotate(Math.PI); break;\n//                 case 4: ctx.translate(0,canvasHeight);     ctx.scale(1,-1); break;\n//                 case 5: ctx.rotate(0.5 * Math.PI);   ctx.scale(1,-1); break;\n//                 case 6:\n//                     ctx.rotate(0.5 * Math.PI);\n//                     ctx.translate(0,-canvasHeight);\n//                     break;\n//                 case 7: ctx.rotate(0.5 * Math.PI);   ctx.translate(canvasWidth,-canvasHeight); ctx.scale(-1,1); break;\n//                 case 8: ctx.rotate(-0.5 * Math.PI);  ctx.translate(-canvasWidth,0); break;\n//             }\n//             resolve()\n//         })\n//     })\n// };\n\nexport default getCroppedImg","import React, {useEffect, useMemo, useRef, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {GenericClickButton} from \"../../commons/generic-button\";\nimport {Box} from \"@material-ui/core\";\nimport ReactCrop, {Crop} from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport ErrorMessage from \"../../commons/error-message\";\nimport getCroppedImg from \"./get-cropped-image\";\nimport useUpdateAvatar from \"../../../requests/use-update-avatar\";\nimport useResizeImage, {getWidthHeight} from \"./use-resize-image\";\nimport loadImage from 'blueimp-load-image'\n\nenum Stage {\n    'UPLOAD' = 'UPLOAD',\n    'CROP' = 'CROP',\n    'CONFIRM' = 'CONFIRM',\n    'FINISH' = 'FINISH'\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center'\n    },\n    row: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'flex-start'\n    },\n    backNextButtons: {\n        width: '100%',\n        margin: theme.spacing(1, 0),\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n    },\n    centering: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center'\n    }\n}));\n\ninterface FinishStageProps {\n    restart: () => void\n}\n\nconst FinishStage: React.FC<FinishStageProps> = ({restart}) => {\n    const classes = useStyles();\n\n    return (\n        <>\n            <div className={classes.backNextButtons}>\n                <GenericClickButton onClick={restart} width={'150px'} text={'Start Again'}/>\n            </div>\n            <div className={'centering'}>\n                <Box fontWeight={700} my={2}>\n                    All set\n                </Box>\n            </div>\n        </>\n    )\n};\n\ninterface ConfirmStageProps {\n    blob: Blob | null,\n    back: () => void,\n    next: () => void,\n}\n\nconst ConfirmStage: React.FC<ConfirmStageProps> = ({blob, back, next}) => {\n    const classes = useStyles();\n\n    const [loading, error, errorMessage, upload] = useUpdateAvatar();\n    const containerRef = useRef<HTMLDivElement>(null);\n    const src = useMemo(() => {\n        return URL.createObjectURL(blob)\n    }, [blob]);\n    const [imgWidth, imgHeight] = useResizeImage(containerRef, src);\n\n    const GoNext = async () => {\n        try {\n            if (blob) {\n                const uploaded = await upload(blob);\n                if (uploaded) {\n                    next();\n                }\n            }\n        } catch (e) {}\n    };\n\n    return (\n        <>\n            <div className={classes.backNextButtons}>\n                <Box>\n                    <GenericClickButton onClick={back} width={'150px'} text={'Redo Cropping'}/>\n                </Box>\n                <Box>\n                    <GenericClickButton onClick={GoNext} width={'150px'} text={'Update Avatar'} disabled={loading}/>\n                </Box>\n            </div>\n            <ErrorMessage loading={loading} error={error} errorMessage={errorMessage}/>\n            {\n                !loading &&\n                <div className={classes.centering} ref={containerRef}>\n                    <img\n                        src={src}\n                        alt={'cropped'}\n                        style={{\n                            width: imgWidth,\n                            height: imgHeight\n                        }}/>\n                </div>\n            }\n        </>\n    )\n};\n\ninterface CropStageProps {\n    src: string,\n    back: () => void,\n    next: (blob: Blob) => void\n}\n\nconst CropStage: React.FC<CropStageProps> = ({src, back, next}) => {\n    const classes = useStyles();\n    const [error, setError] = useState(false);\n    const [image, setImage] = useState<HTMLImageElement | null>(null);\n    const [crop, setCrop] = useState<Crop>({});\n    const cropperWrapperRef = useRef<HTMLDivElement>(null);\n    const [cropperSize, setCropperSize] = useState({\n        width: 1,\n        height: 1\n    });\n\n    const goNext = async () => {\n        try {\n            if (!image) return;\n            const croppedSrc = await getCroppedImg(image, crop, image.naturalWidth / cropperSize.width, ' ');\n            if (croppedSrc) {\n                next(croppedSrc);\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    };\n\n    const handleImageLoaded = (image: HTMLImageElement) => {\n        setImage(image);\n        if (cropperWrapperRef.current) {\n            const [width, height] = getWidthHeight(\n                cropperWrapperRef.current.getBoundingClientRect().width,\n                image.naturalWidth,\n                image.naturalHeight\n            );\n            setCropperSize({\n                width,\n                height\n            });\n        }\n    };\n\n    useEffect(() => {\n        const width = cropperSize.width;\n        const height = cropperSize.height;\n        if (width >= height) {\n            const x = Math.round((width - height) / 2);\n            setCrop({\n                aspect: 1,\n                unit: 'px',\n                height: height,\n                width: height,\n                x,\n                y: 0\n            })\n        } else {\n            const y = Math.round((height - width) / 2);\n            setCrop({\n                aspect: 1,\n                unit: 'px',\n                height: width,\n                width: width,\n                x: 0,\n                y\n            })\n        }\n    }, [cropperSize.width, cropperSize.height]);\n\n\n    return (\n        <>\n            <div className={classes.backNextButtons}>\n                <Box justifySelf={'flex-start'}>\n                    <GenericClickButton onClick={back} width={'150px'} text={'Repick'}/>\n                </Box>\n                <Box justifySelf={'flex-end'}>\n                    <GenericClickButton onClick={goNext} width={'150px'} text={'Crop'}/>\n                </Box>\n            </div>\n            <ErrorMessage loading={false} error={false} errorMessage={''}/>\n            <div ref={cropperWrapperRef} className={classes.centering}>\n                <ReactCrop\n                    src={src}\n                    crop={crop}\n                    onChange={(newCrop) => setCrop(newCrop)}\n                    ruleOfThirds={true}\n                    onImageError={() => setError(true)}\n                    onImageLoaded = {handleImageLoaded}\n                    style={{\n                        width: cropperSize.width,\n                        height: cropperSize.height\n                    }}\n                />\n            </div>\n            {\n                error &&\n                <ErrorMessage loading={false} error={true} errorMessage={'Image can\\'t be loaded'}/>\n            }\n        </>\n    )\n};\n\ninterface UploadStageProps {\n    next: (src: string) => void,\n}\n\nconst UploadStage: React.FC<UploadStageProps> = ({next}) => {\n    const classes = useStyles();\n    const inputRef = useRef<HTMLInputElement>(null);\n    const [link, setLink] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    const openFileInput = () => {\n        inputRef.current?.click();\n    };\n\n    const handleFiles = () => {\n        if (\n            inputRef.current &&\n            inputRef.current.files &&\n            inputRef.current.files.length\n        ) {\n            if (loading) return;\n            setLoading(true);\n            loadImage(\n                inputRef.current.files[0],\n                (img) => {\n                    // @ts-ignore\n                    next(img.toDataURL('image/jpeg'));\n                },\n                {\n                    orientation: true,\n                    canvas: true\n                }\n            );\n        }\n    };\n\n    useEffect(() => {\n        const input = inputRef.current;\n        input?.addEventListener('change', handleFiles);\n        return () => {\n            input?.removeEventListener('change', handleFiles);\n        }\n    }, []);\n\n    return (\n        <div style={{width: '100%'}}>\n            {/*<Box width={'80%'}>*/}\n                {/*<Box my={1}>*/}\n                {/*    <TextField label=\"From Link\" fullWidth value={link} onChange={(e) => setLink(e.currentTarget.value)}/>*/}\n                {/*</Box>*/}\n                <div className={classes.centering}>\n                    {/*<Box>*/}\n                    {/*    <GenericClickButton onClick={() => next(link)} width={'150px'} text={'Get Image'}/>*/}\n                    {/*</Box>*/}\n                    {/*<Box mx={1}> or </Box>*/}\n                    <Box my={2}>\n                        {\n                            loading ?\n                                <ErrorMessage loading={true} error={false} errorMessage={''} /> :\n                                <Box>\n                                    <GenericClickButton onClick={openFileInput} width={'150px'} text={'Upload From Disk'} disabled={loading}/>\n                                </Box>\n                        }\n                    </Box>\n                    <input type=\"file\" ref={inputRef} accept=\"image/*\" style={{display: 'none'}}/>\n                </div>\n            {/*</Box>*/}\n        </div>\n    )\n};\n\ninterface UpdateAvatarProps {\n\n}\n\nconst UpdateAvatar: React.FC<UpdateAvatarProps> = ({}) => {\n    const classes = useStyles();\n\n    const [stage, setStage] = useState(Stage.UPLOAD);\n    const [imageSrc, _setImageSrc] = useState('');\n    const [croppedImageBlob, _setCroppedImageBlob] = useState<Blob | null>(null);\n\n    const moveToUploadStage = () => {\n        setStage(Stage.UPLOAD)\n    };\n\n    const moveToCropStage = (src: string) => {\n        _setImageSrc(src);\n        setStage(Stage.CROP);\n    };\n\n    const backToCropStage = () => {\n        setStage(Stage.CROP);\n    };\n\n    const moveToConfirmStage = (cropped: Blob) => {\n        _setCroppedImageBlob(cropped);\n        setStage(Stage.CONFIRM);\n    };\n\n    const moveToFinishStage = () => {\n        setStage(Stage.FINISH);\n    };\n\n    let content;\n    switch (stage) {\n        case Stage.UPLOAD:\n            content = <UploadStage next={moveToCropStage} />;\n            break;\n        case Stage.CROP:\n            content = <CropStage src={imageSrc} back={moveToUploadStage} next={moveToConfirmStage}/>;\n            break;\n        case Stage.CONFIRM:\n            content = <ConfirmStage blob={croppedImageBlob} back={backToCropStage} next={moveToFinishStage}/>;\n            break;\n        case Stage.FINISH:\n            content = <FinishStage restart={moveToUploadStage}/>;\n            break;\n        default:\n            content = <UploadStage next={moveToCropStage} />;\n    }\n\n    return (\n        <div className={classes.root}>\n            { content }\n        </div>\n    )\n};\n\nexport default UpdateAvatar","import {useState} from \"react\";\nimport urls from \"./urls\";\nimport useFetchWithTokenVerification from \"./common/use-fetch-with-token-verification\";\n\nconst useUpdateAvatar = () => {\n    const fetchWithTokenVerification = useFetchWithTokenVerification();\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const upload = (\n        file: File | Blob\n    ) => {\n        return new Promise((resolve, reject) => {\n            if (loading) {\n                reject();\n                return\n            }\n\n            // reset states\n            setError(false);\n            setErrorMessage('');\n\n            // start fetching\n            setLoading(true);\n            const form = new FormData();\n            form.append('image', file, \"avatar.jpg\");\n\n            fetchWithTokenVerification(true, urls.updateAvatar, {\n                method: 'POST',\n                body: form\n            })\n                .then((res) => res.json())\n                .then(json => {\n                    setLoading(false);\n                    console.log(json);\n\n                    if (json.status === 'success') {\n                        resolve(true);\n                        return\n                    } else {\n                        setError(true);\n                        if (json.status === 'error') {\n                            setErrorMessage(json.message)\n                        } else {\n                            setErrorMessage('Server unavailable, please try again later.')\n                        }\n                        reject();\n                    }\n                })\n                .catch(e => {\n                    setLoading(false);\n\n                    setError(true);\n                    setErrorMessage('Server unavailable, please try again later.');\n                    reject();\n                });\n        });\n    };\n\n    return [loading, error, errorMessage, upload] as [boolean, boolean, string, typeof upload]\n\n};\n\nexport default useUpdateAvatar","import {RefObject, useEffect, useState} from \"react\";\n\nconst WIDTH = 500;\nconst HEIGHT = 500;\n// try to size the wrapper within the constraints\n// target is no bigger than WIDTH * HEIGHT\n// on smaller screens (maxWidth < WIDTH) the target is SHORTER_EDGE * SHORTER_EDGE\n\nconst useResizeImage = (ref: RefObject<HTMLDivElement>, src: string) => {\n    const [width, setWidth] = useState(0);\n    const [height, setHeight] = useState(0);\n\n    const loadImage = () => {\n        const image = new Image();\n        image.src = src;\n        image.onload = () => resize(image)\n    };\n\n    const resize = (image: HTMLImageElement) => {\n        if (!src || !ref.current) return;\n        const containerWidth = ref.current.getBoundingClientRect().width;\n        const [finalWidth, finalHeight] = getWidthHeight(containerWidth, image.naturalWidth, image.naturalHeight);\n\n        setWidth(finalWidth);\n        setHeight(finalHeight);\n    };\n\n    useEffect(() => {\n        loadImage()\n    }, [ref, src]);\n\n    return [width, height] as [typeof width, typeof height]\n};\n\nconst getWidthHeight = (containerWidth: number, imageNaturalWidth: number, imageNaturalHeight: number) => {\n    const maxWidth = Math.min(WIDTH, containerWidth) || 1;\n    const maxHeight = maxWidth;\n\n    let width = 1;\n    let height = 1;\n    if (imageNaturalWidth >= imageNaturalHeight) {\n        width = maxWidth;\n        height = (width / imageNaturalWidth) * imageNaturalHeight\n    } else {\n        height = maxHeight;\n        width = (height / imageNaturalHeight) * imageNaturalWidth\n    }\n\n    // do no enlarge\n    const finalWidth = Math.min(imageNaturalWidth, Math.round(width));\n    const finalHeight = Math.min(imageNaturalHeight, Math.round(height));\n\n    return [finalWidth, finalHeight] as [typeof finalWidth, typeof finalHeight]\n};\n\nexport {\n    useResizeImage as default,\n    getWidthHeight\n}","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Box, Paper, Typography} from \"@material-ui/core\";\nimport SectionWrapper from \"./section-wrapper\";\nimport UpdateAvatar from \"./update-avatar/update-avatar\";\n\ninterface AccountSettingProps {\n    username: string\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: theme.spacing(1, 0),\n        width: '100%'\n    },\n    paper: {\n        width: '100%',\n        minHeight: '100px',\n        overflow: 'hidden'\n        // display: 'flex',\n        // flexDirection: 'row',\n        // alignItems: 'center',\n        // justifyContent: 'flex-start'\n    }\n}));\n\nconst AccountSetting: React.FC<AccountSettingProps> = ({username}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <Typography variant={'body1'} component={'h2'}>\n                <Box my={2} fontWeight={700}>\n                    { username }\n                </Box>\n            </Typography>\n            <Paper className={classes.paper} elevation={0}>\n                <SectionWrapper sectionTitle={'Avatar'}>\n                    <UpdateAvatar />\n                </SectionWrapper>\n            </Paper>\n        </div>\n    )\n};\n\nexport default AccountSetting","import {connect} from \"react-redux\";\nimport AccountSetting from \"../components/account-setting/account-setting\";\nimport {State} from \"../redux/state\";\n\nfunction mapStateToProps(state: State) {\n    return {\n        username: state.loginStatus.username\n    }\n}\n\nconst AccountSettingContainer = connect(\n    mapStateToProps\n)(AccountSetting);\n\nexport default AccountSettingContainer;\n","const COLORS = ['#ff4143', '#50c5e3', '#fcb415'];\n\nconst getColor = () => {\n    const index = Math.floor(Math.random() * COLORS.length);\n    return COLORS[index];\n};\n\nexport class ConfettiSprite {\n    color: string;\n    x: number;\n    y: number;\n    r: number;\n    rotation: number;\n    vx: number;\n    vy: number;\n    opacity: number;\n    finished: boolean;\n    params = {\n        dx: 0.92,\n        dy: 0.95,\n        g: 0.2,\n        dr: 0.99,\n        dOpacity: 0.015,\n        dRotation: Math.random() + 1,\n        ddRotation: 0.95\n    };\n\n    constructor(width: number, height: number) {\n        this.color = getColor();\n        this.x = 0.2 * width;\n        this.y = 0.4 * height;\n        this.r = 5;\n        this.rotation = Math.random() * Math.PI;\n        this.vx = (-7 * Math.random() + 1) * -(width / 90);\n        this.vy = (2.5 * Math.random() + 1) * -(height / 100);\n        this.opacity = 1;\n        this.finished = false;\n    }\n\n    move() {\n        // horizontal speed\n        this.vx = this.vx * this.params.dx;\n        this.x = this.x + this.vx;\n\n        // vertical speed\n        this.vy = this.vy * this.params.dy;\n        this.vy = this.vy + this.params.g;\n        this.y = this.y + this.vy;\n\n        // reduce opacity when it starts to fall\n        // set this.finished to true when opacity <= 0\n        if (this.vy >= 0) {\n            const nextOpacity = this.opacity - this.params.dOpacity;\n            if (nextOpacity > 0) {\n                this.opacity = nextOpacity\n            } else {\n                this.finished = true\n            }\n        }\n\n        // rotation\n        this.params.dRotation *= this.params.ddRotation;\n        this.rotation += this.params.dRotation\n    }\n}\n\ninterface ConfettiOptions extends Object {\n    width: number,\n    height: number,\n    spritesCount: number,\n    [key: string]: any\n}\n\nclass Confetti {\n    params: ConfettiOptions;\n    ID: string;\n    canvas: HTMLCanvasElement | null;\n    ctx: CanvasRenderingContext2D | null;\n    sprites: ConfettiSprite[];\n\n    constructor(ID: string, options?: Partial<ConfettiOptions>) {\n        this.params = this.initParams(options);\n        this.ID = ID;\n        this.canvas = null;\n        this.ctx = null;\n        this.sprites = [];\n        this.loop = this.loop.bind(this);\n    }\n\n    initParams(options?: Partial<ConfettiOptions>) {\n        const defaultOptions = {\n            width: 300,\n            height: 300,\n            spritesCount: 30,\n        } as ConfettiOptions;\n\n        if (options !== undefined) {\n            return {...defaultOptions, ...options}\n        }\n\n        return defaultOptions\n    }\n\n    initCanvas() {\n        this.canvas = document.getElementById(this.ID) as HTMLCanvasElement;\n        this.ctx = this.canvas.getContext('2d');\n\n        this.canvas.width = this.params.width;\n        this.canvas.height = this.params.height;\n    }\n\n    initSprites() {\n        for (let i=0; i<this.params.spritesCount; i++) {\n            this.sprites.push(new ConfettiSprite(this.params.width, this.params.height));\n        }\n    }\n\n    /**\n     * set drawer() according to if CanvasRenderingContext2D.ellipse() is supported\n     */\n    initDrawer() {\n        if (!this.ctx) return;\n\n        if (this.ctx.ellipse === undefined) {\n            this.drawer = (ctx: CanvasRenderingContext2D, x: number, y: number, r: number) => {\n                ctx.arc(x, y, r, 0, 2 * Math.PI);\n            }\n        } else {\n            this.drawer = (ctx: CanvasRenderingContext2D, x: number, y: number, r: number, rotation: number) => {\n                ctx.ellipse(x, y, r, r * 1.2, rotation, 0, 2 * Math.PI);\n            }\n        }\n    }\n\n    /**\n     * drawer draws ellipse if supported, otherwise draw arc\n     */\n    drawer(ctx: CanvasRenderingContext2D, x: number, y: number, r: number, rotation?: number) {}\n\n    draw() {\n        if (!this.ctx) return;\n        this.ctx.clearRect(0, 0, this.params.width, this.params.height);\n\n        this.sprites.forEach(_ => {\n            if (!this.ctx) return;\n\n            this.ctx.save();\n            this.ctx.beginPath();\n            this.drawer(this.ctx, _.x, _.y, _.r, _.rotation);\n            this.ctx.fillStyle = _.color;\n            this.ctx.globalAlpha = _.opacity;\n            this.ctx.fill();\n            this.ctx.restore();\n        })\n    }\n\n    update() {\n        this.sprites = this.sprites.filter(_ => {\n            _.move();\n            return !_.finished\n        });\n    }\n\n    loop() {\n        this.draw();\n        this.update();\n\n        if (this.sprites.length > 0) {\n            requestAnimationFrame(this.loop);\n        }\n    }\n\n    main() {\n        this.initCanvas();\n        this.initSprites();\n        this.initDrawer();\n        this.loop();\n    }\n}\n\nexport default Confetti","import React, {useEffect} from \"react\";\nimport Confetti from \"./confetti\";\n\nconst CANVAS_ID = 'confetti-canvas';\n\ninterface ConfettiWrapperProps {\n\n}\n\nconst ConfettiWrapper: React.FC<ConfettiWrapperProps> = () => {\n\n    useEffect(() => {\n        (new Confetti(CANVAS_ID)).main();\n    }, []);\n\n    return (\n        <canvas id={CANVAS_ID} />\n    )\n};\n\nexport default ConfettiWrapper","import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route\n} from \"react-router-dom\";\nimport {connect} from 'react-redux';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Login from \"./components/login/login\";\nimport Register from \"./components/login/register\";\nimport HeaderContainer from \"./containers/header-container\";\nimport MainPage from \"./components/main-page/main-page\";\nimport SnackbarContainer from \"./containers/snackbar-container\";\nimport Footer from \"./components/footer/footer\";\nimport PrivateRoute from \"./utils/protected-router\";\nimport PostEditor from \"./components/post-editor/post-editor\";\nimport {State} from \"./redux/state\";\nimport PostDetail from \"./components/post-detail/post-detail\";\nimport RouterScrollRestoration from \"./utils/router-scroll-restoration\";\nimport AccountSettingContainer from \"./containers/account-setting-container\";\nimport ConfettiWrapper from \"./components/confetti/confetti-wrapper\";\nimport routes from \"./routes\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        maxWidth: '100vw',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'flex-start'\n    },\n    widthWrapper: {\n        margin: theme.spacing(3, 0, 0, 0),\n        width: theme.breakpoints.values['md'],\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        [theme.breakpoints.down('sm')]: {\n            width: 'calc(100% - 16px)',\n            margin: theme.spacing(0, 1),\n        }\n    },\n    confetti: {\n        position: 'fixed',\n        zIndex: theme.zIndex.tooltip + 1,\n        bottom: '0',\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center'\n    }\n}));\n\ninterface InnerAppProps {\n    isLogin: boolean,\n    confetti: boolean\n}\n\nconst InnerApp: React.FC<InnerAppProps> = ({isLogin, confetti}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <Router basename={process.env.PUBLIC_URL}>\n                <RouterScrollRestoration />\n                <HeaderContainer />\n                <div className={classes.widthWrapper}>\n                    <Switch>\n                        <Route path={routes.home} exact render={ () => <MainPage/> } />\n                        <Route path={routes.login} render={ () => <Login /> } />\n                        <Route path={routes.register} render={ () => <Register /> } />\n                        <Route path={routes.postDetail} render={ () => <PostDetail isLogin={isLogin}/> } />\n                        <PrivateRoute path={routes.editPost} isLogin={isLogin}>\n                            <PostEditor/>\n                        </PrivateRoute>\n                        <PrivateRoute path={routes.accountSetting} isLogin={isLogin}>\n                            <AccountSettingContainer/>\n                        </PrivateRoute>\n                        {/*<Route path=\"/welcome\" component={Welcome} />*/}\n\n                        {/*fall back*/}\n                        <Route path={routes.fallback} render={ () => <MainPage/>} />\n                    </Switch>\n                    <Footer />\n                </div>\n            </Router>\n\n            {\n                confetti &&\n                <div className={classes.confetti}>\n                    <ConfettiWrapper />\n                </div>\n            }\n            <SnackbarContainer />\n        </div>\n    )\n};\n\nfunction mapStateToProps(state: State) {\n    return {\n        isLogin: state.loginStatus.isLogin,\n        confetti: state.confetti\n    }\n}\n\nconst InnerAppContainer = connect(\n    mapStateToProps,\n)(InnerApp);\n\nexport default InnerAppContainer;\n","import React from 'react';\nimport {Provider} from 'react-redux';\nimport configureStore from \"./redux/configure-store\";\nimport { CssBaseline } from \"@material-ui/core\";\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport theme from './theme';\nimport InnerApp from \"./inner-app\";\n\nconst store = configureStore();\n\ninterface AppProps {\n\n}\n\nconst App: React.FC<AppProps> = () => {\n    return (\n        <Provider store={store}>\n        <ThemeProvider theme={theme}>\n        <CssBaseline />\n            <InnerApp />\n        </ThemeProvider>\n        </Provider>\n    )\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}